this._a=this._a||{},_a.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this._a=this._a||{},_a.promote=function(t,e){"use strict";var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n){i[(e+="_")+"constructor"]=n.constructor;for(var r in n)i.hasOwnProperty(r)&&"function"==typeof n[r]&&(i[e+r]=n[r])}return t},this._a=this._a||{},_a.indexOf=function(t,e){"use strict";for(var i=0,n=t.length;i<n;i++)if(e===t[i])return i;return-1},this._a=this._a||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},_a.Event=t}(),this._a=this._a||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n;n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var r=n[t];return r&&this.removeEventListener(t,e,i),r=n[t],r?r.push(e):n[t]=[e],e},e.on=function(t,e,i,n,r,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,r),n&&t.remove()},s)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var r=n[t];if(r)for(var s=0,o=r.length;s<o;s++)if(r[s]==e){1==o?delete n[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e,i){if("string"==typeof t){var n=this._listeners;if(!(e||n&&n[t]))return!0;t=new _a.Event(t,e,i)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var r=this,s=[r];r.parent;)s.push(r=r.parent);var o,a=s.length;for(o=a-1;o>=0&&!t.propagationStopped;o--)s[o]._dispatchEvent(t,1+(0==o));for(o=1;o<a&&!t.propagationStopped;o++)s[o]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n=1==e?this._captureListeners:this._listeners;if(t&&n){var r=n[t.type];if(!r||!(i=r.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,r=r.slice();for(var s=0;s<i&&!t.immediatePropagationStopped;s++){var o=r[s];o.handleEvent?o.handleEvent(t):o(t),t.removed&&(this.off(t.type,o,1==e),t.removed=!1)}}},_a.EventDispatcher=t}(),this._a=this._a||{},function(){"use strict";function t(){throw"Ticker cannot be instantiated."}t.RAF_SYNCHED="synched",t.RAF="raf",t.TIMEOUT="timeout",t.useRAF=!1,t.timingMode=null,t.maxDelta=0,t.paused=!1,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,_a.EventDispatcher.initialize(t),t._addEventListener=t.addEventListener,t.addEventListener=function(){return!t._inited&&t.init(),t._addEventListener.apply(t,arguments)},t._inited=!1,t._startTime=0,t._pausedTime=0,t._ticks=0,t._pausedTicks=0,t._interval=50,t._lastTime=0,t._times=null,t._tickTimes=null,t._timerId=null,t._raf=!0,t.setInterval=function(e){t._interval=e,t._inited&&t._setupTick()},t.getInterval=function(){return t._interval},t.setFPS=function(e){t.setInterval(1e3/e)},t.getFPS=function(){return 1e3/t._interval};try{Object.defineProperties(t,{interval:{get:t.getInterval,set:t.setInterval},framerate:{get:t.getFPS,set:t.setFPS}})}catch(t){console.log(t)}t.init=function(){t._inited||(t._inited=!0,t._times=[],t._tickTimes=[],t._startTime=t._getTime(),t._times.push(t._lastTime=0),t.interval=t._interval)},t.reset=function(){if(t._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(t._timerId)}else clearTimeout(t._timerId);t.removeAllEventListeners("tick"),t._timerId=t._times=t._tickTimes=null,t._startTime=t._lastTime=t._ticks=0,t._inited=!1},t.getMeasuredTickTime=function(e){var i=0,n=t._tickTimes;if(!n||n.length<1)return-1;e=Math.min(n.length,e||0|t.getFPS());for(var r=0;r<e;r++)i+=n[r];return i/e},t.getMeasuredFPS=function(e){var i=t._times;return!i||i.length<2?-1:(e=Math.min(i.length-1,e||0|t.getFPS()),1e3/((i[0]-i[e])/e))},t.setPaused=function(e){t.paused=e},t.getPaused=function(){return t.paused},t.getTime=function(e){return t._startTime?t._getTime()-(e?t._pausedTime:0):-1},t.getEventTime=function(e){return t._startTime?(t._lastTime||t._startTime)-(e?t._pausedTime:0):-1},t.getTicks=function(e){return t._ticks-(e?t._pausedTicks:0)},t._handleSynch=function(){t._timerId=null,t._setupTick(),t._getTime()-t._lastTime>=.97*(t._interval-1)&&t._tick()},t._handleRAF=function(){t._timerId=null,t._setupTick(),t._tick()},t._handleTimeout=function(){t._timerId=null,t._setupTick(),t._tick()},t._setupTick=function(){if(null==t._timerId){var e=t.timingMode||t.useRAF&&t.RAF_SYNCHED;if(e==t.RAF_SYNCHED||e==t.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return t._timerId=i(e==t.RAF?t._handleRAF:t._handleSynch),void(t._raf=!0)}t._raf=!1,t._timerId=setTimeout(t._handleTimeout,t._interval)}},t._tick=function(){var e=t.paused,i=t._getTime(),n=i-t._lastTime;if(t._lastTime=i,t._ticks++,e&&(t._pausedTicks++,t._pausedTime+=n),t.hasEventListener("tick")){var r=new _a.Event("tick"),s=t.maxDelta;r.delta=s&&n>s?s:n,r.paused=e,r.time=i,r.runTime=i-t._pausedTime,t.dispatchEvent(r)}for(t._tickTimes.unshift(t._getTime()-i);t._tickTimes.length>100;)t._tickTimes.pop();for(t._times.unshift(i);t._times.length>100;)t._times.pop()};var e=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);t._getTime=function(){return(e&&e.call(performance)||(new Date).getTime())-t._startTime},_a.Ticker=t}(),this._a=this._a||{},function(){"use strict";function t(){throw"UID cannot be instantiated"}t._nextID=0,t.get=function(){return t._nextID++},_a.UID=t}(),this._a=this._a||{},function(){"use strict";function t(t,e,i,n,r,s,o,a,l,c,h){this.Event_constructor(t,e,i),this.stageX=n,this.stageY=r,this.rawX=null==l?n:l,this.rawY=null==c?r:c,this.nativeEvent=s,this.pointerID=o,this.primary=!!a,this.relatedTarget=h}var e=_a.extend(t,_a.Event);e._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},e._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},e._get_isTouch=function(){return this.pointerID!==-1};try{Object.defineProperties(e,{localX:{get:e._get_localX},localY:{get:e._get_localY},isTouch:{get:e._get_isTouch}})}catch(t){}e.clone=function(){return new t(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},e.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},_a.MouseEvent=_a.promote(t,"Event")}(),this._a=this._a||{},function(){"use strict";function t(t,e,i,n,r,s){this.setValues(t,e,i,n,r,s)}var e=t.prototype;t.DEG_TO_RAD=Math.PI/180,t.identity=null,e.setValues=function(t,e,i,n,r,s){return this.a=null==t?1:t,this.b=e||0,this.c=i||0,this.d=null==n?1:n,this.tx=r||0,this.ty=s||0,this},e.append=function(t,e,i,n,r,s){var o=this.a,a=this.b,l=this.c,c=this.d;return 1==t&&0==e&&0==i&&1==n||(this.a=o*t+l*e,this.b=a*t+c*e,this.c=o*i+l*n,this.d=a*i+c*n),this.tx=o*r+l*s+this.tx,this.ty=a*r+c*s+this.ty,this},e.prepend=function(t,e,i,n,r,s){var o=this.a,a=this.c,l=this.tx;return this.a=t*o+i*this.b,this.b=e*o+n*this.b,this.c=t*a+i*this.d,this.d=e*a+n*this.d,this.tx=t*l+i*this.ty+r,this.ty=e*l+n*this.ty+s,this},e.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.appendTransform=function(e,i,n,r,s,o,a,l,c){if(s%360)var h=s*t.DEG_TO_RAD,u=Math.cos(h),d=Math.sin(h);else u=1,d=0;return o||a?(o*=t.DEG_TO_RAD,a*=t.DEG_TO_RAD,this.append(Math.cos(a),Math.sin(a),-Math.sin(o),Math.cos(o),e,i),this.append(u*n,d*n,-d*r,u*r,0,0)):this.append(u*n,d*n,-d*r,u*r,e,i),(l||c)&&(this.tx-=l*this.a+c*this.c,this.ty-=l*this.b+c*this.d),this},e.prependTransform=function(e,i,n,r,s,o,a,l,c){if(s%360)var h=s*t.DEG_TO_RAD,u=Math.cos(h),d=Math.sin(h);else u=1,d=0;return(l||c)&&(this.tx-=l,this.ty-=c),o||a?(o*=t.DEG_TO_RAD,a*=t.DEG_TO_RAD,this.prepend(u*n,d*n,-d*r,u*r,0,0),this.prepend(Math.cos(a),Math.sin(a),-Math.sin(o),Math.cos(o),e,i)):this.prepend(u*n,d*n,-d*r,u*r,e,i),this},e.rotate=function(e){e*=t.DEG_TO_RAD;var i=Math.cos(e),n=Math.sin(e),r=this.a,s=this.b;return this.a=r*i+this.c*n,this.b=s*i+this.d*n,this.c=-r*n+this.c*i,this.d=-s*n+this.d*i,this},e.skew=function(e,i){return e*=t.DEG_TO_RAD,i*=t.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(e),Math.cos(e),0,0),this},e.scale=function(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this},e.translate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},e.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},e.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},e.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},e.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},e.transformPoint=function(t,e,i){return i=i||{},i.x=t*this.a+e*this.c+this.tx,i.y=t*this.b+e*this.d+this.ty,i},e.decompose=function(e){null==e&&(e={}),e.x=this.tx,e.y=this.ty,e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),n=Math.atan2(this.b,this.a),r=Math.abs(1-i/n);return r<1e-5?(e.rotation=n/t.DEG_TO_RAD,this.a<0&&this.d>=0&&(e.rotation+=e.rotation<=0?180:-180),e.skewX=e.skewY=0):(e.skewX=i/t.DEG_TO_RAD,e.skewY=n/t.DEG_TO_RAD),e},e.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},e.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},t.identity=new t,_a.Matrix2D=t}(),this._a=this._a||{},function(){"use strict";function t(t,e,i,n,r){this.setValues(t,e,i,n,r)}var e=t.prototype;e.setValues=function(t,e,i,n,r){return this.visible=null==t||!!t,this.alpha=null==e?1:e,this.shadow=i,this.compositeOperation=n,this.matrix=r||this.matrix&&this.matrix.identity()||new _a.Matrix2D,this},e.append=function(t,e,i,n,r){return this.alpha*=e,this.shadow=i||this.shadow,this.compositeOperation=n||this.compositeOperation,this.visible=this.visible&&t,r&&this.matrix.appendMatrix(r),this},e.prepend=function(t,e,i,n,r){return this.alpha*=e,this.shadow=this.shadow||i,this.compositeOperation=this.compositeOperation||n,this.visible=this.visible&&t,r&&this.matrix.prependMatrix(r),this},e.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},e.clone=function(){return new t(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},_a.DisplayProps=t}(),this._a=this._a||{},function(){"use strict";function t(t,e){this.setValues(t,e)}var e=t.prototype;e.setValues=function(t,e){return this.x=t||0,this.y=e||0,this},e.copy=function(t){return this.x=t.x,this.y=t.y,this},e.clone=function(){return new t(this.x,this.y)},e.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},_a.Point=t}(),this._a=this._a||{},function(){"use strict";function t(t,e,i,n){this.setValues(t,e,i,n)}var e=t.prototype;e.setValues=function(t,e,i,n){return this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this},e.extend=function(t,e,i,n){return i=i||0,n=n||0,t+i>this.x+this.width&&(this.width=t+i-this.x),e+n>this.y+this.height&&(this.height=e+n-this.y),t<this.x&&(this.width+=this.x-t,this.x=t),e<this.y&&(this.height+=this.y-e,this.y=e),this},e.pad=function(t,e,i,n){return this.x-=e,this.y-=t,this.width+=e+n,this.height+=t+i,this},e.copy=function(t){return this.setValues(t.x,t.y,t.width,t.height)},e.contains=function(t,e,i,n){return i=i||0,n=n||0,t>=this.x&&t+i<=this.x+this.width&&e>=this.y&&e+n<=this.y+this.height},e.union=function(t){return this.clone().extend(t.x,t.y,t.width,t.height)},e.intersection=function(e){var i=e.x,n=e.y,r=i+e.width,s=n+e.height;return this.x>i&&(i=this.x),this.y>n&&(n=this.y),this.x+this.width<r&&(r=this.x+this.width),this.y+this.height<s&&(s=this.y+this.height),r<=i||s<=n?null:new t(i,n,r-i,s-n)},e.intersects=function(t){return t.x<=this.x+this.width&&this.x<=t.x+t.width&&t.y<=this.y+this.height&&this.y<=t.y+t.height},e.isEmpty=function(){return this.width<=0||this.height<=0},e.clone=function(){return new t(this.x,this.y,this.width,this.height)},e.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},_a.Rectangle=t}(),this._a=this._a||{},function(){"use strict";function t(t,e,i,n,r,s,o){t.addEventListener&&(this.target=t,this.overLabel=null==i?"over":i,this.outLabel=null==e?"out":e,this.downLabel=null==n?"down":n,this.play=r,this._isPressed=!1,this._isOver=!1,this._enabled=!1,t.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),s&&(o&&(s.actionsEnabled=!1,s.gotoAndStop&&s.gotoAndStop(o)),t.hitArea=s))}var e=t.prototype;e.setEnabled=function(t){if(t!=this._enabled){var e=this.target;this._enabled=t,t?(e.cursor="pointer",e.addEventListener("rollover",this),e.addEventListener("rollout",this),e.addEventListener("mousedown",this),e.addEventListener("pressup",this),e._reset&&(e.__reset=e._reset,e._reset=this._reset)):(e.cursor=null,e.removeEventListener("rollover",this),e.removeEventListener("rollout",this),e.removeEventListener("mousedown",this),e.removeEventListener("pressup",this),e.__reset&&(e._reset=e.__reset,delete e.__reset))}},e.getEnabled=function(){return this._enabled};try{Object.defineProperties(e,{enabled:{get:e.getEnabled,set:e.setEnabled}})}catch(t){}e.toString=function(){return"[ButtonHelper]"},e.handleEvent=function(t){var e,i=this.target,n=t.type;"mousedown"==n?(this._isPressed=!0,e=this.downLabel):"pressup"==n?(this._isPressed=!1,e=this._isOver?this.overLabel:this.outLabel):"rollover"==n?(this._isOver=!0,e=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,e=this._isPressed?this.overLabel:this.outLabel),this.play?i.gotoAndPlay&&i.gotoAndPlay(e):i.gotoAndStop&&i.gotoAndStop(e)},e._reset=function(){var t=this.paused;this.__reset(),this.paused=t},_a.ButtonHelper=t}(),this._a=this._a||{},function(){"use strict";function t(t,e,i,n){this.color=t||"black",this.offsetX=e||0,this.offsetY=i||0,this.blur=n||0}var e=t.prototype;t.identity=new t("transparent",0,0,0),e.toString=function(){return"[Shadow]"},e.clone=function(){return new t(this.color,this.offsetX,this.offsetY,this.blur)},_a.Shadow=t}(),this._a=this._a||{},function(){"use strict";function t(t){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(t)}var e=_a.extend(t,_a.EventDispatcher);e.getAnimations=function(){return this._animations.slice()};try{Object.defineProperties(e,{animations:{get:e.getAnimations}})}catch(t){}e.getNumFrames=function(t){if(null==t)return this._frames?this._frames.length:this._numFrames||0;var e=this._data[t];return null==e?0:e.frames.length},e.getAnimation=function(t){return this._data[t]},e.getFrame=function(t){var e;return this._frames&&(e=this._frames[t])?e:null},e.getFrameBounds=function(t,e){var i=this.getFrame(t);return i?(e||new _a.Rectangle).setValues(-i.regX,-i.regY,i.rect.width,i.rect.height):null},e.toString=function(){return"[SpriteSheet]"},e.clone=function(){throw"SpriteSheet cannot be cloned."},e._parseData=function(t){var e,i,n,r;if(null!=t){if(this.framerate=t.framerate||0,t.images&&(i=t.images.length)>0)for(r=this._images=[],e=0;e<i;e++){var s=t.images[e];if("string"==typeof s){var o=s;s=document.createElement("img"),s.src=o}r.push(s),s.getContext||s.naturalWidth||(this._loadCount++,this.complete=!1,function(t,e){s.onload=function(){t._handleImageLoad(e)}}(this,o),function(t,e){s.onerror=function(){t._handleImageError(e)}}(this,o))}if(null==t.frames);else if(Array.isArray(t.frames))for(this._frames=[],r=t.frames,e=0,i=r.length;e<i;e++){var a=r[e];this._frames.push({image:this._images[a[4]?a[4]:0],rect:new _a.Rectangle(a[0],a[1],a[2],a[3]),regX:a[5]||0,regY:a[6]||0})}else n=t.frames,this._frameWidth=n.width,this._frameHeight=n.height,this._regX=n.regX||0,this._regY=n.regY||0,this._spacing=n.spacing||0,this._margin=n.margin||0,this._numFrames=n.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(n=t.animations)){this._data={};var l;for(l in n){var c={name:l},h=n[l];if("number"==typeof h)r=c.frames=[h];else if(Array.isArray(h))if(1==h.length)c.frames=[h[0]];else for(c.speed=h[3],c.next=h[2],r=c.frames=[],e=h[0];e<=h[1];e++)r.push(e);else{c.speed=h.speed,c.next=h.next;var u=h.frames;r=c.frames="number"==typeof u?[u]:u.slice(0)}c.next!==!0&&void 0!==c.next||(c.next=l),(c.next===!1||r.length<2&&c.next==l)&&(c.next=null),c.speed||(c.speed=1),this._animations.push(l),this._data[l]=c}}}},e._handleImageLoad=function(t){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},e._handleImageError=function(t){var e=new _a.Event("error");e.src=t,this.dispatchEvent(e),0==--this._loadCount&&this.dispatchEvent("complete")},e._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];var t=this._numFrames||1e5,e=0,i=this._frameWidth,n=this._frameHeight,r=this._spacing,s=this._margin;t:for(var o=0,a=this._images;o<a.length;o++)for(var l=a[o],c=l.width,h=l.height,u=s;u<=h-s-n;){for(var d=s;d<=c-s-i;){if(e>=t)break t;e++,this._frames.push({image:l,rect:new _a.Rectangle(d,u,i,n),regX:this._regX,regY:this._regY}),d+=i+r}u+=n+r}this._numFrames=e}},_a.SpriteSheet=_a.promote(t,"EventDispatcher")}(),this._a=this._a||{},function(){"use strict";function t(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var e=t.prototype,i=t;t.getRGB=function(t,e,i,n){return null!=t&&null==i&&(n=e,i=255&t,e=t>>8&255,t=t>>16&255),null==n?"rgb("+t+","+e+","+i+")":"rgba("+t+","+e+","+i+","+n+")"},t.getHSL=function(t,e,i,n){return null==n?"hsl("+t%360+","+e+"%,"+i+"%)":"hsla("+t%360+","+e+"%,"+i+"%,"+n+")"},t.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},t.STROKE_CAPS_MAP=["butt","round","square"],t.STROKE_JOINTS_MAP=["miter","round","bevel"];var n=_a.createCanvas?_a.createCanvas():document.createElement("canvas");n.getContext&&(t._ctx=n.getContext("2d"),n.width=n.height=1),e.getInstructions=function(){return this._updateInstructions(),this._instructions};try{Object.defineProperties(e,{instructions:{get:e.getInstructions}})}catch(t){}e.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},e.draw=function(t,e){this._updateInstructions();for(var i=this._instructions,n=this._storeIndex,r=i.length;n<r;n++)i[n].exec(t,e)},e.drawAsPath=function(t){this._updateInstructions();for(var e,i=this._instructions,n=this._storeIndex,r=i.length;n<r;n++)(e=i[n]).path!==!1&&e.exec(t)},e.moveTo=function(t,e){return this.append(new i.MoveTo(t,e),!0)},e.lineTo=function(t,e){return this.append(new i.LineTo(t,e))},e.arcTo=function(t,e,n,r,s){return this.append(new i.ArcTo(t,e,n,r,s))},e.arc=function(t,e,n,r,s,o){return this.append(new i.Arc(t,e,n,r,s,o))},e.quadraticCurveTo=function(t,e,n,r){return this.append(new i.QuadraticCurveTo(t,e,n,r))},e.bezierCurveTo=function(t,e,n,r,s,o){return this.append(new i.BezierCurveTo(t,e,n,r,s,o))},e.rect=function(t,e,n,r){return this.append(new i.Rect(t,e,n,r))},e.closePath=function(){return this._activeInstructions.length?this.append(new i.ClosePath):this},e.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},e.beginFill=function(t){return this._setFill(t?new i.Fill(t):null)},e.beginLinearGradientFill=function(t,e,n,r,s,o){return this._setFill((new i.Fill).linearGradient(t,e,n,r,s,o))},e.beginRadialGradientFill=function(t,e,n,r,s,o,a,l){return this._setFill((new i.Fill).radialGradient(t,e,n,r,s,o,a,l))},e.beginBitmapFill=function(t,e,n){return this._setFill(new i.Fill(null,n).bitmap(t,e))},e.endFill=function(){return this.beginFill()},e.setStrokeStyle=function(t,e,n,r,s){return this._updateInstructions(!0),this._strokeStyle=this.command=new i.StrokeStyle(t,e,n,r,s),this._stroke&&(this._stroke.ignoreScale=s),this._strokeIgnoreScale=s,this},e.setStrokeDash=function(t,e){return this._updateInstructions(!0),this._strokeDash=this.command=new i.StrokeDash(t,e),this},e.beginStroke=function(t){return this._setStroke(t?new i.Stroke(t):null)},e.beginLinearGradientStroke=function(t,e,n,r,s,o){return this._setStroke((new i.Stroke).linearGradient(t,e,n,r,s,o))},e.beginRadialGradientStroke=function(t,e,n,r,s,o,a,l){return this._setStroke((new i.Stroke).radialGradient(t,e,n,r,s,o,a,l))},e.beginBitmapStroke=function(t,e){return this._setStroke((new i.Stroke).bitmap(t,e))},e.endStroke=function(){return this.beginStroke()},e.curveTo=e.quadraticCurveTo,e.drawRect=e.rect,e.drawRoundRect=function(t,e,i,n,r){return this.drawRoundRectComplex(t,e,i,n,r,r,r,r)},e.drawRoundRectComplex=function(t,e,n,r,s,o,a,l){return this.append(new i.RoundRect(t,e,n,r,s,o,a,l))},e.drawCircle=function(t,e,n){return this.append(new i.Circle(t,e,n))},e.drawEllipse=function(t,e,n,r){return this.append(new i.Ellipse(t,e,n,r))},e.drawPolyStar=function(t,e,n,r,s,o){return this.append(new i.PolyStar(t,e,n,r,s,o))},e.append=function(t,e){return this._activeInstructions.push(t),this.command=t,e||(this._dirty=!0),this},e.decodePath=function(e){for(var i=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],n=[2,2,4,6,0],r=0,s=e.length,o=[],a=0,l=0,c=t.BASE_64;r<s;){var h=e.charAt(r),u=c[h],d=u>>3,p=i[d];if(!p||3&u)throw"bad path data (@"+r+"): "+h;var f=n[d];d||(a=l=0),o.length=0,r++;for(var v=(u>>2&1)+2,m=0;m<f;m++){var g=c[e.charAt(r)],y=g>>5?-1:1;g=(31&g)<<6|c[e.charAt(r+1)],3==v&&(g=g<<6|c[e.charAt(r+2)]),g=y*g/10,m%2?a=g+=a:l=g+=l,o[m]=g,r+=v}p.apply(this,o)}return this},e.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},e.unstore=function(){return this._storeIndex=0,this},e.clone=function(){var e=new t;return e.command=this.command,e._stroke=this._stroke,e._strokeStyle=this._strokeStyle,e._strokeDash=this._strokeDash,e._strokeIgnoreScale=this._strokeIgnoreScale,e._fill=this._fill,e._instructions=this._instructions.slice(),e._commitIndex=this._commitIndex,e._activeInstructions=this._activeInstructions.slice(),e._dirty=this._dirty,e._storeIndex=this._storeIndex,e},e.toString=function(){return"[Graphics]"},e.mt=e.moveTo,e.lt=e.lineTo,e.at=e.arcTo,e.bt=e.bezierCurveTo,e.qt=e.quadraticCurveTo,e.a=e.arc,e.r=e.rect,e.cp=e.closePath,e.c=e.clear,e.f=e.beginFill,e.lf=e.beginLinearGradientFill,e.rf=e.beginRadialGradientFill,e.bf=e.beginBitmapFill,e.ef=e.endFill,e.ss=e.setStrokeStyle,e.sd=e.setStrokeDash,e.s=e.beginStroke,e.ls=e.beginLinearGradientStroke,e.rs=e.beginRadialGradientStroke,e.bs=e.beginBitmapStroke,e.es=e.endStroke,e.dr=e.drawRect,e.rr=e.drawRoundRect,e.rc=e.drawRoundRectComplex,e.dc=e.drawCircle,e.de=e.drawEllipse,e.dp=e.drawPolyStar,e.p=e.decodePath,e._updateInstructions=function(e){var i=this._instructions,n=this._activeInstructions,r=this._commitIndex;if(this._dirty&&n.length){i.length=r,i.push(t.beginCmd);var s=n.length,o=i.length;i.length=o+s;for(var a=0;a<s;a++)i[a+o]=n[a];this._fill&&i.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&(this._oldStrokeDash=this._strokeDash,i.push(this._strokeDash)),this._strokeStyle!==this._oldStrokeStyle&&(this._oldStrokeStyle=this._strokeStyle,i.push(this._strokeStyle)),i.push(this._stroke)),this._dirty=!1}e&&(n.length=0,this._commitIndex=i.length)},e._setFill=function(t){return this._updateInstructions(!0),this.command=this._fill=t,this},e._setStroke=function(t){return this._updateInstructions(!0),(this.command=this._stroke=t)&&(t.ignoreScale=this._strokeIgnoreScale),this},(i.LineTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.lineTo(this.x,this.y)},(i.MoveTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.moveTo(this.x,this.y)},(i.ArcTo=function(t,e,i,n,r){this.x1=t,this.y1=e,this.x2=i,this.y2=n,this.radius=r}).prototype.exec=function(t){t.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(i.Arc=function(t,e,i,n,r,s){this.x=t,this.y=e,this.radius=i,this.startAngle=n,this.endAngle=r,this.anticlockwise=!!s}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(i.QuadraticCurveTo=function(t,e,i,n){this.cpx=t,this.cpy=e,this.x=i,this.y=n}).prototype.exec=function(t){t.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(i.BezierCurveTo=function(t,e,i,n,r,s){this.cp1x=t,this.cp1y=e,this.cp2x=i,this.cp2y=n,this.x=r,this.y=s}).prototype.exec=function(t){t.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(i.Rect=function(t,e,i,n){this.x=t,this.y=e,this.w=i,this.h=n}).prototype.exec=function(t){t.rect(this.x,this.y,this.w,this.h)},(i.ClosePath=function(){}).prototype.exec=function(t){t.closePath()},(i.BeginPath=function(){}).prototype.exec=function(t){t.beginPath()},e=(i.Fill=function(t,e){this.style=t,this.matrix=e}).prototype,e.exec=function(t){if(this.style){t.fillStyle=this.style;var e=this.matrix;e&&(t.save(),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),t.fill(),e&&t.restore()}},e.linearGradient=function(e,i,n,r,s,o){for(var a=this.style=t._ctx.createLinearGradient(n,r,s,o),l=0,c=e.length;l<c;l++)a.addColorStop(i[l],e[l]);return a.props={colors:e,ratios:i,x0:n,y0:r,x1:s,y1:o,type:"linear"},this},e.radialGradient=function(e,i,n,r,s,o,a,l){for(var c=this.style=t._ctx.createRadialGradient(n,r,s,o,a,l),h=0,u=e.length;h<u;h++)c.addColorStop(i[h],e[h]);return c.props={colors:e,ratios:i,x0:n,y0:r,r0:s,x1:o,y1:a,r1:l,type:"radial"},this},e.bitmap=function(e,i){if(e.naturalWidth||e.getContext||e.readyState>=2){var n=this.style=t._ctx.createPattern(e,i||"");n.props={image:e,repetition:i,type:"bitmap"}}return this},e.path=!1,e=(i.Stroke=function(t,e){this.style=t,this.ignoreScale=e}).prototype,e.exec=function(t){this.style&&(t.strokeStyle=this.style,this.ignoreScale&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.stroke(),this.ignoreScale&&t.restore())},e.linearGradient=i.Fill.prototype.linearGradient,e.radialGradient=i.Fill.prototype.radialGradient,e.bitmap=i.Fill.prototype.bitmap,e.path=!1,e=(i.StrokeStyle=function(t,e,i,n,r){this.width=t,this.caps=e,this.joints=i,this.miterLimit=n,this.ignoreScale=r}).prototype,e.exec=function(e){e.lineWidth=null==this.width?"1":this.width,e.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:t.STROKE_CAPS_MAP[this.caps],e.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:t.STROKE_JOINTS_MAP[this.joints],e.miterLimit=null==this.miterLimit?"10":this.miterLimit,e.ignoreScale=null!=this.ignoreScale&&this.ignoreScale},e.path=!1,(i.StrokeDash=function(t,e){this.segments=t,this.offset=e||0}).prototype.exec=function(t){t.setLineDash&&(t.setLineDash(this.segments||i.StrokeDash.EMPTY_SEGMENTS),t.lineDashOffset=this.offset||0)},i.StrokeDash.EMPTY_SEGMENTS=[],(i.RoundRect=function(t,e,i,n,r,s,o,a){this.x=t,this.y=e,this.w=i,this.h=n,this.radiusTL=r,this.radiusTR=s,this.radiusBR=o,this.radiusBL=a}).prototype.exec=function(t){var e=(l<c?l:c)/2,i=0,n=0,r=0,s=0,o=this.x,a=this.y,l=this.w,c=this.h,h=this.radiusTL,u=this.radiusTR,d=this.radiusBR,p=this.radiusBL;h<0&&(h*=i=-1),h>e&&(h=e),u<0&&(u*=n=-1),u>e&&(u=e),d<0&&(d*=r=-1),d>e&&(d=e),p<0&&(p*=s=-1),p>e&&(p=e),t.moveTo(o+l-u,a),t.arcTo(o+l+u*n,a-u*n,o+l,a+u,u),t.lineTo(o+l,a+c-d),t.arcTo(o+l+d*r,a+c+d*r,o+l-d,a+c,d),t.lineTo(o+p,a+c),t.arcTo(o-p*s,a+c+p*s,o,a+c-p,p),t.lineTo(o,a+h),t.arcTo(o-h*i,a-h*i,o+h,a,h),t.closePath()},(i.Circle=function(t,e,i){this.x=t,this.y=e,this.radius=i}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,0,2*Math.PI)},(i.Ellipse=function(t,e,i,n){this.x=t,this.y=e,this.w=i,this.h=n}).prototype.exec=function(t){var e=this.x,i=this.y,n=this.w,r=this.h,s=.5522848,o=n/2*s,a=r/2*s,l=e+n,c=i+r,h=e+n/2,u=i+r/2;t.moveTo(e,u),t.bezierCurveTo(e,u-a,h-o,i,h,i),t.bezierCurveTo(h+o,i,l,u-a,l,u),t.bezierCurveTo(l,u+a,h+o,c,h,c),t.bezierCurveTo(h-o,c,e,u+a,e,u)},(i.PolyStar=function(t,e,i,n,r,s){this.x=t,this.y=e,this.radius=i,this.sides=n,this.pointSize=r,this.angle=s}).prototype.exec=function(t){var e=this.x,i=this.y,n=this.radius,r=(this.angle||0)/180*Math.PI,s=this.sides,o=1-(this.pointSize||0),a=Math.PI/s;t.moveTo(e+Math.cos(r)*n,i+Math.sin(r)*n);for(var l=0;l<s;l++)r+=a,1!=o&&t.lineTo(e+Math.cos(r)*n*o,i+Math.sin(r)*n*o),r+=a,t.lineTo(e+Math.cos(r)*n,i+Math.sin(r)*n);t.closePath()},t.beginCmd=new i.BeginPath,_a.Graphics=t}(),this._a=this._a||{},function(){"use strict";function t(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.cacheID=0,this.id=_a.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,
this.hitArea=null,this.cursor=null,this._cacheOffsetX=0,this._cacheOffsetY=0,this._filterOffsetX=0,this._filterOffsetY=0,this._cacheScale=1,this._cacheDataURLID=0,this._cacheDataURL=null,this._props=new _a.DisplayProps,this._rectangle=new _a.Rectangle,this._bounds=null}var e=_a.extend(t,_a.EventDispatcher);t._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],t.suppressCrossDomainErrors=!1,t._snapToPixelEnabled=!1;var i=_a.createCanvas?_a.createCanvas():document.createElement("canvas");i.getContext&&(t._hitTestCanvas=i,t._hitTestContext=i.getContext("2d"),i.width=i.height=1),t._nextCacheID=1,e.getStage=function(){for(var t=this,e=_a.Stage;t.parent;)t=t.parent;return t instanceof e?t:null};try{Object.defineProperties(e,{stage:{get:e.getStage}})}catch(t){}e.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},e.draw=function(t,e){var i=this.cacheCanvas;if(e||!i)return!1;var n=this._cacheScale;return t.drawImage(i,this._cacheOffsetX+this._filterOffsetX,this._cacheOffsetY+this._filterOffsetY,i.width/n,i.height/n),!0},e.updateContext=function(e){var i=this,n=i.mask,r=i._props.matrix;n&&n.graphics&&!n.graphics.isEmpty()&&(n.getMatrix(r),e.transform(r.a,r.b,r.c,r.d,r.tx,r.ty),n.graphics.drawAsPath(e),e.clip(),r.invert(),e.transform(r.a,r.b,r.c,r.d,r.tx,r.ty)),this.getMatrix(r);var s=r.tx,o=r.ty;t._snapToPixelEnabled&&i.snapToPixel&&(s=s+(s<0?-.5:.5)|0,o=o+(o<0?-.5:.5)|0),e.transform(r.a,r.b,r.c,r.d,s,o),e.globalAlpha*=i.alpha,i.compositeOperation&&(e.globalCompositeOperation=i.compositeOperation),i.shadow&&this._applyShadow(e,i.shadow)},e.cache=function(t,e,i,n,r){r=r||1,this.cacheCanvas||(this.cacheCanvas=_a.createCanvas?_a.createCanvas():document.createElement("canvas")),this._cacheWidth=i,this._cacheHeight=n,this._cacheOffsetX=t,this._cacheOffsetY=e,this._cacheScale=r,this.updateCache()},e.updateCache=function(e){var i=this.cacheCanvas;if(!i)throw"cache() must be called before updateCache()";var n=this._cacheScale,r=this._cacheOffsetX*n,s=this._cacheOffsetY*n,o=this._cacheWidth,a=this._cacheHeight,l=i.getContext("2d"),c=this._getFilterBounds();r+=this._filterOffsetX=c.x,s+=this._filterOffsetY=c.y,o=Math.ceil(o*n)+c.width,a=Math.ceil(a*n)+c.height,o!=i.width||a!=i.height?(i.width=o,i.height=a):e||l.clearRect(0,0,o+1,a+1),l.save(),l.globalCompositeOperation=e,l.setTransform(n,0,0,n,-r,-s),this.draw(l,!0),this._applyFilters(),l.restore(),this.cacheID=t._nextCacheID++},e.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=this._filterOffsetX=this._filterOffsetY=0,this._cacheScale=1},e.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},e.localToGlobal=function(t,e,i){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(t,e,i||new _a.Point)},e.globalToLocal=function(t,e,i){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(t,e,i||new _a.Point)},e.localToLocal=function(t,e,i,n){return n=this.localToGlobal(t,e,n),i.globalToLocal(n.x,n.y,n)},e.setTransform=function(t,e,i,n,r,s,o,a,l){return this.x=t||0,this.y=e||0,this.scaleX=null==i?1:i,this.scaleY=null==n?1:n,this.rotation=r||0,this.skewX=s||0,this.skewY=o||0,this.regX=a||0,this.regY=l||0,this},e.getMatrix=function(t){var e=this,i=t&&t.identity()||new _a.Matrix2D;return e.transformMatrix?i.copy(e.transformMatrix):i.appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY)},e.getConcatenatedMatrix=function(t){for(var e=this,i=this.getMatrix(t);e=e.parent;)i.prependMatrix(e.getMatrix(e._props.matrix));return i},e.getConcatenatedDisplayProps=function(t){t=t?t.identity():new _a.DisplayProps;var e=this,i=e.getMatrix(t.matrix);do t.prepend(e.visible,e.alpha,e.shadow,e.compositeOperation),e!=this&&i.prependMatrix(e.getMatrix(e._props.matrix));while(e=e.parent);return t},e.hitTest=function(e,i){var n=t._hitTestContext;n.setTransform(1,0,0,1,-e,-i),this.draw(n);var r=this._testHit(n);return n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,2,2),r},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var t=this.cacheCanvas;if(t){var e=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,t.width/e,t.height/e)}return null},e.getTransformedBounds=function(){return this._getBounds()},e.setBounds=function(t,e,i,n){null==t&&(this._bounds=t),this._bounds=(this._bounds||new _a.Rectangle).setValues(t,e,i,n)},e.clone=function(){return this._cloneProps(new t)},e.toString=function(){return"[DisplayObject (name="+this.name+")]"},e._cloneProps=function(t){return t.alpha=this.alpha,t.mouseEnabled=this.mouseEnabled,t.tickEnabled=this.tickEnabled,t.name=this.name,t.regX=this.regX,t.regY=this.regY,t.rotation=this.rotation,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.shadow=this.shadow,t.skewX=this.skewX,t.skewY=this.skewY,t.visible=this.visible,t.x=this.x,t.y=this.y,t.compositeOperation=this.compositeOperation,t.snapToPixel=this.snapToPixel,t.filters=null==this.filters?null:this.filters.slice(0),t.mask=this.mask,t.hitArea=this.hitArea,t.cursor=this.cursor,t._bounds=this._bounds,t},e._applyShadow=function(t,e){e=e||Shadow.identity,t.shadowColor=e.color,t.shadowOffsetX=e.offsetX,t.shadowOffsetY=e.offsetY,t.shadowBlur=e.blur},e._tick=function(t){var e=this._listeners;e&&e.tick&&(t.target=null,t.propagationStopped=t.immediatePropagationStopped=!1,this.dispatchEvent(t))},e._testHit=function(e){try{var i=e.getImageData(0,0,1,1).data[3]>1}catch(e){if(!t.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return i},e._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var t=this.filters.length,e=this.cacheCanvas.getContext("2d"),i=this.cacheCanvas.width,n=this.cacheCanvas.height,r=0;r<t;r++)this.filters[r].applyFilter(e,0,0,i,n)},e._getFilterBounds=function(t){var e,i=this.filters,n=this._rectangle.setValues(0,0,0,0);if(!i||!(e=i.length))return n;for(var r=0;r<e;r++){var s=this.filters[r];s.getBounds&&s.getBounds(n)}return n},e._getBounds=function(t,e){return this._transformBounds(this.getBounds(),t,e)},e._transformBounds=function(t,e,i){if(!t)return t;var n=t.x,r=t.y,s=t.width,o=t.height,a=this._props.matrix;a=i?a.identity():this.getMatrix(a),(n||r)&&a.appendTransform(0,0,1,1,0,0,0,-n,-r),e&&a.prependMatrix(e);var l=s*a.a,c=s*a.b,h=o*a.c,u=o*a.d,d=a.tx,p=a.ty,f=d,v=d,m=p,g=p;return(n=l+d)<f?f=n:n>v&&(v=n),(n=l+h+d)<f?f=n:n>v&&(v=n),(n=h+d)<f?f=n:n>v&&(v=n),(r=c+p)<m?m=r:r>g&&(g=r),(r=c+u+p)<m?m=r:r>g&&(g=r),(r=u+p)<m?m=r:r>g&&(g=r),t.setValues(f,m,v-f,g-m)},e._hasMouseEventListener=function(){for(var e=t._MOUSE_EVENTS,i=0,n=e.length;i<n;i++)if(this.hasEventListener(e[i]))return!0;return!!this.cursor},_a.DisplayObject=_a.promote(t,"EventDispatcher")}(),this._a=this._a||{},function(){"use strict";function t(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var e=_a.extend(t,_a.DisplayObject);e.getNumChildren=function(){return this.children.length};try{Object.defineProperties(e,{numChildren:{get:e.getNumChildren}})}catch(t){}e.initialize=t,e.isVisible=function(){var t=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;for(var i=this.children.slice(),n=0,r=i.length;n<r;n++){var s=i[n];s.isVisible()&&(t.save(),s.updateContext(t),s.draw(t),t.restore())}return!0},e.addChild=function(t){if(null==t)return t;var e=arguments.length;if(e>1){for(var i=0;i<e;i++)this.addChild(arguments[i]);return arguments[e-1]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),t.dispatchEvent("added"),t},e.addChildAt=function(t,e){var i=arguments.length,n=arguments[i-1];if(n<0||n>this.children.length)return arguments[i-2];if(i>2){for(var r=0;r<i-1;r++)this.addChildAt(arguments[r],n+r);return arguments[i-2]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),t.dispatchEvent("added"),t},e.removeChild=function(t){var e=arguments.length;if(e>1){for(var i=!0,n=0;n<e;n++)i=i&&this.removeChild(arguments[n]);return i}return this.removeChildAt(_a.indexOf(this.children,t))},e.removeChildAt=function(t){var e=arguments.length;if(e>1){for(var i=[],n=0;n<e;n++)i[n]=arguments[n];i.sort(function(t,e){return e-t});for(var r=!0,n=0;n<e;n++)r=r&&this.removeChildAt(i[n]);return r}if(t<0||t>this.children.length-1)return!1;var s=this.children[t];return s&&(s.parent=null),this.children.splice(t,1),s.dispatchEvent("removed"),!0},e.removeAllChildren=function(){for(var t=this.children;t.length;)this.removeChildAt(0)},e.getChildAt=function(t){return this.children[t]},e.getChildByName=function(t){for(var e=this.children,i=0,n=e.length;i<n;i++)if(e[i].name==t)return e[i];return null},e.sortChildren=function(t){this.children.sort(t)},e.getChildIndex=function(t){return _a.indexOf(this.children,t)},e.swapChildrenAt=function(t,e){var i=this.children,n=i[t],r=i[e];n&&r&&(i[t]=r,i[e]=n)},e.swapChildren=function(t,e){for(var i,n,r=this.children,s=0,o=r.length;s<o&&(r[s]==t&&(i=s),r[s]==e&&(n=s),null==i||null==n);s++);s!=o&&(r[i]=e,r[n]=t)},e.setChildIndex=function(t,e){var i=this.children,n=i.length;if(!(t.parent!=this||e<0||e>=n)){for(var r=0;r<n&&i[r]!=t;r++);r!=n&&r!=e&&(i.splice(r,1),i.splice(e,0,t))}},e.contains=function(t){for(;t;){if(t==this)return!0;t=t.parent}return!1},e.hitTest=function(t,e){return null!=this.getObjectUnderPoint(t,e)},e.getObjectsUnderPoint=function(t,e,i){var n=[],r=this.localToGlobal(t,e);return this._getObjectsUnderPoint(r.x,r.y,n,i>0,1==i),n},e.getObjectUnderPoint=function(t,e,i){var n=this.localToGlobal(t,e);return this._getObjectsUnderPoint(n.x,n.y,null,i>0,1==i)},e.getBounds=function(){return this._getBounds(null,!0)},e.getTransformedBounds=function(){return this._getBounds()},e.clone=function(e){var i=this._cloneProps(new t);return e&&this._cloneChildren(i),i},e.toString=function(){return"[Container (name="+this.name+")]"},e._tick=function(t){if(this.tickChildren)for(var e=this.children.length-1;e>=0;e--){var i=this.children[e];i.tickEnabled&&i._tick&&i._tick(t)}this.DisplayObject__tick(t)},e._cloneChildren=function(t){t.children.length&&t.removeAllChildren();for(var e=t.children,i=0,n=this.children.length;i<n;i++){var r=this.children[i].clone(!0);r.parent=t,e.push(r)}},e._getObjectsUnderPoint=function(e,i,n,r,s,o){if(o=o||0,!o&&!this._testMask(this,e,i))return null;var a,l=_a.DisplayObject._hitTestContext;s=s||r&&this._hasMouseEventListener();for(var c=this.children,h=c.length,u=h-1;u>=0;u--){var d=c[u],p=d.hitArea;if(d.visible&&(p||d.isVisible())&&(!r||d.mouseEnabled)&&(p||this._testMask(d,e,i)))if(!p&&d instanceof t){var f=d._getObjectsUnderPoint(e,i,n,r,s,o+1);if(!n&&f)return r&&!this.mouseChildren?this:f}else{if(r&&!s&&!d._hasMouseEventListener())continue;var v=d.getConcatenatedDisplayProps(d._props);if(a=v.matrix,p&&(a.appendMatrix(p.getMatrix(p._props.matrix)),v.alpha=p.alpha),l.globalAlpha=v.alpha,l.setTransform(a.a,a.b,a.c,a.d,a.tx-e,a.ty-i),(p||d).draw(l),!this._testHit(l))continue;if(l.setTransform(1,0,0,1,0,0),l.clearRect(0,0,2,2),!n)return r&&!this.mouseChildren?this:d;n.push(d)}}return null},e._testMask=function(t,e,i){var n=t.mask;if(!n||!n.graphics||n.graphics.isEmpty())return!0;var r=this._props.matrix,s=t.parent;r=s?s.getConcatenatedMatrix(r):r.identity(),r=n.getMatrix(n._props.matrix).prependMatrix(r);var o=_a.DisplayObject._hitTestContext;return o.setTransform(r.a,r.b,r.c,r.d,r.tx-e,r.ty-i),n.graphics.drawAsPath(o),o.fillStyle="#000",o.fill(),!!this._testHit(o)&&(o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,2,2),!0)},e._getBounds=function(t,e){var i=this.DisplayObject_getBounds();if(i)return this._transformBounds(i,t,e);var n=this._props.matrix;n=e?n.identity():this.getMatrix(n),t&&n.prependMatrix(t);for(var r=this.children.length,s=null,o=0;o<r;o++){var a=this.children[o];a.visible&&(i=a._getBounds(n))&&(s?s.extend(i.x,i.y,i.width,i.height):s=i.clone())}return s},_a.Container=_a.promote(t,"DisplayObject")}(),this._a=this._a||{},function(){"use strict";function t(t){this.Container_constructor(),this.autoClear=!0,this.canvas="string"==typeof t?document.getElementById(t):t,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var e=_a.extend(t,_a.Container);e._get_nextStage=function(){return this._nextStage},e._set_nextStage=function(t){this._nextStage&&(this._nextStage._prevStage=null),t&&(t._prevStage=this),this._nextStage=t};try{Object.defineProperties(e,{nextStage:{get:e._get_nextStage,set:e._set_nextStage}})}catch(t){}e.update=function(t){if(this.canvas&&(this.tickOnUpdate&&this.tick(t),this.dispatchEvent("drawstart",!1,!0)!==!1)){_a.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var e=this.drawRect,i=this.canvas.getContext("2d");i.setTransform(1,0,0,1,0,0),this.autoClear&&(e?i.clearRect(e.x,e.y,e.width,e.height):i.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),i.save(),this.drawRect&&(i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.clip()),this.updateContext(i),this.draw(i,!1),i.restore(),this.dispatchEvent("drawend")}},e.tick=function(t){if(this.tickEnabled&&this.dispatchEvent("tickstart",!1,!0)!==!1){var e=new _a.Event("tick");if(t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);this._tick(e),this.dispatchEvent("tickend")}},e.handleEvent=function(t){"tick"==t.type&&this.update(t)},e.clear=function(){if(this.canvas){var t=this.canvas.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},e.toDataURL=function(t,e){var i,n=this.canvas.getContext("2d"),r=this.canvas.width,s=this.canvas.height;if(t){i=n.getImageData(0,0,r,s);var o=n.globalCompositeOperation;n.globalCompositeOperation="destination-over",n.fillStyle=t,n.fillRect(0,0,r,s)}var a=this.canvas.toDataURL(e||"image/png");return t&&(n.putImageData(i,0,0),n.globalCompositeOperation=o),a},e.enableMouseOver=function(t){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==t&&this._testMouseOver(!0)),null==t)t=20;else if(t<=0)return;var e=this;this._mouseOverIntervalID=setInterval(function(){e._testMouseOver()},1e3/Math.min(50,t))},e.enableDOMEvents=function(t){null==t&&(t=!0);var e,i,n=this._eventListeners;if(!t&&n){for(e in n)i=n[e],i.t.removeEventListener(e,i.f,!1);this._eventListeners=null}else if(t&&!n&&this.canvas){var r=window.addEventListener?window:document,s=this;n=this._eventListeners={},n.mouseup={t:r,f:function(t){s._handleMouseUp(t)}},n.mousemove={t:r,f:function(t){s._handleMouseMove(t)}},n.dblclick={t:this.canvas,f:function(t){s._handleDoubleClick(t)}},n.mousedown={t:this.canvas,f:function(t){s._handleMouseDown(t)}};for(e in n)i=n[e],i.t.addEventListener(e,i.f,!1)}},e.clone=function(){throw"Stage cannot be cloned."},e.toString=function(){return"[Stage (name="+this.name+")]"},e._getElementRect=function(t){var e;try{e=t.getBoundingClientRect()}catch(i){e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var i=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),n=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),r=window.getComputedStyle?getComputedStyle(t,null):t.currentStyle,s=parseInt(r.paddingLeft)+parseInt(r.borderLeftWidth),o=parseInt(r.paddingTop)+parseInt(r.borderTopWidth),a=parseInt(r.paddingRight)+parseInt(r.borderRightWidth),l=parseInt(r.paddingBottom)+parseInt(r.borderBottomWidth);return{left:e.left+i+s,right:e.right+i-a,top:e.top+n+o,bottom:e.bottom+n-l}},e._getPointerData=function(t){var e=this._pointerData[t];return e||(e=this._pointerData[t]={x:0,y:0}),e},e._handleMouseMove=function(t){t||(t=window.event),this._handlePointerMove(-1,t,t.pageX,t.pageY)},e._handlePointerMove=function(t,e,i,n,r){if((!this._prevStage||void 0!==r)&&this.canvas){var s=this._nextStage,o=this._getPointerData(t),a=o.inBounds;this._updatePointerPosition(t,e,i,n),(a||o.inBounds||this.mouseMoveOutside)&&(t===-1&&o.inBounds==!a&&this._dispatchMouseEvent(this,a?"mouseleave":"mouseenter",!1,t,o,e),this._dispatchMouseEvent(this,"stagemousemove",!1,t,o,e),this._dispatchMouseEvent(o.target,"pressmove",!0,t,o,e)),s&&s._handlePointerMove(t,e,i,n,null)}},e._updatePointerPosition=function(t,e,i,n){var r=this._getElementRect(this.canvas);i-=r.left,n-=r.top;var s=this.canvas.width,o=this.canvas.height;i/=(r.right-r.left)/s,n/=(r.bottom-r.top)/o;var a=this._getPointerData(t);(a.inBounds=i>=0&&n>=0&&i<=s-1&&n<=o-1)?(a.x=i,a.y=n):this.mouseMoveOutside&&(a.x=i<0?0:i>s-1?s-1:i,a.y=n<0?0:n>o-1?o-1:n),a.posEvtObj=e,a.rawX=i,a.rawY=n,t!==this._primaryPointerID&&t!==-1||(this.mouseX=a.x,this.mouseY=a.y,this.mouseInBounds=a.inBounds)},e._handleMouseUp=function(t){this._handlePointerUp(-1,t,!1)},e._handlePointerUp=function(t,e,i,n){var r=this._nextStage,s=this._getPointerData(t);if(!this._prevStage||void 0!==n){var o=null,a=s.target;n||!a&&!r||(o=this._getObjectsUnderPoint(s.x,s.y,null,!0)),s.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,t,s,e,o),s.down=!1),o==a&&this._dispatchMouseEvent(a,"click",!0,t,s,e),this._dispatchMouseEvent(a,"pressup",!0,t,s,e),i?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):s.target=null,r&&r._handlePointerUp(t,e,i,n||o&&this)}},e._handleMouseDown=function(t){this._handlePointerDown(-1,t,t.pageX,t.pageY)},e._handlePointerDown=function(t,e,i,n,r){this.preventSelection&&e.preventDefault(),null!=this._primaryPointerID&&t!==-1||(this._primaryPointerID=t),null!=n&&this._updatePointerPosition(t,e,i,n);var s=null,o=this._nextStage,a=this._getPointerData(t);r||(s=a.target=this._getObjectsUnderPoint(a.x,a.y,null,!0)),a.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,t,a,e,s),a.down=!0),this._dispatchMouseEvent(s,"mousedown",!0,t,a,e),o&&o._handlePointerDown(t,e,i,n,r||s&&this)},e._testMouseOver=function(t,e,i){if(!this._prevStage||void 0!==e){var n=this._nextStage;if(!this._mouseOverIntervalID)return void(n&&n._testMouseOver(t,e,i));var r=this._getPointerData(-1);if(r&&(t||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var s,o,a,l=r.posEvtObj,c=i||l&&l.target==this.canvas,h=null,u=-1,d="";!e&&(t||this.mouseInBounds&&c)&&(h=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var p=this._mouseOverTarget||[],f=p[p.length-1],v=this._mouseOverTarget=[];for(s=h;s;)v.unshift(s),d||(d=s.cursor),s=s.parent;for(this.canvas.style.cursor=d,!e&&i&&(i.canvas.style.cursor=d),o=0,a=v.length;o<a&&v[o]==p[o];o++)u=o;for(f!=h&&this._dispatchMouseEvent(f,"mouseout",!0,-1,r,l,h),o=p.length-1;o>u;o--)this._dispatchMouseEvent(p[o],"rollout",!1,-1,r,l,h);for(o=v.length-1;o>u;o--)this._dispatchMouseEvent(v[o],"rollover",!1,-1,r,l,f);f!=h&&this._dispatchMouseEvent(h,"mouseover",!0,-1,r,l,f),n&&n._testMouseOver(t,e||h&&this,i||c&&this)}}},e._handleDoubleClick=function(t,e){var i=null,n=this._nextStage,r=this._getPointerData(-1);e||(i=this._getObjectsUnderPoint(r.x,r.y,null,!0),this._dispatchMouseEvent(i,"dblclick",!0,-1,r,t)),n&&n._handleDoubleClick(t,e||i&&this)},e._dispatchMouseEvent=function(t,e,i,n,r,s,o){if(t&&(i||t.hasEventListener(e))){var a=new _a.MouseEvent(e,i,!1,r.x,r.y,s,n,n===this._primaryPointerID||n===-1,r.rawX,r.rawY,o);t.dispatchEvent(a)}},_a.Stage=_a.promote(t,"Container")}(),this._a=this._a||{},function(){function t(t){this.DisplayObject_constructor(),"string"==typeof t?(this.image=document.createElement("img"),this.image.src=t):this.image=t,this.sourceRect=null}var e=_a.extend(t,_a.DisplayObject);e.initialize=t,e.isVisible=function(){var t=this.image,e=this.cacheCanvas||t&&(t.naturalWidth||t.getContext||t.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e)||!this.image)return!0;var i=this.image,n=this.sourceRect;if(n){var r=n.x,s=n.y,o=r+n.width,a=s+n.height,l=0,c=0,h=i.width,u=i.height;r<0&&(l-=r,r=0),o>h&&(o=h),s<0&&(c-=s,s=0),a>u&&(a=u),t.drawImage(i,r,s,o-r,a-s,l,c,o-r,a-s)}else t.drawImage(i,0,0);return!0},e.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;var e=this.image,i=this.sourceRect||e,n=e&&(e.naturalWidth||e.getContext||e.readyState>=2);return n?this._rectangle.setValues(0,0,i.width,i.height):null},e.clone=function(){var e=new t(this.image);return this.sourceRect&&(e.sourceRect=this.sourceRect.clone()),this._cloneProps(e),e},e.toString=function(){return"[Bitmap (name="+this.name+")]"},_a.Bitmap=_a.promote(t,"DisplayObject")}(),this._a=this._a||{},function(){"use strict";function t(t,e){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=t,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,null!=e&&this.gotoAndPlay(e)}var e=_a.extend(t,_a.DisplayObject);e.initialize=t,e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;this._normalizeFrame();var i=this.spriteSheet.getFrame(0|this._currentFrame);if(!i)return!1;var n=i.rect;return n.width&&n.height&&t.drawImage(i.image,n.x,n.y,n.width,n.height,-i.regX,-i.regY,n.width,n.height),!0},e.play=function(){this.paused=!1},e.stop=function(){this.paused=!0},e.gotoAndPlay=function(t){this.paused=!1,this._skipAdvance=!0,this._goto(t)},e.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.advance=function(t){var e=this.framerate||this.spriteSheet.framerate,i=e&&null!=t?t/(1e3/e):1;this._normalizeFrame(i)},e.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},e.clone=function(){return this._cloneProps(new t(this.spriteSheet))},e.toString=function(){return"[Sprite (name="+this.name+")]"},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.currentFrame=this.currentFrame,t.currentAnimation=this.currentAnimation,t.paused=this.paused,t.currentAnimationFrame=this.currentAnimationFrame,t.framerate=this.framerate,t._animation=this._animation,t._currentFrame=this._currentFrame,t._skipAdvance=this._skipAdvance,t},e._tick=function(t){this.paused||(this._skipAdvance||this.advance(t&&t.delta),this._skipAdvance=!1),this.DisplayObject__tick(t)},e._normalizeFrame=function(t){t=t||0;var e,i=this._animation,n=this.paused,r=this._currentFrame;if(i){var s=i.speed||1,o=this.currentAnimationFrame;if(e=i.frames.length,o+t*s>=e){var a=i.next;if(this._dispatchAnimationEnd(i,r,n,a,e-1))return;if(a)return this._goto(a,t-(e-o)/s);this.paused=!0,o=i.frames.length-1}else o+=t*s;this.currentAnimationFrame=o,this._currentFrame=i.frames[0|o]}else if(r=this._currentFrame+=t,e=this.spriteSheet.getNumFrames(),r>=e&&e>0&&!this._dispatchAnimationEnd(i,r,n,e-1)&&(this._currentFrame-=e)>=e)return this._normalizeFrame();r=0|this._currentFrame,this.currentFrame!=r&&(this.currentFrame=r,this.dispatchEvent("change"))},e._dispatchAnimationEnd=function(t,e,i,n,r){var s=t?t.name:null;if(this.hasEventListener("animationend")){var o=new _a.Event("animationend");o.name=s,o.next=n,this.dispatchEvent(o)}var a=this._animation!=t||this._currentFrame!=e;return a||i||!this.paused||(this.currentAnimationFrame=r,a=!0),a},e._goto=function(t,e){if(this.currentAnimationFrame=0,isNaN(t)){var i=this.spriteSheet.getAnimation(t);i&&(this._animation=i,this.currentAnimation=t,this._normalizeFrame(e))}else this.currentAnimation=this._animation=null,this._currentFrame=t,this._normalizeFrame()},_a.Sprite=_a.promote(t,"DisplayObject")}(),this._a=this._a||{},function(){"use strict";function t(t){this.DisplayObject_constructor(),this.graphics=t?t:new _a.Graphics}var e=_a.extend(t,_a.DisplayObject);e.isVisible=function(){var t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){return!!this.DisplayObject_draw(t,e)||(this.graphics.draw(t,this),!0)},e.clone=function(e){var i=e&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new t(i))},e.toString=function(){return"[Shape (name="+this.name+")]"},_a.Shape=_a.promote(t,"DisplayObject")}(),this._a=this._a||{},function(){"use strict";function t(t,e,i){this.DisplayObject_constructor(),this.text=t,this.font=e,this.color=i,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var e=_a.extend(t,_a.DisplayObject),i=_a.createCanvas?_a.createCanvas():document.createElement("canvas");i.getContext&&(t._workingContext=i.getContext("2d"),i.width=i.height=1),t.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},t.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},e.isVisible=function(){var t=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;var i=this.color||"#000";return this.outline?(t.strokeStyle=i,t.lineWidth=1*this.outline):t.fillStyle=i,this._drawText(this._prepContext(t)),!0},e.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},e.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},e.getMeasuredHeight=function(){return this._drawText(null,{}).height},e.getBounds=function(){var e=this.DisplayObject_getBounds();if(e)return e;if(null==this.text||""===this.text)return null;var i=this._drawText(null,{}),n=this.maxWidth&&this.maxWidth<i.width?this.maxWidth:i.width,r=n*t.H_OFFSETS[this.textAlign||"left"],s=this.lineHeight||this.getMeasuredLineHeight(),o=s*t.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(r,o,n,i.height)},e.getMetrics=function(){var e={lines:[]};return e.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),e.vOffset=e.lineHeight*t.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,e,e.lines)},e.clone=function(){return this._cloneProps(new t(this.text,this.font,this.color))},e.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.maxWidth=this.maxWidth,t.outline=this.outline,t.lineHeight=this.lineHeight,t.lineWidth=this.lineWidth,t},e._prepContext=function(t){return t.font=this.font||"10px sans-serif",t.textAlign=this.textAlign||"left",t.textBaseline=this.textBaseline||"top",t},e._drawText=function(e,i,n){var r=!!e;r||(e=t._workingContext,e.save(),this._prepContext(e));for(var s=this.lineHeight||this.getMeasuredLineHeight(),o=0,a=0,l=String(this.text).split(/(?:\r\n|\r|\n)/),c=0,h=l.length;c<h;c++){var u=l[c],d=null;if(null!=this.lineWidth&&(d=e.measureText(u).width)>this.lineWidth){var p=u.split(/(\s)/);u=p[0],d=e.measureText(u).width;for(var f=1,v=p.length;f<v;f+=2){var m=e.measureText(p[f]+p[f+1]).width;d+m>this.lineWidth?(r&&this._drawTextLine(e,u,a*s),n&&n.push(u),d>o&&(o=d),u=p[f+1],d=e.measureText(u).width,a++):(u+=p[f]+p[f+1],d+=m)}}r&&this._drawTextLine(e,u,a*s),n&&n.push(u),i&&null==d&&(d=e.measureText(u).width),d>o&&(o=d),a++}return i&&(i.width=o,i.height=a*s),r||e.restore(),i},e._drawTextLine=function(t,e,i){this.outline?t.strokeText(e,0,i,this.maxWidth||65535):t.fillText(e,0,i,this.maxWidth||65535)},e._getMeasuredWidth=function(e){var i=t._workingContext;i.save();var n=this._prepContext(i).measureText(e).width;return i.restore(),n},_a.Text=_a.promote(t,"DisplayObject")}(),this._a=this._a||{},function(){"use strict";function t(t,e){this.Container_constructor(),this.text=t||"",this.spriteSheet=e,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0}}var e=_a.extend(t,_a.Container);t.maxPoolSize=100,t._spritePool=[],e.draw=function(t,e){this.DisplayObject_draw(t,e)||(this._updateText(),this.Container_draw(t,e))},e.getBounds=function(){return this._updateText(),this.Container_getBounds()},e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&t)},e.clone=function(){return this._cloneProps(new t(this.text,this.spriteSheet))},e.addChild=e.addChildAt=e.removeChild=e.removeChildAt=e.removeAllChildren=function(){},e._cloneProps=function(t){return this.Container__cloneProps(t),t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.spaceWidth=this.spaceWidth,t},e._getFrameIndex=function(t,e){var i,n=e.getAnimation(t);return n||(t!=(i=t.toUpperCase())||t!=(i=t.toLowerCase())||(i=null),i&&(n=e.getAnimation(i))),n&&n.frames[0]},e._getFrame=function(t,e){var i=this._getFrameIndex(t,e);return null==i?i:e.getFrame(i)},e._getLineHeight=function(t){var e=this._getFrame("1",t)||this._getFrame("T",t)||this._getFrame("L",t)||t.getFrame(0);return e?e.rect.height:1},e._getSpaceWidth=function(t){var e=this._getFrame("1",t)||this._getFrame("l",t)||this._getFrame("e",t)||this._getFrame("a",t)||t.getFrame(0);return e?e.rect.width:1},e._updateText=function(){var e,i=0,n=0,r=this._oldProps,s=!1,o=this.spaceWidth,a=this.lineHeight,l=this.spriteSheet,c=t._spritePool,h=this.children,u=0,d=h.length;for(var p in r)r[p]!=this[p]&&(r[p]=this[p],s=!0);if(s){var f=!!this._getFrame(" ",l);f||o||(o=this._getSpaceWidth(l)),a||(a=this._getLineHeight(l));for(var v=0,m=this.text.length;v<m;v++){var g=this.text.charAt(v);if(" "!=g||f)if("\n"!=g&&"\r"!=g){var y=this._getFrameIndex(g,l);null!=y&&(u<d?e=h[u]:(h.push(e=c.length?c.pop():new _a.Sprite),e.parent=this,d++),e.spriteSheet=l,e.gotoAndStop(y),e.x=i,e.y=n,u++,i+=e.getBounds().width+this.letterSpacing)}else"\r"==g&&"\n"==this.text.charAt(v+1)&&v++,i=0,n+=a;else i+=o}for(;d>u;)c.push(e=h.pop()),e.parent=null,d--;c.length>t.maxPoolSize&&(c.length=t.maxPoolSize)}},_a.BitmapText=_a.promote(t,"Container")}(),this._a=this._a||{},function(){"use strict";function t(e,i,n,r){this.Container_constructor(),!t.inited&&t.init(),this.mode=e||t.INDEPENDENT,this.startPosition=i||0,this.loop=n,this.currentFrame=0,this.timeline=new _a.Timeline(null,r,{paused:!0,position:i,useTicks:!0}),this.paused=!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||null,this.framerate=null,this._synchOffset=0,this._prevPos=-1,this._prevPosition=0,this._t=0,this._managed={}}function e(){throw"MovieClipPlugin cannot be instantiated."}var i=_a.extend(t,_a.Container);t.INDEPENDENT="independent",t.SINGLE_FRAME="single",t.SYNCHED="synched",t.inited=!1,t.init=function(){t.inited||(e.install(),t.inited=!0)},i.getLabels=function(){return this.timeline.getLabels()},i.getCurrentLabel=function(){return this._updateTimeline(),this.timeline.getCurrentLabel()},i.getDuration=function(){return this.timeline.duration;
};try{Object.defineProperties(i,{labels:{get:i.getLabels},currentLabel:{get:i.getCurrentLabel},totalFrames:{get:i.getDuration},duration:{get:i.getDuration}})}catch(t){}i.initialize=t,i.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},i.draw=function(t,e){return!!this.DisplayObject_draw(t,e)||(this._updateTimeline(),this.Container_draw(t,e),!0)},i.play=function(){this.paused=!1},i.stop=function(){this.paused=!0},i.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},i.gotoAndStop=function(t){this.paused=!0,this._goto(t)},i.advance=function(e){var i=t.INDEPENDENT;if(this.mode==i){for(var n=this,r=n.framerate;(n=n.parent)&&null==r;)n.mode==i&&(r=n._framerate);this._framerate=r;var s=null!=r&&r!=-1&&null!=e?e/(1e3/r)+this._t:1,o=0|s;for(this._t=s-o;!this.paused&&o--;)this._prevPosition=this._prevPos<0?0:this._prevPosition+1,this._updateTimeline()}},i.clone=function(){throw"MovieClip cannot be cloned."},i.toString=function(){return"[MovieClip (name="+this.name+")]"},i._tick=function(t){this.advance(t&&t.delta),this.Container__tick(t)},i._goto=function(t){var e=this.timeline.resolve(t);null!=e&&(this._prevPos==-1&&(this._prevPos=NaN),this._prevPosition=e,this._t=0,this._updateTimeline())},i._reset=function(){this._prevPos=-1,this._t=this.currentFrame=0,this.paused=!1},i._updateTimeline=function(){var e=this.timeline,i=this.mode!=t.INDEPENDENT;e.loop=null==this.loop||this.loop;var n=i?this.startPosition+(this.mode==t.SINGLE_FRAME?0:this._synchOffset):this._prevPos<0?0:this._prevPosition,r=i||!this.actionsEnabled?_a.Tween.NONE:null;if(this.currentFrame=e._calcPosition(n),e.setPosition(n,r),this._prevPosition=e._prevPosition,this._prevPos!=e._prevPos){this.currentFrame=this._prevPos=e._prevPos;for(var s in this._managed)this._managed[s]=1;for(var o=e._tweens,a=0,l=o.length;a<l;a++){var c=o[a],h=c._target;if(h!=this&&!c.passive){var u=c._stepPosition;h instanceof _a.DisplayObject?this._addManagedChild(h,u):this._setState(h.state,u)}}var d=this.children;for(a=d.length-1;a>=0;a--){var p=d[a].id;1==this._managed[p]&&(this.removeChildAt(a),delete this._managed[p])}}},i._setState=function(t,e){if(t)for(var i=t.length-1;i>=0;i--){var n=t[i],r=n.t,s=n.p;for(var o in s)r[o]=s[o];this._addManagedChild(r,e)}},i._addManagedChild=function(e,i){e._off||(this.addChildAt(e,0),e instanceof t&&(e._synchOffset=i,e.mode==t.INDEPENDENT&&e.autoReset&&!this._managed[e.id]&&e._reset()),this._managed[e.id]=2)},i._getBounds=function(t,e){var i=this.DisplayObject_getBounds();return i||(this._updateTimeline(),this.frameBounds&&(i=this._rectangle.copy(this.frameBounds[this.currentFrame]))),i?this._transformBounds(i,t,e):this.Container__getBounds(t,e)},_a.MovieClip=_a.promote(t,"Container"),e.priority=100,e.install=function(){_a.Tween.installPlugin(e,["startPosition"])},e.init=function(t,e,i){return i},e.step=function(){},e.tween=function(e,i,n,r,s,o,a,l){return e.target instanceof t?1==o?s[i]:r[i]:n}}(),this._a=this._a||{},function(){"use strict";function t(){throw"SpriteSheetUtils cannot be instantiated"}var e=_a.createCanvas?_a.createCanvas():document.createElement("canvas");e.getContext&&(t._workingCanvas=e,t._workingContext=e.getContext("2d"),e.width=e.height=1),t.addFlippedFrames=function(e,i,n,r){if(i||n||r){var s=0;i&&t._flip(e,++s,!0,!1),n&&t._flip(e,++s,!1,!0),r&&t._flip(e,++s,!0,!0)}},t.extractFrame=function(e,i){isNaN(i)&&(i=e.getAnimation(i).frames[0]);var n=e.getFrame(i);if(!n)return null;var r=n.rect,s=t._workingCanvas;s.width=r.width,s.height=r.height,t._workingContext.drawImage(n.image,r.x,r.y,r.width,r.height,0,0,r.width,r.height);var o=document.createElement("img");return o.src=s.toDataURL("image/png"),o},t.mergeAlpha=function(t,e,i){i||(i=_a.createCanvas?_a.createCanvas():document.createElement("canvas")),i.width=Math.max(e.width,t.width),i.height=Math.max(e.height,t.height);var n=i.getContext("2d");return n.save(),n.drawImage(t,0,0),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),n.restore(),i},t._flip=function(e,i,n,r){for(var s=e._images,o=t._workingCanvas,a=t._workingContext,l=s.length/i,c=0;c<l;c++){var h=s[c];h.__tmp=c,a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,o.width+1,o.height+1),o.width=h.width,o.height=h.height,a.setTransform(n?-1:1,0,0,r?-1:1,n?h.width:0,r?h.height:0),a.drawImage(h,0,0);var u=document.createElement("img");u.src=o.toDataURL("image/png"),u.width=h.width,u.height=h.height,s.push(u)}var d=e._frames,p=d.length/i;for(c=0;c<p;c++){h=d[c];var f=h.rect.clone();u=s[h.image.__tmp+l*i];var v={image:u,rect:f,regX:h.regX,regY:h.regY};n&&(f.x=u.width-f.x-f.width,v.regX=f.width-h.regX),r&&(f.y=u.height-f.y-f.height,v.regY=f.height-h.regY),d.push(v)}var m="_"+(n?"h":"")+(r?"v":""),g=e._animations,y=e._data,_=g.length/i;for(c=0;c<_;c++){var x=g[c];h=y[x];var b={name:x+m,speed:h.speed,next:h.next,frames:[]};h.next&&(b.next+=m),d=h.frames;for(var w=0,S=d.length;w<S;w++)b.frames.push(d[w]+p*i);y[b.name]=b,g.push(b.name)}},_a.SpriteSheetUtils=t}(),this._a=this._a||{},function(){"use strict";function t(t){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=t||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var e=_a.extend(t,_a.EventDispatcher);t.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",t.ERR_RUNNING="a build is already running",e.addFrame=function(e,i,n,r,s){if(this._data)throw t.ERR_RUNNING;var o=i||e.bounds||e.nominalBounds;return!o&&e.getBounds&&(o=e.getBounds()),o?(n=n||1,this._frames.push({source:e,sourceRect:o,scale:n,funct:r,data:s,index:this._frames.length,height:o.height*n})-1):null},e.addAnimation=function(e,i,n,r){if(this._data)throw t.ERR_RUNNING;this._animations[e]={frames:i,next:n,speed:r}},e.addMovieClip=function(e,i,n,r,s,o){if(this._data)throw t.ERR_RUNNING;var a=e.frameBounds,l=i||e.bounds||e.nominalBounds;if(!l&&e.getBounds&&(l=e.getBounds()),l||a){var c,h,u=this._frames.length,d=e.timeline.duration;for(c=0;c<d;c++){var p=a&&a[c]?a[c]:l;this.addFrame(e,p,n,this._setupMovieClipFrame,{i:c,f:r,d:s})}var f=e.timeline._labels,v=[];for(var m in f)v.push({index:f[m],label:m});if(v.length)for(v.sort(function(t,e){return t.index-e.index}),c=0,h=v.length;c<h;c++){for(var g=v[c].label,y=u+v[c].index,_=u+(c==h-1?d:v[c+1].index),x=[],b=y;b<_;b++)x.push(b);o&&!(g=o(g,e,y,_))||this.addAnimation(g,x,!0)}}},e.build=function(){if(this._data)throw t.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},e.buildAsync=function(e){if(this._data)throw t.ERR_RUNNING;this.timeSlice=e,this._startBuild();var i=this;this._timerID=setTimeout(function(){i._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},e.stopAsync=function(){clearTimeout(this._timerID),this._data=null},e.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},e.toString=function(){return"[SpriteSheetBuilder]"},e._startBuild=function(){var e=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var i=[];this._data={images:[],frames:i,framerate:this.framerate,animations:this._animations};var n=this._frames.slice();if(n.sort(function(t,e){return t.height<=e.height?-1:1}),n[n.length-1].height+2*e>this.maxHeight)throw t.ERR_DIMENSIONS;for(var r=0,s=0,o=0;n.length;){var a=this._fillRow(n,r,o,i,e);if(a.w>s&&(s=a.w),r+=a.h,!a.h||!n.length){var l=_a.createCanvas?_a.createCanvas():document.createElement("canvas");l.width=this._getSize(s,this.maxWidth),l.height=this._getSize(r,this.maxHeight),this._data.images[o]=l,a.h||(s=r=0,o++)}}},e._setupMovieClipFrame=function(t,e){var i=t.actionsEnabled;t.actionsEnabled=!1,t.gotoAndStop(e.i),t.actionsEnabled=i,e.f&&e.f(t,e.d,e.i)},e._getSize=function(t,e){for(var i=4;Math.pow(2,++i)<t;);return Math.min(e,Math.pow(2,i))},e._fillRow=function(e,i,n,r,s){var o=this.maxWidth,a=this.maxHeight;i+=s;for(var l=a-i,c=s,h=0,u=e.length-1;u>=0;u--){var d=e[u],p=this._scale*d.scale,f=d.sourceRect,v=d.source,m=Math.floor(p*f.x-s),g=Math.floor(p*f.y-s),y=Math.ceil(p*f.height+2*s),_=Math.ceil(p*f.width+2*s);if(_>o)throw t.ERR_DIMENSIONS;y>l||c+_>o||(d.img=n,d.rect=new _a.Rectangle(c,i,_,y),h=h||y,e.splice(u,1),r[d.index]=[c,i,_,y,n,Math.round(-m+p*v.regX-s),Math.round(-g+p*v.regY-s)],c+=_)}return{w:c,h:h}},e._endBuild=function(){this.spriteSheet=new _a.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},e._run=function(){for(var t=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),e=(new Date).getTime()+t,i=!1;e>(new Date).getTime();)if(!this._drawNext()){i=!0;break}if(i)this._endBuild();else{var n=this;this._timerID=setTimeout(function(){n._run()},50-t)}var r=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var s=new _a.Event("progress");s.progress=r,this.dispatchEvent(s)}},e._drawNext=function(){var t=this._frames[this._index],e=t.scale*this._scale,i=t.rect,n=t.sourceRect,r=this._data.images[t.img],s=r.getContext("2d");return t.funct&&t.funct(t.source,t.data),s.save(),s.beginPath(),s.rect(i.x,i.y,i.width,i.height),s.clip(),s.translate(Math.ceil(i.x-n.x*e),Math.ceil(i.y-n.y*e)),s.scale(e,e),t.source.draw(s),s.restore(),++this._index<this._frames.length},_a.SpriteSheetBuilder=_a.promote(t,"EventDispatcher")}(),this._a=this._a||{},function(){"use strict";function t(t){this.DisplayObject_constructor(),"string"==typeof t&&(t=document.getElementById(t)),this.mouseEnabled=!1;var e=t.style;e.position="absolute",e.transformOrigin=e.WebkitTransformOrigin=e.msTransformOrigin=e.MozTransformOrigin=e.OTransformOrigin="0% 0%",this.htmlElement=t,this._oldProps=null}var e=_a.extend(t,_a.DisplayObject);e.isVisible=function(){return null!=this.htmlElement},e.draw=function(t,e){return!0},e.cache=function(){},e.uncache=function(){},e.updateCache=function(){},e.hitTest=function(){},e.localToGlobal=function(){},e.globalToLocal=function(){},e.localToLocal=function(){},e.clone=function(){throw"DOMElement cannot be cloned."},e.toString=function(){return"[DOMElement (name="+this.name+")]"},e._tick=function(t){var e=this.getStage();e&&e.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(t)},e._handleDrawEnd=function(t){var e=this.htmlElement;if(e){var i=e.style,n=this.getConcatenatedDisplayProps(this._props),r=n.matrix,s=n.visible?"visible":"hidden";if(s!=i.visibility&&(i.visibility=s),n.visible){var o=this._oldProps,a=o&&o.matrix,l=1e4;if(!a||!a.equals(r)){var c="matrix("+(r.a*l|0)/l+","+(r.b*l|0)/l+","+(r.c*l|0)/l+","+(r.d*l|0)/l+","+(r.tx+.5|0);i.transform=i.WebkitTransform=i.OTransform=i.msTransform=c+","+(r.ty+.5|0)+")",i.MozTransform=c+"px,"+(r.ty+.5|0)+"px)",o||(o=this._oldProps=new _a.DisplayProps(!0,NaN)),o.matrix.copy(r)}o.alpha!=n.alpha&&(i.opacity=""+(n.alpha*l|0)/l,o.alpha=n.alpha)}}},_a.DOMElement=_a.promote(t,"DisplayObject")}(),this._a=this._a||{},function(){"use strict";function t(){}var e=t.prototype;e.getBounds=function(t){return t},e.applyFilter=function(t,e,i,n,r,s,o,a){s=s||t,null==o&&(o=e),null==a&&(a=i);try{var l=t.getImageData(e,i,n,r)}catch(t){return!1}return!!this._applyFilter(l)&&(s.putImageData(l,o,a),!0)},e.toString=function(){return"[Filter]"},e.clone=function(){return new t},e._applyFilter=function(t){return!0},_a.Filter=t}(),this._a=this._a||{},function(){"use strict";function t(t,e,i){(isNaN(t)||t<0)&&(t=0),(isNaN(e)||e<0)&&(e=0),(isNaN(i)||i<1)&&(i=1),this.blurX=0|t,this.blurY=0|e,this.quality=0|i}var e=_a.extend(t,_a.Filter);t.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],t.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],e.getBounds=function(t){var e=0|this.blurX,i=0|this.blurY;if(e<=0&&i<=0)return t;var n=Math.pow(this.quality,.2);return(t||new _a.Rectangle).pad(e*n+1,i*n+1,e*n+1,i*n+1)},e.clone=function(){return new t(this.blurX,this.blurY,this.quality)},e.toString=function(){return"[BlurFilter]"},e._applyFilter=function(e){var i=this.blurX>>1;if(isNaN(i)||i<0)return!1;var n=this.blurY>>1;if(isNaN(n)||n<0)return!1;if(0==i&&0==n)return!1;var r=this.quality;(isNaN(r)||r<1)&&(r=1),r|=0,r>3&&(r=3),r<1&&(r=1);var s=e.data,o=0,a=0,l=0,c=0,h=0,u=0,d=0,p=0,f=0,v=0,m=0,g=0,y=0,_=0,x=0,b=i+i+1|0,w=n+n+1|0,S=0|e.width,T=0|e.height,C=S-1|0,P=T-1|0,M=i+1|0,E=n+1|0,k={r:0,b:0,g:0,a:0},A=k;for(l=1;l<b;l++)A=A.n={r:0,b:0,g:0,a:0};A.n=k;var I={r:0,b:0,g:0,a:0},j=I;for(l=1;l<w;l++)j=j.n={r:0,b:0,g:0,a:0};j.n=I;for(var O=null,B=0|t.MUL_TABLE[i],D=0|t.SHG_TABLE[i],L=0|t.MUL_TABLE[n],R=0|t.SHG_TABLE[n];r-- >0;){d=u=0;var F=B,z=D;for(a=T;--a>-1;){for(p=M*(g=s[0|u]),f=M*(y=s[u+1|0]),v=M*(_=s[u+2|0]),m=M*(x=s[u+3|0]),A=k,l=M;--l>-1;)A.r=g,A.g=y,A.b=_,A.a=x,A=A.n;for(l=1;l<M;l++)c=u+((C<l?C:l)<<2)|0,p+=A.r=s[c],f+=A.g=s[c+1],v+=A.b=s[c+2],m+=A.a=s[c+3],A=A.n;for(O=k,o=0;o<S;o++)s[u++]=p*F>>>z,s[u++]=f*F>>>z,s[u++]=v*F>>>z,s[u++]=m*F>>>z,c=d+((c=o+i+1)<C?c:C)<<2,p-=O.r-(O.r=s[c]),f-=O.g-(O.g=s[c+1]),v-=O.b-(O.b=s[c+2]),m-=O.a-(O.a=s[c+3]),O=O.n;d+=S}for(F=L,z=R,o=0;o<S;o++){for(u=o<<2|0,p=E*(g=s[u])|0,f=E*(y=s[u+1|0])|0,v=E*(_=s[u+2|0])|0,m=E*(x=s[u+3|0])|0,j=I,l=0;l<E;l++)j.r=g,j.g=y,j.b=_,j.a=x,j=j.n;for(h=S,l=1;l<=n;l++)u=h+o<<2,p+=j.r=s[u],f+=j.g=s[u+1],v+=j.b=s[u+2],m+=j.a=s[u+3],j=j.n,l<P&&(h+=S);if(u=o,O=I,r>0)for(a=0;a<T;a++)c=u<<2,s[c+3]=x=m*F>>>z,x>0?(s[c]=p*F>>>z,s[c+1]=f*F>>>z,s[c+2]=v*F>>>z):s[c]=s[c+1]=s[c+2]=0,c=o+((c=a+E)<P?c:P)*S<<2,p-=O.r-(O.r=s[c]),f-=O.g-(O.g=s[c+1]),v-=O.b-(O.b=s[c+2]),m-=O.a-(O.a=s[c+3]),O=O.n,u+=S;else for(a=0;a<T;a++)c=u<<2,s[c+3]=x=m*F>>>z,x>0?(x=255/x,s[c]=(p*F>>>z)*x,s[c+1]=(f*F>>>z)*x,s[c+2]=(v*F>>>z)*x):s[c]=s[c+1]=s[c+2]=0,c=o+((c=a+E)<P?c:P)*S<<2,p-=O.r-(O.r=s[c]),f-=O.g-(O.g=s[c+1]),v-=O.b-(O.b=s[c+2]),m-=O.a-(O.a=s[c+3]),O=O.n,u+=S}}return!0},_a.BlurFilter=_a.promote(t,"Filter")}(),this._a=this._a||{},function(){"use strict";function t(t){this.alphaMap=t,this._alphaMap=null,this._mapData=null}var e=_a.extend(t,_a.Filter);e.clone=function(){var e=new t(this.alphaMap);return e._alphaMap=this._alphaMap,e._mapData=this._mapData,e},e.toString=function(){return"[AlphaMapFilter]"},e._applyFilter=function(t){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var e=t.data,i=this._mapData,n=0,r=e.length;n<r;n+=4)e[n+3]=i[n]||0;return!0},e._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var t,e=this._alphaMap=this.alphaMap,i=e;e instanceof HTMLCanvasElement?t=i.getContext("2d"):(i=_a.createCanvas?_a.createCanvas():document.createElement("canvas"),i.width=e.width,i.height=e.height,t=i.getContext("2d"),t.drawImage(e,0,0));try{var n=t.getImageData(0,0,e.width,e.height)}catch(t){return!1}return this._mapData=n.data,!0},_a.AlphaMapFilter=_a.promote(t,"Filter")}(),this._a=this._a||{},function(){"use strict";function t(t){this.mask=t}var e=_a.extend(t,_a.Filter);e.applyFilter=function(t,e,i,n,r,s,o,a){return!this.mask||(s=s||t,null==o&&(o=e),null==a&&(a=i),s.save(),t==s&&(s.globalCompositeOperation="destination-in",s.drawImage(this.mask,o,a),s.restore(),!0))},e.clone=function(){return new t(this.mask)},e.toString=function(){return"[AlphaMaskFilter]"},_a.AlphaMaskFilter=_a.promote(t,"Filter")}(),this._a=this._a||{},function(){"use strict";function t(t,e,i,n,r,s,o,a){this.redMultiplier=null!=t?t:1,this.greenMultiplier=null!=e?e:1,this.blueMultiplier=null!=i?i:1,this.alphaMultiplier=null!=n?n:1,this.redOffset=r||0,this.greenOffset=s||0,this.blueOffset=o||0,this.alphaOffset=a||0}var e=_a.extend(t,_a.Filter);e.toString=function(){return"[ColorFilter]"},e.clone=function(){return new t(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},e._applyFilter=function(t){for(var e=t.data,i=e.length,n=0;n<i;n+=4)e[n]=e[n]*this.redMultiplier+this.redOffset,e[n+1]=e[n+1]*this.greenMultiplier+this.greenOffset,e[n+2]=e[n+2]*this.blueMultiplier+this.blueOffset,e[n+3]=e[n+3]*this.alphaMultiplier+this.alphaOffset;return!0},_a.ColorFilter=_a.promote(t,"Filter")}(),this._a=this._a||{},function(){"use strict";function t(t,e,i,n){this.setColor(t,e,i,n)}var e=t.prototype;t.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],t.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t.LENGTH=t.IDENTITY_MATRIX.length,e.setColor=function(t,e,i,n){return this.reset().adjustColor(t,e,i,n)},e.reset=function(){return this.copy(t.IDENTITY_MATRIX)},e.adjustColor=function(t,e,i,n){return this.adjustHue(n),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},e.adjustBrightness=function(t){return 0==t||isNaN(t)?this:(t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1]),this)},e.adjustContrast=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,100);var i;return e<0?i=127+e/100*127:(i=e%1,i=0==i?t.DELTA_INDEX[e]:t.DELTA_INDEX[e<<0]*(1-i)+t.DELTA_INDEX[(e<<0)+1]*i,i=127*i+127),this._multiplyMatrix([i/127,0,0,0,.5*(127-i),0,i/127,0,0,.5*(127-i),0,0,i/127,0,.5*(127-i),0,0,0,1,0,0,0,0,0,1]),this},e.adjustSaturation=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,100);var e=1+(t>0?3*t/100:t/100),i=.3086,n=.6094,r=.082;return this._multiplyMatrix([i*(1-e)+e,n*(1-e),r*(1-e),0,0,i*(1-e),n*(1-e)+e,r*(1-e),0,0,i*(1-e),n*(1-e),r*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.adjustHue=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,180)/180*Math.PI;var e=Math.cos(t),i=Math.sin(t),n=.213,r=.715,s=.072;return this._multiplyMatrix([n+e*(1-n)+i*-n,r+e*-r+i*-r,s+e*-s+i*(1-s),0,0,n+e*-n+.143*i,r+e*(1-r)+.14*i,s+e*-s+i*-.283,0,0,n+e*-n+i*-(1-n),r+e*-r+i*r,s+e*(1-s)+i*s,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.concat=function(e){return e=this._fixMatrix(e),e.length!=t.LENGTH?this:(this._multiplyMatrix(e),this)},e.clone=function(){return(new t).copy(this)},e.toArray=function(){for(var e=[],i=0,n=t.LENGTH;i<n;i++)e[i]=this[i];return e},e.copy=function(e){for(var i=t.LENGTH,n=0;n<i;n++)this[n]=e[n];return this},e.toString=function(){return"[ColorMatrix]"},e._multiplyMatrix=function(t){var e,i,n,r=[];for(e=0;e<5;e++){for(i=0;i<5;i++)r[i]=this[i+5*e];for(i=0;i<5;i++){var s=0;for(n=0;n<5;n++)s+=t[i+5*n]*r[n];this[i+5*e]=s}}},e._cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},e._fixMatrix=function(e){return e instanceof t&&(e=e.toArray()),e.length<t.LENGTH?e=e.slice(0,e.length).concat(t.IDENTITY_MATRIX.slice(e.length,t.LENGTH)):e.length>t.LENGTH&&(e=e.slice(0,t.LENGTH)),e},_a.ColorMatrix=t}(),this._a=this._a||{},function(){"use strict";function t(t){this.matrix=t}var e=_a.extend(t,_a.Filter);e.toString=function(){return"[ColorMatrixFilter]"},e.clone=function(){return new t(this.matrix)},e._applyFilter=function(t){for(var e,i,n,r,s=t.data,o=s.length,a=this.matrix,l=a[0],c=a[1],h=a[2],u=a[3],d=a[4],p=a[5],f=a[6],v=a[7],m=a[8],g=a[9],y=a[10],_=a[11],x=a[12],b=a[13],w=a[14],S=a[15],T=a[16],C=a[17],P=a[18],M=a[19],E=0;E<o;E+=4)e=s[E],i=s[E+1],n=s[E+2],r=s[E+3],s[E]=e*l+i*c+n*h+r*u+d,s[E+1]=e*p+i*f+n*v+r*m+g,s[E+2]=e*y+i*_+n*x+r*b+w,s[E+3]=e*S+i*T+n*C+r*P+M;return!0},_a.ColorMatrixFilter=_a.promote(t,"Filter")}(),this._a=this._a||{},function(){"use strict";function t(){throw"Touch cannot be instantiated"}t.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},t.enable=function(e,i,n){return!!(e&&e.canvas&&t.isSupported())&&(!!e.__touch||(e.__touch={pointers:{},multitouch:!i,preventDefault:!n,count:0},"ontouchstart"in window?t._IOS_enable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_enable(e),!0))},t.disable=function(e){e&&("ontouchstart"in window?t._IOS_disable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_disable(e),delete e.__touch)},t._IOS_enable=function(e){var i=e.canvas,n=e.__touch.f=function(i){t._IOS_handleEvent(e,i)};i.addEventListener("touchstart",n,!1),i.addEventListener("touchmove",n,!1),i.addEventListener("touchend",n,!1),i.addEventListener("touchcancel",n,!1)},t._IOS_disable=function(t){var e=t.canvas;if(e){var i=t.__touch.f;e.removeEventListener("touchstart",i,!1),e.removeEventListener("touchmove",i,!1),e.removeEventListener("touchend",i,!1),e.removeEventListener("touchcancel",i,!1)}},t._IOS_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();for(var i=e.changedTouches,n=e.type,r=0,s=i.length;r<s;r++){var o=i[r],a=o.identifier;o.target==t.canvas&&("touchstart"==n?this._handleStart(t,a,e,o.pageX,o.pageY):"touchmove"==n?this._handleMove(t,a,e,o.pageX,o.pageY):"touchend"!=n&&"touchcancel"!=n||this._handleEnd(t,a,e))}}},t._IE_enable=function(e){var i=e.canvas,n=e.__touch.f=function(i){t._IE_handleEvent(e,i)};void 0===window.navigator.pointerEnabled?(i.addEventListener("MSPointerDown",n,!1),window.addEventListener("MSPointerMove",n,!1),window.addEventListener("MSPointerUp",n,!1),window.addEventListener("MSPointerCancel",n,!1),e.__touch.preventDefault&&(i.style.msTouchAction="none")):(i.addEventListener("pointerdown",n,!1),window.addEventListener("pointermove",n,!1),window.addEventListener("pointerup",n,!1),window.addEventListener("pointercancel",n,!1),e.__touch.preventDefault&&(i.style.touchAction="none")),e.__touch.activeIDs={}},t._IE_disable=function(t){var e=t.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",e,!1),window.removeEventListener("MSPointerUp",e,!1),window.removeEventListener("MSPointerCancel",e,!1),t.canvas&&t.canvas.removeEventListener("MSPointerDown",e,!1)):(window.removeEventListener("pointermove",e,!1),window.removeEventListener("pointerup",e,!1),window.removeEventListener("pointercancel",e,!1),t.canvas&&t.canvas.removeEventListener("pointerdown",e,!1))},t._IE_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();var i=e.type,n=e.pointerId,r=t.__touch.activeIDs;if("MSPointerDown"==i||"pointerdown"==i){if(e.srcElement!=t.canvas)return;r[n]=!0,this._handleStart(t,n,e,e.pageX,e.pageY)}else r[n]&&("MSPointerMove"==i||"pointermove"==i?this._handleMove(t,n,e,e.pageX,e.pageY):"MSPointerUp"!=i&&"MSPointerCancel"!=i&&"pointerup"!=i&&"pointercancel"!=i||(delete r[n],this._handleEnd(t,n,e)))}},t._handleStart=function(t,e,i,n,r){var s=t.__touch;if(s.multitouch||!s.count){var o=s.pointers;o[e]||(o[e]=!0,s.count++,t._handlePointerDown(e,i,n,r))}},t._handleMove=function(t,e,i,n,r){t.__touch.pointers[e]&&t._handlePointerMove(e,i,n,r)},t._handleEnd=function(t,e,i){var n=t.__touch,r=n.pointers;r[e]&&(n.count--,t._handlePointerUp(e,i,!0),delete r[e])},_a.Touch=t}(),this._a=this._a||{},function(){"use strict";var t=_a.EaselJS=_a.EaselJS||{};t.version="0.8.2",t.buildDate="Thu, 26 Nov 2015 20:44:34 GMT"}(),this._a=this._a||{},_a.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this._a=this._a||{},_a.promote=function(t,e){"use strict";var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n){i[(e+="_")+"constructor"]=n.constructor;for(var r in n)i.hasOwnProperty(r)&&"function"==typeof n[r]&&(i[e+r]=n[r])}return t},this._a=this._a||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},_a.Event=t}(),this._a=this._a||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n;n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var r=n[t];return r&&this.removeEventListener(t,e,i),r=n[t],r?r.push(e):n[t]=[e],e},e.on=function(t,e,i,n,r,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,r),n&&t.remove()},s)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var r=n[t];if(r)for(var s=0,o=r.length;s<o;s++)if(r[s]==e){1==o?delete n[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e,i){if("string"==typeof t){var n=this._listeners;if(!(e||n&&n[t]))return!0;t=new _a.Event(t,e,i)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var r=this,s=[r];r.parent;)s.push(r=r.parent);var o,a=s.length;for(o=a-1;o>=0&&!t.propagationStopped;o--)s[o]._dispatchEvent(t,1+(0==o));for(o=1;o<a&&!t.propagationStopped;o++)s[o]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n=1==e?this._captureListeners:this._listeners;if(t&&n){var r=n[t.type];if(!r||!(i=r.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,r=r.slice();for(var s=0;s<i&&!t.immediatePropagationStopped;s++){var o=r[s];o.handleEvent?o.handleEvent(t):o(t),t.removed&&(this.off(t.type,o,1==e),t.removed=!1)}}},_a.EventDispatcher=t}(),this._a=this._a||{},function(){"use strict";function t(){throw"Ticker cannot be instantiated."}t.RAF_SYNCHED="synched",t.RAF="raf",t.TIMEOUT="timeout",t.useRAF=!1,t.timingMode=null,t.maxDelta=0,t.paused=!1,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,_a.EventDispatcher.initialize(t),t._addEventListener=t.addEventListener,t.addEventListener=function(){return!t._inited&&t.init(),t._addEventListener.apply(t,arguments)},t._inited=!1,t._startTime=0,t._pausedTime=0,t._ticks=0,t._pausedTicks=0,t._interval=50,t._lastTime=0,t._times=null,t._tickTimes=null,t._timerId=null,t._raf=!0,t.setInterval=function(e){t._interval=e,t._inited&&t._setupTick()},t.getInterval=function(){return t._interval},t.setFPS=function(e){t.setInterval(1e3/e)},t.getFPS=function(){return 1e3/t._interval};try{Object.defineProperties(t,{interval:{get:t.getInterval,set:t.setInterval},framerate:{get:t.getFPS,set:t.setFPS}})}catch(t){console.log(t)}t.init=function(){t._inited||(t._inited=!0,t._times=[],t._tickTimes=[],t._startTime=t._getTime(),t._times.push(t._lastTime=0),t.interval=t._interval)},t.reset=function(){if(t._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(t._timerId)}else clearTimeout(t._timerId);t.removeAllEventListeners("tick"),t._timerId=t._times=t._tickTimes=null,t._startTime=t._lastTime=t._ticks=0,t._inited=!1},t.getMeasuredTickTime=function(e){var i=0,n=t._tickTimes;if(!n||n.length<1)return-1;e=Math.min(n.length,e||0|t.getFPS());for(var r=0;r<e;r++)i+=n[r];return i/e},t.getMeasuredFPS=function(e){var i=t._times;return!i||i.length<2?-1:(e=Math.min(i.length-1,e||0|t.getFPS()),1e3/((i[0]-i[e])/e))},t.setPaused=function(e){t.paused=e},t.getPaused=function(){return t.paused},t.getTime=function(e){return t._startTime?t._getTime()-(e?t._pausedTime:0):-1},t.getEventTime=function(e){return t._startTime?(t._lastTime||t._startTime)-(e?t._pausedTime:0):-1},t.getTicks=function(e){return t._ticks-(e?t._pausedTicks:0)},t._handleSynch=function(){t._timerId=null,t._setupTick(),t._getTime()-t._lastTime>=.97*(t._interval-1)&&t._tick()},t._handleRAF=function(){t._timerId=null,t._setupTick(),t._tick()},t._handleTimeout=function(){t._timerId=null,t._setupTick(),t._tick()},t._setupTick=function(){if(null==t._timerId){var e=t.timingMode||t.useRAF&&t.RAF_SYNCHED;if(e==t.RAF_SYNCHED||e==t.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return t._timerId=i(e==t.RAF?t._handleRAF:t._handleSynch),void(t._raf=!0)}t._raf=!1,t._timerId=setTimeout(t._handleTimeout,t._interval)}},t._tick=function(){var e=t.paused,i=t._getTime(),n=i-t._lastTime;if(t._lastTime=i,t._ticks++,e&&(t._pausedTicks++,t._pausedTime+=n),t.hasEventListener("tick")){var r=new _a.Event("tick"),s=t.maxDelta;r.delta=s&&n>s?s:n,
r.paused=e,r.time=i,r.runTime=i-t._pausedTime,t.dispatchEvent(r)}for(t._tickTimes.unshift(t._getTime()-i);t._tickTimes.length>100;)t._tickTimes.pop();for(t._times.unshift(i);t._times.length>100;)t._times.pop()};var e=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);t._getTime=function(){return(e&&e.call(performance)||(new Date).getTime())-t._startTime},_a.Ticker=t}(),this._a=this._a||{},function(){"use strict";function t(e,i,n){this.ignoreGlobalPause=!1,this.loop=!1,this.duration=0,this.pluginData=n||{},this.target=e,this.position=null,this.passive=!1,this._paused=!1,this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],this._prevPosition=0,this._stepPosition=0,this._prevPos=-1,this._target=e,this._useTicks=!1,this._inited=!1,this._registered=!1,i&&(this._useTicks=i.useTicks,this.ignoreGlobalPause=i.ignoreGlobalPause,this.loop=i.loop,i.onChange&&this.addEventListener("change",i.onChange),i.override&&t.removeTweens(e)),i&&i.paused?this._paused=!0:_a.Tween._register(this,!0),i&&null!=i.position&&this.setPosition(i.position,t.NONE)}var e=_a.extend(t,_a.EventDispatcher);t.NONE=0,t.LOOP=1,t.REVERSE=2,t.IGNORE={},t._tweens=[],t._plugins={},t.get=function(e,i,n,r){return r&&t.removeTweens(e),new t(e,i,n)},t.tick=function(e,i){for(var n=t._tweens.slice(),r=n.length-1;r>=0;r--){var s=n[r];i&&!s.ignoreGlobalPause||s._paused||s.tick(s._useTicks?1:e)}},t.handleEvent=function(t){"tick"==t.type&&this.tick(t.delta,t.paused)},t.removeTweens=function(e){if(e.tweenjs_count){for(var i=t._tweens,n=i.length-1;n>=0;n--){var r=i[n];r._target==e&&(r._paused=!0,i.splice(n,1))}e.tweenjs_count=0}},t.removeAllTweens=function(){for(var e=t._tweens,i=0,n=e.length;i<n;i++){var r=e[i];r._paused=!0,r.target&&(r.target.tweenjs_count=0)}e.length=0},t.hasActiveTweens=function(e){return e?null!=e.tweenjs_count&&!!e.tweenjs_count:t._tweens&&!!t._tweens.length},t.installPlugin=function(e,i){var n=e.priority;null==n&&(e.priority=n=0);for(var r=0,s=i.length,o=t._plugins;r<s;r++){var a=i[r];if(o[a]){for(var l=o[a],c=0,h=l.length;c<h&&!(n<l[c].priority);c++);o[a].splice(c,0,e)}else o[a]=[e]}},t._register=function(e,i){var n=e._target,r=t._tweens;if(i&&!e._registered)n&&(n.tweenjs_count=n.tweenjs_count?n.tweenjs_count+1:1),r.push(e),!t._inited&&_a.Ticker&&(_a.Ticker.addEventListener("tick",t),t._inited=!0);else if(!i&&e._registered){n&&n.tweenjs_count--;for(var s=r.length;s--;)if(r[s]==e){r.splice(s,1);break}}e._registered=i},e.wait=function(t,e){if(null==t||t<=0)return this;var i=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:i,e:this._linearEase,p1:i,v:e})},e.to=function(t,e,i){return(isNaN(e)||e<0)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(t))})},e.call=function(t,e,i){return this._addAction({f:t,p:e?e:[this],o:i?i:this._target})},e.set=function(t,e){return this._addAction({f:this._set,o:this,p:[t,e?e:this._target]})},e.play=function(t){return t||(t=this),this.call(t.setPaused,[!1],t)},e.pause=function(t){return t||(t=this),this.call(t.setPaused,[!0],t)},e.setPosition=function(t,e){t<0&&(t=0),null==e&&(e=1);var i=t,n=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,n=!0)),i==this._prevPos)return n;var r=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=t,this._target)if(n)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var s=0,o=this._steps.length;s<o&&!(this._steps[s].t>i);s++);var a=this._steps[s-1];this._updateTargetProps(a,(this._stepPosition=i-a.t)/a.d)}return 0!=e&&this._actions.length>0&&(this._useTicks?this._runActions(i,i):1==e&&i<r?(r!=this.duration&&this._runActions(r,this.duration),this._runActions(0,i,!0)):this._runActions(r,i)),n&&this.setPaused(!0),this.dispatchEvent("change"),n},e.tick=function(t){this._paused||this.setPosition(this._prevPosition+t)},e.setPaused=function(e){return this._paused===!!e?this:(this._paused=!!e,t._register(this,!e),this)},e.w=e.wait,e.t=e.to,e.c=e.call,e.s=e.set,e.toString=function(){return"[Tween]"},e.clone=function(){throw"Tween can not be cloned."},e._updateTargetProps=function(e,i){var n,r,s,o,a,l;if(e||1!=i){if(this.passive=!!e.v,this.passive)return;e.e&&(i=e.e(i,0,1,1)),n=e.p0,r=e.p1}else this.passive=!1,n=r=this._curQueueProps;for(var c in this._initQueueProps){null==(o=n[c])&&(n[c]=o=this._initQueueProps[c]),null==(a=r[c])&&(r[c]=a=o),s=o==a||0==i||1==i||"number"!=typeof o?1==i?a:o:o+(a-o)*i;var h=!1;if(l=t._plugins[c])for(var u=0,d=l.length;u<d;u++){var p=l[u].tween(this,c,s,n,r,i,!!e&&n==r,!e);p==t.IGNORE?h=!0:s=p}h||(this._target[c]=s)}},e._runActions=function(t,e,i){var n=t,r=e,s=-1,o=this._actions.length,a=1;for(t>e&&(n=e,r=t,s=o,o=a=-1);(s+=a)!=o;){var l=this._actions[s],c=l.t;(c==r||c>n&&c<r||i&&c==t)&&l.f.apply(l.o,l.p)}},e._appendQueueProps=function(e){var i,n,r,s,o;for(var a in e)if(void 0===this._initQueueProps[a]){if(n=this._target[a],i=t._plugins[a])for(r=0,s=i.length;r<s;r++)n=i[r].init(this,a,n);this._initQueueProps[a]=this._curQueueProps[a]=void 0===n?null:n}else n=this._curQueueProps[a];for(var a in e){if(n=this._curQueueProps[a],i=t._plugins[a])for(o=o||{},r=0,s=i.length;r<s;r++)i[r].step&&i[r].step(this,a,n,e[a],o);this._curQueueProps[a]=e[a]}return o&&this._appendQueueProps(o),this._curQueueProps},e._cloneProps=function(t){var e={};for(var i in t)e[i]=t[i];return e},e._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},e._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},e._set=function(t,e){for(var i in t)e[i]=t[i]},_a.Tween=_a.promote(t,"EventDispatcher")}(),this._a=this._a||{},function(){"use strict";function t(t,e,i){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.duration=0,this.loop=!1,this.position=null,this._paused=!1,this._tweens=[],this._labels=null,this._labelList=null,this._prevPosition=0,this._prevPos=-1,this._useTicks=!1,this._registered=!1,i&&(this._useTicks=i.useTicks,this.loop=i.loop,this.ignoreGlobalPause=i.ignoreGlobalPause,i.onChange&&this.addEventListener("change",i.onChange)),t&&this.addTween.apply(this,t),this.setLabels(e),i&&i.paused?this._paused=!0:_a.Tween._register(this,!0),i&&null!=i.position&&this.setPosition(i.position,_a.Tween.NONE)}var e=_a.extend(t,_a.EventDispatcher);e.addTween=function(t){var e=arguments.length;if(e>1){for(var i=0;i<e;i++)this.addTween(arguments[i]);return arguments[0]}return 0==e?null:(this.removeTween(t),this._tweens.push(t),t.setPaused(!0),t._paused=!1,t._useTicks=this._useTicks,t.duration>this.duration&&(this.duration=t.duration),this._prevPos>=0&&t.setPosition(this._prevPos,_a.Tween.NONE),t)},e.removeTween=function(t){var e=arguments.length;if(e>1){for(var i=!0,n=0;n<e;n++)i=i&&this.removeTween(arguments[n]);return i}if(0==e)return!1;for(var r=this._tweens,n=r.length;n--;)if(r[n]==t)return r.splice(n,1),t.duration>=this.duration&&this.updateDuration(),!0;return!1},e.addLabel=function(t,e){this._labels[t]=e;var i=this._labelList;if(i){for(var n=0,r=i.length;n<r&&!(e<i[n].position);n++);i.splice(n,0,{label:t,position:e})}},e.setLabels=function(t){this._labels=t?t:{}},e.getLabels=function(){var t=this._labelList;if(!t){t=this._labelList=[];var e=this._labels;for(var i in e)t.push({label:i,position:e[i]});t.sort(function(t,e){return t.position-e.position})}return t},e.getCurrentLabel=function(){var t=this.getLabels(),e=this.position,i=t.length;if(i){for(var n=0;n<i&&!(e<t[n].position);n++);return 0==n?null:t[n-1].label}return null},e.gotoAndPlay=function(t){this.setPaused(!1),this._goto(t)},e.gotoAndStop=function(t){this.setPaused(!0),this._goto(t)},e.setPosition=function(t,e){var i=this._calcPosition(t),n=!this.loop&&t>=this.duration;if(i==this._prevPos)return n;this._prevPosition=t,this.position=this._prevPos=i;for(var r=0,s=this._tweens.length;r<s;r++)if(this._tweens[r].setPosition(i,e),i!=this._prevPos)return!1;return n&&this.setPaused(!0),this.dispatchEvent("change"),n},e.setPaused=function(t){this._paused=!!t,_a.Tween._register(this,!t)},e.updateDuration=function(){this.duration=0;for(var t=0,e=this._tweens.length;t<e;t++){var i=this._tweens[t];i.duration>this.duration&&(this.duration=i.duration)}},e.tick=function(t){this.setPosition(this._prevPosition+t)},e.resolve=function(t){var e=Number(t);return isNaN(e)&&(e=this._labels[t]),e},e.toString=function(){return"[Timeline]"},e.clone=function(){throw"Timeline can not be cloned."},e._goto=function(t){var e=this.resolve(t);null!=e&&this.setPosition(e)},e._calcPosition=function(t){return t<0?0:t<this.duration?t:this.loop?t%this.duration:this.duration},_a.Timeline=_a.promote(t,"EventDispatcher")}(),this._a=this._a||{},function(){"use strict";function t(){throw"Ease cannot be instantiated."}t.linear=function(t){return t},t.none=t.linear,t.get=function(t){return t<-1&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:t<0?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},t.getPowIn=function(t){return function(e){return Math.pow(e,t)}},t.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},t.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},t.sineOut=function(t){return Math.sin(t*Math.PI/2)},t.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},t.backIn=t.getBackIn(1.7),t.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},t.backOut=t.getBackOut(1.7),t.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}},t.backInOut=t.getBackInOut(1.7),t.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},t.circOut=function(t){return Math.sqrt(1- --t*t)},t.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.bounceInOut=function(e){return e<.5?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.getElasticIn=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return-(t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e))}},t.elasticIn=t.getElasticIn(1,.3),t.getElasticOut=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return t*Math.pow(2,-10*n)*Math.sin((n-r)*i/e)+1}},t.elasticOut=t.getElasticOut(1,.3),t.getElasticInOut=function(t,e){var i=2*Math.PI;return function(n){var r=e/i*Math.asin(1/t);return(n*=2)<1?-.5*(t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e)):t*Math.pow(2,-10*(n-=1))*Math.sin((n-r)*i/e)*.5+1}},t.elasticInOut=t.getElasticInOut(1,.3*1.5),_a.Ease=t}(),this._a=this._a||{},function(){"use strict";function t(){throw"MotionGuidePlugin cannot be instantiated."}t.priority=0,t._rotOffS,t._rotOffE,t._rotNormS,t._rotNormE,t.install=function(){return _a.Tween.installPlugin(t,["guide","x","y","rotation"]),_a.Tween.IGNORE},t.init=function(t,e,i){var n=t.target;return n.hasOwnProperty("x")||(n.x=0),n.hasOwnProperty("y")||(n.y=0),n.hasOwnProperty("rotation")||(n.rotation=0),"rotation"==e&&(t.__needsRot=!0),"guide"==e?null:i},t.step=function(e,i,n,r,s){if("rotation"==i&&(e.__rotGlobalS=n,e.__rotGlobalE=r,t.testRotData(e,s)),"guide"!=i)return r;var o,a=r;a.hasOwnProperty("path")||(a.path=[]);var l=a.path;if(a.hasOwnProperty("end")||(a.end=1),a.hasOwnProperty("start")||(a.start=n&&n.hasOwnProperty("end")&&n.path===l?n.end:0),a.hasOwnProperty("_segments")&&a._length)return r;var c=l.length,h=10;if(!(c>=6&&(c-2)%4==0))throw"invalid 'path' data, please see documentation for valid paths";a._segments=[],a._length=0;for(var u=2;u<c;u+=4){for(var d,p,f=l[u-2],v=l[u-1],m=l[u+0],g=l[u+1],y=l[u+2],_=l[u+3],x=f,b=v,w=0,S=[],T=1;T<=h;T++){var C=T/h,P=1-C;d=P*P*f+2*P*C*m+C*C*y,p=P*P*v+2*P*C*g+C*C*_,w+=S[S.push(Math.sqrt((o=d-x)*o+(o=p-b)*o))-1],x=d,b=p}a._segments.push(w),a._segments.push(S),a._length+=w}o=a.orient,a.orient=!0;var M={};return t.calc(a,a.start,M),e.__rotPathS=Number(M.rotation.toFixed(5)),t.calc(a,a.end,M),e.__rotPathE=Number(M.rotation.toFixed(5)),a.orient=!1,t.calc(a,a.end,s),a.orient=o,a.orient?(e.__guideData=a,t.testRotData(e,s),r):r},t.testRotData=function(t,e){if(void 0===t.__rotGlobalS||void 0===t.__rotGlobalE){if(t.__needsRot)return;void 0!==t._curQueueProps.rotation?t.__rotGlobalS=t.__rotGlobalE=t._curQueueProps.rotation:t.__rotGlobalS=t.__rotGlobalE=e.rotation=t.target.rotation||0}if(void 0!==t.__guideData){var i=t.__guideData,n=t.__rotGlobalE-t.__rotGlobalS,r=t.__rotPathE-t.__rotPathS,s=n-r;if("auto"==i.orient)s>180?s-=360:s<-180&&(s+=360);else if("cw"==i.orient){for(;s<0;)s+=360;0==s&&n>0&&180!=n&&(s+=360)}else if("ccw"==i.orient){for(s=n-(r>180?360-r:r);s>0;)s-=360;0==s&&n<0&&n!=-180&&(s-=360)}i.rotDelta=s,i.rotOffS=t.__rotGlobalS-t.__rotPathS,t.__rotGlobalS=t.__rotGlobalE=t.__guideData=t.__needsRot=void 0}},t.tween=function(e,i,n,r,s,o,a,l){var c=s.guide;if(void 0==c||c===r.guide)return n;if(c.lastRatio!=o){var h=(c.end-c.start)*(a?c.end:o)+c.start;switch(t.calc(c,h,e.target),c.orient){case"cw":case"ccw":case"auto":e.target.rotation+=c.rotOffS+c.rotDelta*o;break;case"fixed":default:e.target.rotation+=c.rotOffS}c.lastRatio=o}return"rotation"!=i||c.orient&&"false"!=c.orient?e.target[i]:n},t.calc=function(t,e,i){if(void 0==t._segments)throw"Missing critical pre-calculated information, please file a bug";void 0==i&&(i={x:0,y:0,rotation:0});for(var n=t._segments,r=t.path,s=t._length*e,o=n.length-2,a=0;s>n[a]&&a<o;)s-=n[a],a+=2;var l=n[a+1],c=0;for(o=l.length-1;s>l[c]&&c<o;)s-=l[c],c++;var h=c/++o+s/(o*l[c]);a=2*a+2;var u=1-h;return i.x=u*u*r[a-2]+2*u*h*r[a+0]+h*h*r[a+2],i.y=u*u*r[a-1]+2*u*h*r[a+1]+h*h*r[a+3],t.orient&&(i.rotation=57.2957795*Math.atan2((r[a+1]-r[a-1])*u+(r[a+3]-r[a+1])*h,(r[a+0]-r[a-2])*u+(r[a+2]-r[a+0])*h)),i},_a.MotionGuidePlugin=t}(),this._a=this._a||{},function(){"use strict";var t=_a.TweenJS=_a.TweenJS||{};t.version="0.6.2",t.buildDate="Thu, 26 Nov 2015 20:44:31 GMT"}(),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e._b=t()}}(function(){return function t(e,i,n){function r(o,a){if(!i[o]){if(!e[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[o]={exports:{}};e[o][0].call(h.exports,function(t){var i=e[o][1][t];return r(i?i:t)},h,h.exports,t,e,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,i){var n={};e.exports=n;var r=t("../geometry/Vertices"),s=t("../geometry/Vector"),o=t("../core/Sleeping"),a=(t("../render/Render"),t("../core/Common")),l=t("../geometry/Bounds"),c=t("../geometry/Axes");!function(){n._inertiaScale=4,n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,n.create=function(e){var i={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:r.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:0}},n=a.extend(i,e);return t(n,e),n},n.nextGroup=function(t){return t?n._nextNonCollidingGroupId--:n._nextCollidingGroupId++},n.nextCategory=function(){return n._nextCategory=n._nextCategory<<1,n._nextCategory};var t=function(t,e){e=e||{},n.set(t,{bounds:t.bounds||l.create(t.vertices),positionPrev:t.positionPrev||s.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),r.rotate(t.vertices,t.angle,t.position),c.rotate(t.axes,t.angle),l.update(t.bounds,t.vertices,t.velocity),n.set(t,{axes:e.axes||t.axes,area:e.area||t.area,mass:e.mass||t.mass,inertia:e.inertia||t.inertia});var i=t.isStatic?"#2e2b44":a.choose(["#006BA6","#0496FF","#FFBC42","#D81159","#8F2D56"]),o=a.shadeColor(i,-20);t.render.fillStyle=t.render.fillStyle||i,t.render.strokeStyle=t.render.strokeStyle||o,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};n.set=function(t,e,i){var r;"string"==typeof e&&(r=e,e={},e[r]=i);for(r in e)if(i=e[r],e.hasOwnProperty(r))switch(r){case"isStatic":n.setStatic(t,i);break;case"isSleeping":o.set(t,i);break;case"mass":n.setMass(t,i);break;case"density":n.setDensity(t,i);break;case"inertia":n.setInertia(t,i);break;case"vertices":n.setVertices(t,i);break;case"position":n.setPosition(t,i);break;case"angle":n.setAngle(t,i);break;case"velocity":n.setVelocity(t,i);break;case"angularVelocity":n.setAngularVelocity(t,i);break;case"parts":n.setParts(t,i);break;default:t[r]=i}},n.setStatic=function(t,e){for(var i=0;i<t.parts.length;i++){var n=t.parts[i];n.isStatic=e,e?(n._original={restitution:n.restitution,friction:n.friction,mass:n.mass,inertia:n.inertia,density:n.density,inverseMass:n.inverseMass,inverseInertia:n.inverseInertia},n.restitution=0,n.friction=1,n.mass=n.inertia=n.density=1/0,n.inverseMass=n.inverseInertia=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.angularVelocity=0,n.speed=0,n.angularSpeed=0,n.motion=0):n._original&&(n.restitution=n._original.restitution,n.friction=n._original.friction,n.mass=n._original.mass,n.inertia=n._original.inertia,n.density=n._original.density,n.inverseMass=n._original.inverseMass,n.inverseInertia=n._original.inverseInertia,delete n._original)}},n.setMass=function(t,e){t.mass=e,t.inverseMass=1/t.mass,t.density=t.mass/t.area},n.setDensity=function(t,e){n.setMass(t,e*t.area),t.density=e},n.setInertia=function(t,e){t.inertia=e,t.inverseInertia=1/t.inertia},n.setVertices=function(t,e){e[0].body===t?t.vertices=e:t.vertices=r.create(e,t),t.axes=c.fromVertices(t.vertices),t.area=r.area(t.vertices),n.setMass(t,t.density*t.area);var i=r.centre(t.vertices);r.translate(t.vertices,i,-1),n.setInertia(t,n._inertiaScale*r.inertia(t.vertices,t.mass)),r.translate(t.vertices,t.position),l.update(t.bounds,t.vertices,t.velocity)},n.setParts=function(t,i,s){var o;for(i=i.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,o=0;o<i.length;o++){var a=i[o];a!==t&&(a.parent=t,t.parts.push(a))}if(1!==t.parts.length){if(s="undefined"==typeof s||s){var l=[];for(o=0;o<i.length;o++)l=l.concat(i[o].vertices);r.clockwiseSort(l);var c=r.hull(l),h=r.centre(c);n.setVertices(t,c),r.translate(t.vertices,h)}var u=e(t);t.area=u.area,t.parent=t,t.position.x=u.centre.x,t.position.y=u.centre.y,t.positionPrev.x=u.centre.x,t.positionPrev.y=u.centre.y,n.setMass(t,u.mass),n.setInertia(t,u.inertia),n.setPosition(t,u.centre)}},n.setPosition=function(t,e){var i=s.sub(e,t.position);t.positionPrev.x+=i.x,t.positionPrev.y+=i.y;for(var n=0;n<t.parts.length;n++){var o=t.parts[n];o.position.x+=i.x,o.position.y+=i.y,r.translate(o.vertices,i),l.update(o.bounds,o.vertices,t.velocity)}},n.setAngle=function(t,e){var i=e-t.angle;t.anglePrev+=i;for(var n=0;n<t.parts.length;n++){var o=t.parts[n];o.angle+=i,r.rotate(o.vertices,i,t.position),c.rotate(o.axes,i),l.update(o.bounds,o.vertices,t.velocity),n>0&&s.rotateAbout(o.position,i,t.position,o.position)}},n.setVelocity=function(t,e){t.positionPrev.x=t.position.x-e.x,t.positionPrev.y=t.position.y-e.y,t.velocity.x=e.x,t.velocity.y=e.y,t.speed=s.magnitude(t.velocity)},n.setAngularVelocity=function(t,e){t.anglePrev=t.angle-e,t.angularVelocity=e,t.angularSpeed=Math.abs(t.angularVelocity)},n.translate=function(t,e){n.setPosition(t,s.add(t.position,e))},n.rotate=function(t,e){n.setAngle(t,t.angle+e)},n.scale=function(t,i,s,o){for(var a=0;a<t.parts.length;a++){var h=t.parts[a];r.scale(h.vertices,i,s,t.position),h.axes=c.fromVertices(h.vertices),t.isStatic||(h.area=r.area(h.vertices),n.setMass(h,t.density*h.area),r.translate(h.vertices,{x:-h.position.x,y:-h.position.y}),n.setInertia(h,r.inertia(h.vertices,h.mass)),r.translate(h.vertices,{x:h.position.x,y:h.position.y})),l.update(h.bounds,h.vertices,t.velocity)}if(t.circleRadius&&(i===s?t.circleRadius*=i:t.circleRadius=null),!t.isStatic){var u=e(t);t.area=u.area,n.setMass(t,u.mass),n.setInertia(t,u.inertia)}},n.update=function(t,e,i,n){var o=Math.pow(e*i*t.timeScale,2),a=1-t.frictionAir*i*t.timeScale,h=t.position.x-t.positionPrev.x,u=t.position.y-t.positionPrev.y;t.velocity.x=h*a*n+t.force.x/t.mass*o,t.velocity.y=u*a*n+t.force.y/t.mass*o,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*a*n+t.torque/t.inertia*o,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=s.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var d=0;d<t.parts.length;d++){var p=t.parts[d];r.translate(p.vertices,t.velocity),d>0&&(p.position.x+=t.velocity.x,p.position.y+=t.velocity.y),0!==t.angularVelocity&&(r.rotate(p.vertices,t.angularVelocity,t.position),c.rotate(p.axes,t.angularVelocity),d>0&&s.rotateAbout(p.position,t.angularVelocity,t.position,p.position)),l.update(p.bounds,p.vertices,t.velocity)}},n.applyForce=function(t,e,i){t.force.x+=i.x,t.force.y+=i.y;var n={x:e.x-t.position.x,y:e.y-t.position.y};t.torque+=n.x*i.y-n.y*i.x};var e=function(t){for(var e={mass:0,area:0,inertia:0,centre:{x:0,y:0}},i=1===t.parts.length?0:1;i<t.parts.length;i++){var n=t.parts[i];e.mass+=n.mass,e.area+=n.area,e.inertia+=n.inertia,e.centre=s.add(e.centre,s.mult(n.position,n.mass!==1/0?n.mass:1))}return e.centre=s.div(e.centre,e.mass!==1/0?e.mass:t.parts.length),e}}()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31}],2:[function(t,e,i){var n={};e.exports=n;var r=t("../core/Events"),s=t("../core/Common"),o=t("./Body");!function(){n.create=function(t){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},t)},n.setModified=function(t,e,i,r){if(t.isModified=e,i&&t.parent&&n.setModified(t.parent,e,i,r),r)for(var s=0;s<t.composites.length;s++){var o=t.composites[s];n.setModified(o,e,i,r)}},n.add=function(t,e){var i=[].concat(e);r.trigger(t,"beforeAdd",{object:e});for(var o=0;o<i.length;o++){var a=i[o];switch(a.type){case"body":if(a.parent!==a){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}n.addBody(t,a);break;case"constraint":n.addConstraint(t,a);break;case"composite":n.addComposite(t,a);break;case"mouseConstraint":n.addConstraint(t,a.constraint)}}return r.trigger(t,"afterAdd",{object:e}),t},n.remove=function(t,e,i){var s=[].concat(e);r.trigger(t,"beforeRemove",{object:e});for(var o=0;o<s.length;o++){var a=s[o];switch(a.type){case"body":n.removeBody(t,a,i);break;case"constraint":n.removeConstraint(t,a,i);break;case"composite":n.removeComposite(t,a,i);break;case"mouseConstraint":n.removeConstraint(t,a.constraint)}}return r.trigger(t,"afterRemove",{object:e}),t},n.addComposite=function(t,e){return t.composites.push(e),e.parent=t,n.setModified(t,!0,!0,!1),t},n.removeComposite=function(t,e,i){var r=s.indexOf(t.composites,e);if(r!==-1&&(n.removeCompositeAt(t,r),n.setModified(t,!0,!0,!1)),i)for(var o=0;o<t.composites.length;o++)n.removeComposite(t.composites[o],e,!0);return t},n.removeCompositeAt=function(t,e){return t.composites.splice(e,1),n.setModified(t,!0,!0,!1),t},n.addBody=function(t,e){return t.bodies.push(e),n.setModified(t,!0,!0,!1),t},n.removeBody=function(t,e,i){var r=s.indexOf(t.bodies,e);if(r!==-1&&(n.removeBodyAt(t,r),n.setModified(t,!0,!0,!1)),i)for(var o=0;o<t.composites.length;o++)n.removeBody(t.composites[o],e,!0);return t},n.removeBodyAt=function(t,e){return t.bodies.splice(e,1),n.setModified(t,!0,!0,!1),t},n.addConstraint=function(t,e){return t.constraints.push(e),n.setModified(t,!0,!0,!1),t},n.removeConstraint=function(t,e,i){var r=s.indexOf(t.constraints,e);if(r!==-1&&n.removeConstraintAt(t,r),i)for(var o=0;o<t.composites.length;o++)n.removeConstraint(t.composites[o],e,!0);return t},n.removeConstraintAt=function(t,e){return t.constraints.splice(e,1),n.setModified(t,!0,!0,!1),t},n.clear=function(t,e,i){if(i)for(var r=0;r<t.composites.length;r++)n.clear(t.composites[r],e,!0);return e?t.bodies=t.bodies.filter(function(t){return t.isStatic}):t.bodies.length=0,t.constraints.length=0,t.composites.length=0,n.setModified(t,!0,!0,!1),t},n.allBodies=function(t){for(var e=[].concat(t.bodies),i=0;i<t.composites.length;i++)e=e.concat(n.allBodies(t.composites[i]));return e},n.allConstraints=function(t){for(var e=[].concat(t.constraints),i=0;i<t.composites.length;i++)e=e.concat(n.allConstraints(t.composites[i]));return e},n.allComposites=function(t){for(var e=[].concat(t.composites),i=0;i<t.composites.length;i++)e=e.concat(n.allComposites(t.composites[i]));return e},n.get=function(t,e,i){var r,s;switch(i){case"body":r=n.allBodies(t);break;case"constraint":r=n.allConstraints(t);break;case"composite":r=n.allComposites(t).concat(t)}return r?(s=r.filter(function(t){return t.id.toString()===e.toString()}),0===s.length?null:s[0]):null},n.move=function(t,e,i){return n.remove(t,e),n.add(i,e),t},n.rebase=function(t){for(var e=n.allBodies(t).concat(n.allConstraints(t)).concat(n.allComposites(t)),i=0;i<e.length;i++)e[i].id=s.nextId();return n.setModified(t,!0,!0,!1),t},n.translate=function(t,e,i){for(var r=i?n.allBodies(t):t.bodies,s=0;s<r.length;s++)o.translate(r[s],e);return n.setModified(t,!0,!0,!1),t},n.rotate=function(t,e,i,r){for(var s=Math.cos(e),a=Math.sin(e),l=r?n.allBodies(t):t.bodies,c=0;c<l.length;c++){var h=l[c],u=h.position.x-i.x,d=h.position.y-i.y;o.setPosition(h,{x:i.x+(u*s-d*a),y:i.y+(u*a+d*s)}),o.rotate(h,e)}return n.setModified(t,!0,!0,!1),t},n.scale=function(t,e,i,r,s){for(var a=s?n.allBodies(t):t.bodies,l=0;l<a.length;l++){var c=a[l],h=c.position.x-r.x,u=c.position.y-r.y;o.setPosition(c,{x:r.x+h*e,y:r.y+u*i}),o.scale(c,e,i)}return n.setModified(t,!0,!0,!1),t}}()},{"../core/Common":14,"../core/Events":16,"./Body":1}],3:[function(t,e,i){var n={};e.exports=n;var r=t("./Composite"),s=(t("../constraint/Constraint"),t("../core/Common"));!function(){n.create=function(t){var e=r.create(),i={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-(1/0),y:-(1/0)},max:{x:1/0,y:1/0}}};return s.extend(e,i,t)}}()},{"../constraint/Constraint":12,"../core/Common":14,"./Composite":2}],4:[function(t,e,i){var n={};e.exports=n,function(){n.create=function(t){return{id:n.id(t),vertex:t,normalImpulse:0,tangentImpulse:0}},n.id=function(t){return t.body.id+"_"+t.index}}()},{}],5:[function(t,e,i){var n={};e.exports=n;var r=t("./SAT"),s=t("./Pair"),o=t("../geometry/Bounds");!function(){n.collisions=function(t,e){for(var i=[],a=e.pairs.table,l=0;l<t.length;l++){var c=t[l][0],h=t[l][1];if((!c.isStatic&&!c.isSleeping||!h.isStatic&&!h.isSleeping)&&n.canCollide(c.collisionFilter,h.collisionFilter)&&o.overlaps(c.bounds,h.bounds))for(var u=c.parts.length>1?1:0;u<c.parts.length;u++)for(var d=c.parts[u],p=h.parts.length>1?1:0;p<h.parts.length;p++){var f=h.parts[p];if(d===c&&f===h||o.overlaps(d.bounds,f.bounds)){var v,m=s.id(d,f),g=a[m];v=g&&g.isActive?g.collision:null;var y=r.collides(d,f,v);y.collided&&i.push(y)}}}return i},n.canCollide=function(t,e){return t.group===e.group&&0!==t.group?t.group>0:0!==(t.mask&e.category)&&0!==(e.mask&t.category)}}()},{"../geometry/Bounds":26,"./Pair":7,"./SAT":11}],6:[function(t,e,i){var n={};e.exports=n;var r=t("./Pair"),s=t("./Detector"),o=t("../core/Common");!function(){n.create=function(t){var e={controller:n,detector:s.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(e,t)},n.update=function(i,n,r,s){var o,d,p,f,v,m=r.world,g=i.buckets,y=!1;for(o=0;o<n.length;o++){var _=n[o];if((!_.isSleeping||s)&&!(_.bounds.max.x<m.bounds.min.x||_.bounds.min.x>m.bounds.max.x||_.bounds.max.y<m.bounds.min.y||_.bounds.min.y>m.bounds.max.y)){var x=e(i,_);if(!_.region||x.id!==_.region.id||s){_.region&&!s||(_.region=x);var b=t(x,_.region);for(d=b.startCol;d<=b.endCol;d++)for(p=b.startRow;p<=b.endRow;p++){v=a(d,p),f=g[v];var w=d>=x.startCol&&d<=x.endCol&&p>=x.startRow&&p<=x.endRow,S=d>=_.region.startCol&&d<=_.region.endCol&&p>=_.region.startRow&&p<=_.region.endRow;!w&&S&&S&&f&&h(i,f,_),(_.region===x||w&&!S||s)&&(f||(f=l(g,v)),c(i,f,_))}_.region=x,y=!0}}}y&&(i.pairsList=u(i))},n.clear=function(t){t.buckets={},t.pairs={},t.pairsList=[]};var t=function(t,e){var n=Math.min(t.startCol,e.startCol),r=Math.max(t.endCol,e.endCol),s=Math.min(t.startRow,e.startRow),o=Math.max(t.endRow,e.endRow);return i(n,r,s,o)},e=function(t,e){var n=e.bounds,r=Math.floor(n.min.x/t.bucketWidth),s=Math.floor(n.max.x/t.bucketWidth),o=Math.floor(n.min.y/t.bucketHeight),a=Math.floor(n.max.y/t.bucketHeight);return i(r,s,o,a)},i=function(t,e,i,n){return{id:t+","+e+","+i+","+n,startCol:t,endCol:e,startRow:i,endRow:n}},a=function(t,e){return"C"+t+"R"+e},l=function(t,e){var i=t[e]=[];return i},c=function(t,e,i){for(var n=0;n<e.length;n++){var s=e[n];if(!(i.id===s.id||i.isStatic&&s.isStatic)){var o=r.id(i,s),a=t.pairs[o];a?a[2]+=1:t.pairs[o]=[i,s,1]}}e.push(i)},h=function(t,e,i){e.splice(o.indexOf(e,i),1);for(var n=0;n<e.length;n++){var s=e[n],a=r.id(i,s),l=t.pairs[a];l&&(l[2]-=1)}},u=function(t){var e,i,n=[];e=o.keys(t.pairs);for(var r=0;r<e.length;r++)i=t.pairs[e[r]],i[2]>0?n.push(i):delete t.pairs[e[r]];return n}}()},{"../core/Common":14,"./Detector":5,"./Pair":7}],7:[function(t,e,i){var n={};e.exports=n;var r=t("./Contact");!function(){n.create=function(t,e){var i=t.bodyA,r=t.bodyB,s=t.parentA,o=t.parentB,a={id:n.id(i,r),bodyA:i,bodyB:r,contacts:{},activeContacts:[],separation:0,isActive:!0,isSensor:i.isSensor||r.isSensor,timeCreated:e,timeUpdated:e,inverseMass:s.inverseMass+o.inverseMass,friction:Math.min(s.friction,o.friction),frictionStatic:Math.max(s.frictionStatic,o.frictionStatic),restitution:Math.max(s.restitution,o.restitution),slop:Math.max(s.slop,o.slop)};return n.update(a,t,e),a},n.update=function(t,e,i){var s=t.contacts,o=e.supports,a=t.activeContacts,l=e.parentA,c=e.parentB;if(t.collision=e,t.inverseMass=l.inverseMass+c.inverseMass,t.friction=Math.min(l.friction,c.friction),t.frictionStatic=Math.max(l.frictionStatic,c.frictionStatic),t.restitution=Math.max(l.restitution,c.restitution),t.slop=Math.max(l.slop,c.slop),a.length=0,e.collided){for(var h=0;h<o.length;h++){var u=o[h],d=r.id(u),p=s[d];p?a.push(p):a.push(s[d]=r.create(u))}t.separation=e.depth,n.setActive(t,!0,i)}else t.isActive===!0&&n.setActive(t,!1,i)},n.setActive=function(t,e,i){e?(t.isActive=!0,t.timeUpdated=i):(t.isActive=!1,t.activeContacts.length=0)},n.id=function(t,e){return t.id<e.id?"A"+t.id+"B"+e.id:"A"+e.id+"B"+t.id}}()},{"./Contact":4}],8:[function(t,e,i){var n={};e.exports=n;var r=t("./Pair"),s=t("../core/Common");
!function(){var t=1e3;n.create=function(t){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},n.update=function(t,e,i){var n,o,a,l,c=t.list,h=t.table,u=t.collisionStart,d=t.collisionEnd,p=t.collisionActive,f=[];for(u.length=0,d.length=0,p.length=0,l=0;l<e.length;l++)n=e[l],n.collided&&(o=r.id(n.bodyA,n.bodyB),f.push(o),a=h[o],a?(a.isActive?p.push(a):u.push(a),r.update(a,n,i)):(a=r.create(n,i),h[o]=a,u.push(a),c.push(a)));for(l=0;l<c.length;l++)a=c[l],a.isActive&&s.indexOf(f,a.id)===-1&&(r.setActive(a,!1,i),d.push(a))},n.removeOld=function(e,i){var n,r,s,o,a=e.list,l=e.table,c=[];for(o=0;o<a.length;o++)n=a[o],r=n.collision,r.bodyA.isSleeping||r.bodyB.isSleeping?n.timeUpdated=i:i-n.timeUpdated>t&&c.push(o);for(o=0;o<c.length;o++)s=c[o]-o,n=a[s],delete l[n.id],a.splice(s,1)},n.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}}()},{"../core/Common":14,"./Pair":7}],9:[function(t,e,i){var n={};e.exports=n;var r=t("../geometry/Vector"),s=t("./SAT"),o=t("../geometry/Bounds"),a=t("../factory/Bodies"),l=t("../geometry/Vertices");!function(){n.ray=function(t,e,i,n){n=n||1e-100;for(var l=r.angle(e,i),c=r.magnitude(r.sub(e,i)),h=.5*(i.x+e.x),u=.5*(i.y+e.y),d=a.rectangle(h,u,c,n,{angle:l}),p=[],f=0;f<t.length;f++){var v=t[f];if(o.overlaps(v.bounds,d.bounds))for(var m=1===v.parts.length?0:1;m<v.parts.length;m++){var g=v.parts[m];if(o.overlaps(g.bounds,d.bounds)){var y=s.collides(g,d);if(y.collided){y.body=y.bodyA=y.bodyB=v,p.push(y);break}}}}return p},n.region=function(t,e,i){for(var n=[],r=0;r<t.length;r++){var s=t[r],a=o.overlaps(s.bounds,e);(a&&!i||!a&&i)&&n.push(s)}return n},n.point=function(t,e){for(var i=[],n=0;n<t.length;n++){var r=t[n];if(o.contains(r.bounds,e))for(var s=1===r.parts.length?0:1;s<r.parts.length;s++){var a=r.parts[s];if(o.contains(a.bounds,e)&&l.contains(a.vertices,e)){i.push(r);break}}}return i}}()},{"../factory/Bodies":23,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"./SAT":11}],10:[function(t,e,i){var n={};e.exports=n;var r=t("../geometry/Vertices"),s=t("../geometry/Vector"),o=t("../core/Common"),a=t("../geometry/Bounds");!function(){n._restingThresh=4,n._restingThreshTangent=6,n._positionDampen=.9,n._positionWarming=.8,n._frictionNormalMultiplier=5,n.preSolvePosition=function(t){var e,i,n;for(e=0;e<t.length;e++)i=t[e],i.isActive&&(n=i.activeContacts.length,i.collision.parentA.totalContacts+=n,i.collision.parentB.totalContacts+=n)},n.solvePosition=function(t,e){var i,r,o,a,l,c,h,u,d,p=s._temp[0],f=s._temp[1],v=s._temp[2],m=s._temp[3];for(i=0;i<t.length;i++)r=t[i],r.isActive&&!r.isSensor&&(o=r.collision,a=o.parentA,l=o.parentB,c=o.normal,h=s.sub(s.add(l.positionImpulse,l.position,p),s.add(a.positionImpulse,s.sub(l.position,o.penetration,f),v),m),r.separation=s.dot(c,h));for(i=0;i<t.length;i++)r=t[i],!r.isActive||r.isSensor||r.separation<0||(o=r.collision,a=o.parentA,l=o.parentB,c=o.normal,d=(r.separation-r.slop)*e,(a.isStatic||l.isStatic)&&(d*=2),a.isStatic||a.isSleeping||(u=n._positionDampen/a.totalContacts,a.positionImpulse.x+=c.x*d*u,a.positionImpulse.y+=c.y*d*u),l.isStatic||l.isSleeping||(u=n._positionDampen/l.totalContacts,l.positionImpulse.x-=c.x*d*u,l.positionImpulse.y-=c.y*d*u))},n.postSolvePosition=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.totalContacts=0,0!==i.positionImpulse.x||0!==i.positionImpulse.y){for(var o=0;o<i.parts.length;o++){var l=i.parts[o];r.translate(l.vertices,i.positionImpulse),a.update(l.bounds,l.vertices,i.velocity),l.position.x+=i.positionImpulse.x,l.position.y+=i.positionImpulse.y}i.positionPrev.x+=i.positionImpulse.x,i.positionPrev.y+=i.positionImpulse.y,s.dot(i.positionImpulse,i.velocity)<0?(i.positionImpulse.x=0,i.positionImpulse.y=0):(i.positionImpulse.x*=n._positionWarming,i.positionImpulse.y*=n._positionWarming)}}},n.preSolveVelocity=function(t){var e,i,n,r,o,a,l,c,h,u,d,p,f,v,m=s._temp[0],g=s._temp[1];for(e=0;e<t.length;e++)if(n=t[e],n.isActive&&!n.isSensor)for(r=n.activeContacts,o=n.collision,a=o.parentA,l=o.parentB,c=o.normal,h=o.tangent,i=0;i<r.length;i++)u=r[i],d=u.vertex,p=u.normalImpulse,f=u.tangentImpulse,0===p&&0===f||(m.x=c.x*p+h.x*f,m.y=c.y*p+h.y*f,a.isStatic||a.isSleeping||(v=s.sub(d,a.position,g),a.positionPrev.x+=m.x*a.inverseMass,a.positionPrev.y+=m.y*a.inverseMass,a.anglePrev+=s.cross(v,m)*a.inverseInertia),l.isStatic||l.isSleeping||(v=s.sub(d,l.position,g),l.positionPrev.x-=m.x*l.inverseMass,l.positionPrev.y-=m.y*l.inverseMass,l.anglePrev-=s.cross(v,m)*l.inverseInertia))},n.solveVelocity=function(t,e){for(var i=e*e,r=s._temp[0],a=s._temp[1],l=s._temp[2],c=s._temp[3],h=s._temp[4],u=s._temp[5],d=0;d<t.length;d++){var p=t[d];if(p.isActive&&!p.isSensor){var f=p.collision,v=f.parentA,m=f.parentB,g=f.normal,y=f.tangent,_=p.activeContacts,x=1/_.length;v.velocity.x=v.position.x-v.positionPrev.x,v.velocity.y=v.position.y-v.positionPrev.y,m.velocity.x=m.position.x-m.positionPrev.x,m.velocity.y=m.position.y-m.positionPrev.y,v.angularVelocity=v.angle-v.anglePrev,m.angularVelocity=m.angle-m.anglePrev;for(var b=0;b<_.length;b++){var w=_[b],S=w.vertex,T=s.sub(S,v.position,a),C=s.sub(S,m.position,l),P=s.add(v.velocity,s.mult(s.perp(T),v.angularVelocity),c),M=s.add(m.velocity,s.mult(s.perp(C),m.angularVelocity),h),E=s.sub(P,M,u),k=s.dot(g,E),A=s.dot(y,E),I=Math.abs(A),j=o.sign(A),O=(1+p.restitution)*k,B=o.clamp(p.separation+k,0,1)*n._frictionNormalMultiplier,D=A,L=1/0;I>p.friction*p.frictionStatic*B*i&&(L=I,D=o.clamp(p.friction*j*i,-L,L));var R=s.cross(T,g),F=s.cross(C,g),z=x/(v.inverseMass+m.inverseMass+v.inverseInertia*R*R+m.inverseInertia*F*F);if(O*=z,D*=z,k<0&&k*k>n._restingThresh*i)w.normalImpulse=0;else{var N=w.normalImpulse;w.normalImpulse=Math.min(w.normalImpulse+O,0),O=w.normalImpulse-N}if(A*A>n._restingThreshTangent*i)w.tangentImpulse=0;else{var V=w.tangentImpulse;w.tangentImpulse=o.clamp(w.tangentImpulse+D,-L,L),D=w.tangentImpulse-V}r.x=g.x*O+y.x*D,r.y=g.y*O+y.y*D,v.isStatic||v.isSleeping||(v.positionPrev.x+=r.x*v.inverseMass,v.positionPrev.y+=r.y*v.inverseMass,v.anglePrev+=s.cross(T,r)*v.inverseInertia),m.isStatic||m.isSleeping||(m.positionPrev.x-=r.x*m.inverseMass,m.positionPrev.y-=r.y*m.inverseMass,m.anglePrev-=s.cross(C,r)*m.inverseInertia)}}}}}()},{"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],11:[function(t,e,i){var n={};e.exports=n;var r=t("../geometry/Vertices"),s=t("../geometry/Vector");!function(){n.collides=function(e,n,o){var a,l,c,h,u=!1;if(o){var d=e.parent,p=n.parent,f=d.speed*d.speed+d.angularSpeed*d.angularSpeed+p.speed*p.speed+p.angularSpeed*p.angularSpeed;u=o&&o.collided&&f<.2,h=o}else h={collided:!1,bodyA:e,bodyB:n};if(o&&u){var v=h.axisBody,m=v===e?n:e,g=[v.axes[o.axisNumber]];if(c=t(v.vertices,m.vertices,g),h.reused=!0,c.overlap<=0)return h.collided=!1,h}else{if(a=t(e.vertices,n.vertices,e.axes),a.overlap<=0)return h.collided=!1,h;if(l=t(n.vertices,e.vertices,n.axes),l.overlap<=0)return h.collided=!1,h;a.overlap<l.overlap?(c=a,h.axisBody=e):(c=l,h.axisBody=n),h.axisNumber=c.axisNumber}h.bodyA=e.id<n.id?e:n,h.bodyB=e.id<n.id?n:e,h.collided=!0,h.depth=c.overlap,h.parentA=h.bodyA.parent,h.parentB=h.bodyB.parent,e=h.bodyA,n=h.bodyB,s.dot(c.axis,s.sub(n.position,e.position))<0?h.normal={x:c.axis.x,y:c.axis.y}:h.normal={x:-c.axis.x,y:-c.axis.y},h.tangent=s.perp(h.normal),h.penetration=h.penetration||{},h.penetration.x=h.normal.x*h.depth,h.penetration.y=h.normal.y*h.depth;var y=i(e,n,h.normal),_=[];if(r.contains(e.vertices,y[0])&&_.push(y[0]),r.contains(e.vertices,y[1])&&_.push(y[1]),_.length<2){var x=i(n,e,s.neg(h.normal));r.contains(n.vertices,x[0])&&_.push(x[0]),_.length<2&&r.contains(n.vertices,x[1])&&_.push(x[1])}return _.length<1&&(_=[y[0]]),h.supports=_,h};var t=function(t,i,n){for(var r,o,a=s._temp[0],l=s._temp[1],c={overlap:Number.MAX_VALUE},h=0;h<n.length;h++){if(o=n[h],e(a,t,o),e(l,i,o),r=Math.min(a.max-l.min,l.max-a.min),r<=0)return c.overlap=r,c;r<c.overlap&&(c.overlap=r,c.axis=o,c.axisNumber=h)}return c},e=function(t,e,i){for(var n=s.dot(e[0],i),r=n,o=1;o<e.length;o+=1){var a=s.dot(e[o],i);a>r?r=a:a<n&&(n=a)}t.min=n,t.max=r},i=function(t,e,i){for(var n,r,o,a,l=Number.MAX_VALUE,c=s._temp[0],h=e.vertices,u=t.position,d=0;d<h.length;d++)r=h[d],c.x=r.x-u.x,c.y=r.y-u.y,n=-s.dot(i,c),n<l&&(l=n,o=r);var p=o.index-1>=0?o.index-1:h.length-1;r=h[p],c.x=r.x-u.x,c.y=r.y-u.y,l=-s.dot(i,c),a=r;var f=(o.index+1)%h.length;return r=h[f],c.x=r.x-u.x,c.y=r.y-u.y,n=-s.dot(i,c),n<l&&(a=r),[o,a]}}()},{"../geometry/Vector":28,"../geometry/Vertices":29}],12:[function(t,e,i){var n={};e.exports=n;var r=t("../geometry/Vertices"),s=t("../geometry/Vector"),o=t("../core/Sleeping"),a=t("../geometry/Bounds"),l=t("../geometry/Axes"),c=t("../core/Common");!function(){var t=1e-6,e=.001;n.create=function(e){var i=e;i.bodyA&&!i.pointA&&(i.pointA={x:0,y:0}),i.bodyB&&!i.pointB&&(i.pointB={x:0,y:0});var n=i.bodyA?s.add(i.bodyA.position,i.pointA):i.pointA,r=i.bodyB?s.add(i.bodyB.position,i.pointB):i.pointB,o=s.magnitude(s.sub(n,r));i.length=i.length||o||t;var a={visible:!0,lineWidth:2,strokeStyle:"#ffffff"};return i.render=c.extend(a,i.render),i.id=i.id||c.nextId(),i.label=i.label||"Constraint",i.type="constraint",i.stiffness=i.stiffness||1,i.angularStiffness=i.angularStiffness||0,i.angleA=i.bodyA?i.bodyA.angle:i.angleA,i.angleB=i.bodyB?i.bodyB.angle:i.angleB,i.plugin={},i},n.solveAll=function(t,e){for(var i=0;i<t.length;i++)n.solve(t[i],e)},n.solve=function(i,n){var r=i.bodyA,o=i.bodyB,a=i.pointA,l=i.pointB;r&&!r.isStatic&&(i.pointA=s.rotate(a,r.angle-i.angleA),i.angleA=r.angle),o&&!o.isStatic&&(i.pointB=s.rotate(l,o.angle-i.angleB),i.angleB=o.angle);var c=a,h=l;if(r&&(c=s.add(r.position,a)),o&&(h=s.add(o.position,l)),c&&h){var u=s.sub(c,h),d=s.magnitude(u);0===d&&(d=t);var p=(d-i.length)/d,f=s.div(u,d),v=s.mult(u,.5*p*i.stiffness*n*n);if(!(Math.abs(1-d/i.length)<e*n)){var m,g,y,_,x,b,w,S;r&&!r.isStatic?(y={x:c.x-r.position.x+v.x,y:c.y-r.position.y+v.y},r.velocity.x=r.position.x-r.positionPrev.x,r.velocity.y=r.position.y-r.positionPrev.y,r.angularVelocity=r.angle-r.anglePrev,m=s.add(r.velocity,s.mult(s.perp(y),r.angularVelocity)),x=s.dot(y,f),w=r.inverseMass+r.inverseInertia*x*x):(m={x:0,y:0},w=r?r.inverseMass:0),o&&!o.isStatic?(_={x:h.x-o.position.x-v.x,y:h.y-o.position.y-v.y},o.velocity.x=o.position.x-o.positionPrev.x,o.velocity.y=o.position.y-o.positionPrev.y,o.angularVelocity=o.angle-o.anglePrev,g=s.add(o.velocity,s.mult(s.perp(_),o.angularVelocity)),b=s.dot(_,f),S=o.inverseMass+o.inverseInertia*b*b):(g={x:0,y:0},S=o?o.inverseMass:0);var T=s.sub(g,m),C=s.dot(f,T)/(w+S);C>0&&(C=0);var P,M={x:f.x*C,y:f.y*C};r&&!r.isStatic&&(P=s.cross(y,M)*r.inverseInertia*(1-i.angularStiffness),r.constraintImpulse.x-=v.x,r.constraintImpulse.y-=v.y,r.constraintImpulse.angle+=P,r.position.x-=v.x,r.position.y-=v.y,r.angle+=P),o&&!o.isStatic&&(P=s.cross(_,M)*o.inverseInertia*(1-i.angularStiffness),o.constraintImpulse.x+=v.x,o.constraintImpulse.y+=v.y,o.constraintImpulse.angle-=P,o.position.x+=v.x,o.position.y+=v.y,o.angle-=P)}}},n.postSolveAll=function(t){for(var e=0;e<t.length;e++){var i=t[e],n=i.constraintImpulse;if(0!==n.x||0!==n.y||0!==n.angle){o.set(i,!1);for(var c=0;c<i.parts.length;c++){var h=i.parts[c];r.translate(h.vertices,n),c>0&&(h.position.x+=n.x,h.position.y+=n.y),0!==n.angle&&(r.rotate(h.vertices,n.angle,i.position),l.rotate(h.axes,n.angle),c>0&&s.rotateAbout(h.position,n.angle,i.position,h.position)),a.update(h.bounds,h.vertices,i.velocity)}n.angle=0,n.x=0,n.y=0}}}}()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],13:[function(t,e,i){var n={};e.exports=n;var r=t("../geometry/Vertices"),s=t("../core/Sleeping"),o=t("../core/Mouse"),a=t("../core/Events"),l=t("../collision/Detector"),c=t("./Constraint"),h=t("../body/Composite"),u=t("../core/Common"),d=t("../geometry/Bounds");!function(){n.create=function(e,i){var r=(e?e.mouse:null)||(i?i.mouse:null);r||(e&&e.render&&e.render.canvas?r=o.create(e.render.canvas):i&&i.element?r=o.create(i.element):(r=o.create(),u.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var s=c.create({label:"Mouse Constraint",pointA:r.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),l={type:"mouseConstraint",mouse:r,element:null,body:null,constraint:s,collisionFilter:{category:1,mask:4294967295,group:0}},d=u.extend(l,i);return a.on(e,"beforeUpdate",function(){var i=h.allBodies(e.world);n.update(d,i),t(d)}),d},n.update=function(t,e){var i=t.mouse,n=t.constraint,o=t.body;if(0===i.button){if(n.bodyB)s.set(n.bodyB,!1),n.pointA=i.position;else for(var c=0;c<e.length;c++)if(o=e[c],d.contains(o.bounds,i.position)&&l.canCollide(o.collisionFilter,t.collisionFilter))for(var h=o.parts.length>1?1:0;h<o.parts.length;h++){var u=o.parts[h];if(r.contains(u.vertices,i.position)){n.pointA=i.position,n.bodyB=t.body=o,n.pointB={x:i.position.x-o.position.x,y:i.position.y-o.position.y},n.angleB=o.angle,s.set(o,!1),a.trigger(t,"startdrag",{mouse:i,body:o});break}}}else n.bodyB=t.body=null,n.pointB=null,o&&a.trigger(t,"enddrag",{mouse:i,body:o})};var t=function(t){var e=t.mouse,i=e.sourceEvents;i.mousemove&&a.trigger(t,"mousemove",{mouse:e}),i.mousedown&&a.trigger(t,"mousedown",{mouse:e}),i.mouseup&&a.trigger(t,"mouseup",{mouse:e}),o.clearSourceEvents(e)}}()},{"../body/Composite":2,"../collision/Detector":5,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../core/Sleeping":22,"../geometry/Bounds":26,"../geometry/Vertices":29,"./Constraint":12}],14:[function(t,e,i){var n={};e.exports=n,function(){n._nextId=0,n._seed=0,n.extend=function(t,e){var i,r;"boolean"==typeof e?(i=2,r=e):(i=1,r=!0);for(var s=i;s<arguments.length;s++){var o=arguments[s];if(o)for(var a in o)r&&o[a]&&o[a].constructor===Object?t[a]&&t[a].constructor!==Object?t[a]=o[a]:(t[a]=t[a]||{},n.extend(t[a],r,o[a])):t[a]=o[a]}return t},n.clone=function(t,e){return n.extend({},e,t)},n.keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)e.push(i);return e},n.values=function(t){var e=[];if(Object.keys){for(var i=Object.keys(t),n=0;n<i.length;n++)e.push(t[i[n]]);return e}for(var r in t)e.push(t[r]);return e},n.get=function(t,e,i,n){e=e.split(".").slice(i,n);for(var r=0;r<e.length;r+=1)t=t[e[r]];return t},n.set=function(t,e,i,r,s){var o=e.split(".").slice(r,s);return n.get(t,e,0,-1)[o[o.length-1]]=i,i},n.shadeColor=function(t,e){var i=parseInt(t.slice(1),16),n=Math.round(2.55*e),r=(i>>16)+n,s=(i>>8&255)+n,o=(255&i)+n;return"#"+(16777216+65536*(r<255?r<1?0:r:255)+256*(s<255?s<1?0:s:255)+(o<255?o<1?0:o:255)).toString(16).slice(1)},n.shuffle=function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(n.random()*(e+1)),r=t[e];t[e]=t[i],t[i]=r}return t},n.choose=function(t){return t[Math.floor(n.random()*t.length)]},n.isElement=function(t){try{return t instanceof HTMLElement}catch(e){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}},n.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},n.isFunction=function(t){return"function"==typeof t},n.isPlainObject=function(t){return"object"==typeof t&&t.constructor===Object},n.isString=function(t){return"[object String]"===toString.call(t)},n.clamp=function(t,e,i){return t<e?e:t>i?i:t},n.sign=function(t){return t<0?-1:1},n.now=function(){var t=window.performance||{};return t.now=function(){return t.now||t.webkitNow||t.msNow||t.oNow||t.mozNow||function(){return+new Date}}(),t.now()},n.random=function(e,i){return e="undefined"!=typeof e?e:0,i="undefined"!=typeof i?i:1,e+t()*(i-e)};var t=function(){return n._seed=(9301*n._seed+49297)%233280,n._seed/233280};n.colorToNumber=function(t){return t=t.replace("#",""),3==t.length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)},n.logLevel=1,n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.nextId=function(){return n._nextId++},n.indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},n.map=function(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n+=1)i.push(e(t[n]));return i},n.topologicalSort=function(t){var i=[],n=[],r=[];for(var s in t)n[s]||r[s]||e(s,n,r,t,i);return i};var e=function(t,i,n,r,s){var o=r[t]||[];n[t]=!0;for(var a=0;a<o.length;a+=1){var l=o[a];n[l]||i[l]||e(l,i,n,r,s)}n[t]=!1,i[t]=!0,s.push(t)};n.chain=function(){for(var t=[],e=0;e<arguments.length;e+=1){var i=arguments[e];i._chained?t.push.apply(t,i._chained):t.push(i)}var n=function(){for(var e,i=new Array(arguments.length),n=0,r=arguments.length;n<r;n++)i[n]=arguments[n];for(n=0;n<t.length;n+=1){var s=t[n].apply(e,i);"undefined"!=typeof s&&(e=s)}return e};return n._chained=t,n},n.chainPathBefore=function(t,e,i){return n.set(t,e,n.chain(i,n.get(t,e)))},n.chainPathAfter=function(t,e,i){return n.set(t,e,n.chain(n.get(t,e),i))}}()},{}],15:[function(t,e,i){var n={};e.exports=n;var r=t("../body/World"),s=t("./Sleeping"),o=t("../collision/Resolver"),a=t("../render/Render"),l=t("../collision/Pairs"),c=(t("./Metrics"),t("../collision/Grid")),h=t("./Events"),u=t("../body/Composite"),d=t("../constraint/Constraint"),p=t("./Common"),f=t("../body/Body");!function(){n.create=function(t,e){e=p.isElement(t)?e:t,t=p.isElement(t)?t:null,e=e||{},(t||e.render)&&p.warn("Engine.create: engine.render is deprecated (see docs)");var i={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:c}},n=p.extend(i,e);if(t||n.render){var s={element:t,controller:a};n.render=p.extend(s,n.render)}return n.render&&n.render.controller&&(n.render=n.render.controller.create(n.render)),n.render&&(n.render.engine=n),n.world=e.world||r.create(n.world),n.pairs=l.create(),n.broadphase=n.broadphase.controller.create(n.broadphase),n.metrics=n.metrics||{extended:!1},n},n.update=function(n,r,a){r=r||1e3/60,a=a||1;var c,p=n.world,f=n.timing,v=n.broadphase,m=[];f.timestamp+=r*f.timeScale;var g={timestamp:f.timestamp};h.trigger(n,"beforeUpdate",g);var y=u.allBodies(p),_=u.allConstraints(p);for(n.enableSleeping&&s.update(y,f.timeScale),e(y,p.gravity),i(y,r,f.timeScale,a,p.bounds),c=0;c<n.constraintIterations;c++)d.solveAll(_,f.timeScale);d.postSolveAll(y),v.controller?(p.isModified&&v.controller.clear(v),v.controller.update(v,y,n,p.isModified),m=v.pairsList):m=y,p.isModified&&u.setModified(p,!1,!1,!0);var x=v.detector(m,n),b=n.pairs,w=f.timestamp;for(l.update(b,x,w),l.removeOld(b,w),n.enableSleeping&&s.afterCollisions(b.list,f.timeScale),b.collisionStart.length>0&&h.trigger(n,"collisionStart",{pairs:b.collisionStart}),o.preSolvePosition(b.list),c=0;c<n.positionIterations;c++)o.solvePosition(b.list,f.timeScale);for(o.postSolvePosition(y),o.preSolveVelocity(b.list),c=0;c<n.velocityIterations;c++)o.solveVelocity(b.list,f.timeScale);return b.collisionActive.length>0&&h.trigger(n,"collisionActive",{pairs:b.collisionActive}),b.collisionEnd.length>0&&h.trigger(n,"collisionEnd",{pairs:b.collisionEnd}),t(y),h.trigger(n,"afterUpdate",g),n},n.merge=function(t,e){if(p.extend(t,e),e.world){t.world=e.world,n.clear(t);for(var i=u.allBodies(t.world),r=0;r<i.length;r++){var o=i[r];s.set(o,!1),o.id=p.nextId()}}},n.clear=function(t){var e=t.world;l.clear(t.pairs);var i=t.broadphase;if(i.controller){var n=u.allBodies(e);i.controller.clear(i),i.controller.update(i,n,t,!0)}};var t=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.force.x=0,i.force.y=0,i.torque=0}},e=function(t,e){var i="undefined"!=typeof e.scale?e.scale:.001;if((0!==e.x||0!==e.y)&&0!==i)for(var n=0;n<t.length;n++){var r=t[n];r.isStatic||r.isSleeping||(r.force.y+=r.mass*e.y*i,r.force.x+=r.mass*e.x*i)}},i=function(t,e,i,n,r){for(var s=0;s<t.length;s++){var o=t[s];o.isStatic||o.isSleeping||f.update(o,e,i,n)}}}()},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Grid":6,"../collision/Pairs":8,"../collision/Resolver":10,"../constraint/Constraint":12,"../render/Render":31,"./Common":14,"./Events":16,"./Metrics":18,"./Sleeping":22}],16:[function(t,e,i){var n={};e.exports=n;var r=t("./Common");!function(){n.on=function(t,e,i){for(var n,r=e.split(" "),s=0;s<r.length;s++)n=r[s],t.events=t.events||{},t.events[n]=t.events[n]||[],t.events[n].push(i);return i},n.off=function(t,e,i){if(!e)return void(t.events={});"function"==typeof e&&(i=e,e=r.keys(t.events).join(" "));for(var n=e.split(" "),s=0;s<n.length;s++){var o=t.events[n[s]],a=[];if(i&&o)for(var l=0;l<o.length;l++)o[l]!==i&&a.push(o[l]);t.events[n[s]]=a}},n.trigger=function(t,e,i){var n,s,o,a;if(t.events){i||(i={}),n=e.split(" ");for(var l=0;l<n.length;l++)if(s=n[l],o=t.events[s]){a=r.clone(i,!1),a.name=s,a.source=t;for(var c=0;c<o.length;c++)o[c].apply(t,[a])}}}}()},{"./Common":14}],17:[function(t,e,i){var n={};e.exports=n;var r=t("./Plugin"),s=t("./Common");!function(){n.name="matter-js",n.version="0.11.1-alpha",n.uses=[],n.used=[],n.use=function(){r.use(n,Array.prototype.slice.call(arguments))},n.before=function(t,e){return t=t.replace(/^_b./,""),s.chainPathBefore(n,t,e)},n.after=function(t,e){return t=t.replace(/^_b./,""),s.chainPathAfter(n,t,e)}}()},{"./Common":14,"./Plugin":20}],18:[function(t,e,i){},{"../body/Composite":2,"./Common":14}],19:[function(t,e,i){var n={};e.exports=n;var r=t("../core/Common");!function(){n.create=function(e){var i={};return e||r.log("Mouse.create: element was undefined, defaulting to document.body","warn"),i.element=e||document.body,i.absolute={x:0,y:0},i.position={x:0,y:0},i.mousedownPosition={x:0,y:0},i.mouseupPosition={x:0,y:0},i.offset={x:0,y:0},i.scale={x:1,y:1},i.wheelDelta=0,i.button=-1,i.pixelRatio=i.element.getAttribute("data-pixel-ratio")||1,i.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},i.mousemove=function(e){var n=t(e,i.element,i.pixelRatio),r=e.changedTouches;r&&(i.button=0,e.preventDefault()),i.absolute.x=n.x,i.absolute.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.sourceEvents.mousemove=e},i.mousedown=function(e){var n=t(e,i.element,i.pixelRatio),r=e.changedTouches;r?(i.button=0,e.preventDefault()):i.button=e.button,i.absolute.x=n.x,i.absolute.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mousedownPosition.x=i.position.x,i.mousedownPosition.y=i.position.y,i.sourceEvents.mousedown=e},i.mouseup=function(e){var n=t(e,i.element,i.pixelRatio),r=e.changedTouches;r&&e.preventDefault(),i.button=-1,i.absolute.x=n.x,i.absolute.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mouseupPosition.x=i.position.x,i.mouseupPosition.y=i.position.y,i.sourceEvents.mouseup=e},i.mousewheel=function(t){i.wheelDelta=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),t.preventDefault()},n.setElement(i,i.element),i},n.setElement=function(t,e){t.element=e,e.addEventListener("mousemove",t.mousemove),e.addEventListener("mousedown",t.mousedown),e.addEventListener("mouseup",t.mouseup),e.addEventListener("mousewheel",t.mousewheel),e.addEventListener("DOMMouseScroll",t.mousewheel),e.addEventListener("touchmove",t.mousemove),e.addEventListener("touchstart",t.mousedown),e.addEventListener("touchend",t.mouseup)},n.clearSourceEvents=function(t){t.sourceEvents.mousemove=null,t.sourceEvents.mousedown=null,t.sourceEvents.mouseup=null,t.sourceEvents.mousewheel=null,t.wheelDelta=0},n.setOffset=function(t,e){t.offset.x=e.x,t.offset.y=e.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y},n.setScale=function(t,e){t.scale.x=e.x,t.scale.y=e.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y};var t=function(t,e,i){var n,r,s=e.getBoundingClientRect(),o=document.documentElement||document.body.parentNode||document.body,a=void 0!==window.pageXOffset?window.pageXOffset:o.scrollLeft,l=void 0!==window.pageYOffset?window.pageYOffset:o.scrollTop,c=t.changedTouches;return c?(n=c[0].pageX-s.left-a,r=c[0].pageY-s.top-l):(n=t.pageX-s.left-a,r=t.pageY-s.top-l),{x:n/(e.clientWidth/(e.width||e.clientWidth)*i),y:r/(e.clientHeight/(e.height||e.clientHeight)*i)}}}()},{"../core/Common":14}],20:[function(t,e,i){var n={};e.exports=n;var r=t("./Common");!function(){n._registry={},n.register=function(t){if(n.isPlugin(t)||r.warn("Plugin.register:",n.toString(t),"does not implement all required fields."),t.name in n._registry){var e=n._registry[t.name],i=n.versionParse(t.version).number,s=n.versionParse(e.version).number;i>s?(r.warn("Plugin.register:",n.toString(e),"was upgraded to",n.toString(t)),n._registry[t.name]=t):i<s?r.warn("Plugin.register:",n.toString(e),"can not be downgraded to",n.toString(t)):t!==e&&r.warn("Plugin.register:",n.toString(t),"is already registered to different plugin object")}else n._registry[t.name]=t;return t},n.resolve=function(t){return n._registry[n.dependencyParse(t).name]},n.toString=function(t){return"string"==typeof t?t:(t.name||"anonymous")+"@"+(t.version||t.range||"0.0.0")},n.isPlugin=function(t){return t&&t.name&&t.version&&t.install},n.isUsed=function(t,e){return t.used.indexOf(e)>-1},n.isFor=function(t,e){var i=t.for&&n.dependencyParse(t.for);return!t.for||e.name===i.name&&n.versionSatisfies(e.version,i.range)},n.use=function(t,e){if(t.uses=(t.uses||[]).concat(e||[]),0===t.uses.length)return void r.warn("Plugin.use:",n.toString(t),"does not specify any dependencies to install.");for(var i=n.dependencies(t),s=r.topologicalSort(i),o=[],a=0;a<s.length;a+=1)if(s[a]!==t.name){var l=n.resolve(s[a]);l?n.isUsed(t,l.name)||(n.isFor(l,t)||(r.warn("Plugin.use:",n.toString(l),"is for",l.for,"but installed on",n.toString(t)+"."),l._warned=!0),l.install?l.install(t):(r.warn("Plugin.use:",n.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(o.push("🔶 "+n.toString(l)),delete l._warned):o.push("✅ "+n.toString(l)),t.used.push(l.name)):o.push("❌ "+s[a])}o.length>0&&r.info(o.join("  "))},n.dependencies=function(t,e){var i=n.dependencyParse(t),s=i.name;if(e=e||{},!(s in e)){t=n.resolve(t)||t,e[s]=r.map(t.uses||[],function(e){n.isPlugin(e)&&n.register(e);var s=n.dependencyParse(e),o=n.resolve(e);return o&&!n.versionSatisfies(o.version,s.range)?(r.warn("Plugin.dependencies:",n.toString(o),"does not satisfy",n.toString(s),"used by",n.toString(i)+"."),o._warned=!0,t._warned=!0):o||(r.warn("Plugin.dependencies:",n.toString(e),"used by",n.toString(i),"could not be resolved."),t._warned=!0),s.name});for(var o=0;o<e[s].length;o+=1)n.dependencies(e[s][o],e);return e}},n.dependencyParse=function(t){if(r.isString(t)){var e=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return e.test(t)||r.warn("Plugin.dependencyParse:",t,"is not a valid dependency string."),{name:t.split("@")[0],range:t.split("@")[1]||"*"}}return{name:t.name,range:t.range||t.version}},n.versionParse=function(t){var e=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;e.test(t)||r.warn("Plugin.versionParse:",t,"is not a valid version or range.");var i=t.split("-");t=i[0];var n=isNaN(Number(t[0])),s=n?t.substr(1):t,o=r.map(s.split("."),function(t){return Number(t)});return{isRange:n,version:s,range:t,operator:n?t[0]:"",parts:o,prerelease:i[1],number:1e8*o[0]+1e4*o[1]+o[2]}},n.versionSatisfies=function(t,e){e=e||"*";var i=n.versionParse(e),r=i.parts,s=n.versionParse(t),o=s.parts;if(i.isRange){if("*"===i.operator||"*"===t)return!0;if("~"===i.operator)return o[0]===r[0]&&o[1]===r[1]&&o[2]>=r[2];if("^"===i.operator)return r[0]>0?o[0]===r[0]&&s.number>=i.number:r[1]>0?o[1]===r[1]&&o[2]>=r[2]:o[2]===r[2]}return t===e||"*"===t}}()},{"./Common":14}],21:[function(t,e,i){var n={};e.exports=n;var r=t("./Events"),s=t("./Engine"),o=t("./Common");!function(){var t,e;if("undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!t){var i;t=function(t){i=setTimeout(function(){t(o.now())},1e3/60)},e=function(){clearTimeout(i)}}n.create=function(t){var e={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},i=o.extend(e,t);return i.delta=i.delta||1e3/i.fps,i.deltaMin=i.deltaMin||1e3/i.fps,i.deltaMax=i.deltaMax||1e3/(.5*i.fps),i.fps=1e3/i.delta,i},n.run=function(e,i){return"undefined"!=typeof e.positionIterations&&(i=e,e=n.create()),function r(s){e.frameRequestId=t(r),s&&e.enabled&&n.tick(e,i,s)}(),e},n.tick=function(t,e,i){var n,o=e.timing,a=1,l={timestamp:o.timestamp};r.trigger(t,"beforeTick",l),r.trigger(e,"beforeTick",l),t.isFixed?n=t.delta:(n=i-t.timePrev||t.delta,t.timePrev=i,t.deltaHistory.push(n),t.deltaHistory=t.deltaHistory.slice(-t.deltaSampleSize),n=Math.min.apply(null,t.deltaHistory),n=n<t.deltaMin?t.deltaMin:n,n=n>t.deltaMax?t.deltaMax:n,a=n/t.delta,t.delta=n),0!==t.timeScalePrev&&(a*=o.timeScale/t.timeScalePrev),0===o.timeScale&&(a=0),t.timeScalePrev=o.timeScale,t.correction=a,t.frameCounter+=1,i-t.counterTimestamp>=1e3&&(t.fps=t.frameCounter*((i-t.counterTimestamp)/1e3),t.counterTimestamp=i,t.frameCounter=0),r.trigger(t,"tick",l),r.trigger(e,"tick",l),e.world.isModified&&e.render&&e.render.controller&&e.render.controller.clear&&e.render.controller.clear(e.render),r.trigger(t,"beforeUpdate",l),s.update(e,n,a),r.trigger(t,"afterUpdate",l),e.render&&e.render.controller&&(r.trigger(t,"beforeRender",l),r.trigger(e,"beforeRender",l),e.render.controller.world(e.render),r.trigger(t,"afterRender",l),r.trigger(e,"afterRender",l)),r.trigger(t,"afterTick",l),r.trigger(e,"afterTick",l)},n.stop=function(t){e(t.frameRequestId)},n.start=function(t,e){n.run(t,e)}}()},{"./Common":14,"./Engine":15,"./Events":16}],22:[function(t,e,i){var n={};e.exports=n;var r=t("./Events");!function(){n._motionWakeThreshold=.18,n._motionSleepThreshold=.08,n._minBias=.9,n.update=function(t,e){for(var i=e*e*e,r=0;r<t.length;r++){var s=t[r],o=s.speed*s.speed+s.angularSpeed*s.angularSpeed;if(0===s.force.x&&0===s.force.y){var a=Math.min(s.motion,o),l=Math.max(s.motion,o);s.motion=n._minBias*a+(1-n._minBias)*l,s.sleepThreshold>0&&s.motion<n._motionSleepThreshold*i?(s.sleepCounter+=1,s.sleepCounter>=s.sleepThreshold&&n.set(s,!0)):s.sleepCounter>0&&(s.sleepCounter-=1)}else n.set(s,!1)}},n.afterCollisions=function(t,e){for(var i=e*e*e,r=0;r<t.length;r++){var s=t[r];if(s.isActive){var o=s.collision,a=o.bodyA.parent,l=o.bodyB.parent;if(!(a.isSleeping&&l.isSleeping||a.isStatic||l.isStatic)&&(a.isSleeping||l.isSleeping)){var c=a.isSleeping&&!a.isStatic?a:l,h=c===a?l:a;!c.isStatic&&h.motion>n._motionWakeThreshold*i&&n.set(c,!1)}}}},n.set=function(t,e){var i=t.isSleeping;e?(t.isSleeping=!0,t.sleepCounter=t.sleepThreshold,t.positionImpulse.x=0,t.positionImpulse.y=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.speed=0,t.angularSpeed=0,t.motion=0,i||r.trigger(t,"sleepStart")):(t.isSleeping=!1,t.sleepCounter=0,i&&r.trigger(t,"sleepEnd"))}}()},{"./Events":16}],23:[function(t,e,i){(function(i){var n={};e.exports=n;var r=t("../geometry/Vertices"),s=t("../core/Common"),o=t("../body/Body"),a=t("../geometry/Bounds"),l=t("../geometry/Vector"),c="undefined"!=typeof window?window.decomp:"undefined"!=typeof i?i.decomp:null;!function(){n.rectangle=function(t,e,i,n,a){a=a||{};
var l={label:"Rectangle Body",position:{x:t,y:e},vertices:r.fromPath("L 0 0 L "+i+" 0 L "+i+" "+n+" L 0 "+n)};if(a.chamfer){var c=a.chamfer;l.vertices=r.chamfer(l.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax),delete a.chamfer}return o.create(s.extend({},l,a))},n.trapezoid=function(t,e,i,n,a,l){l=l||{},a*=.5;var c,h=(1-2*a)*i,u=i*a,d=u+h,p=d+u;c=a<.5?"L 0 0 L "+u+" "+-n+" L "+d+" "+-n+" L "+p+" 0":"L 0 0 L "+d+" "+-n+" L "+p+" 0";var f={label:"Trapezoid Body",position:{x:t,y:e},vertices:r.fromPath(c)};if(l.chamfer){var v=l.chamfer;f.vertices=r.chamfer(f.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete l.chamfer}return o.create(s.extend({},f,l))},n.circle=function(t,e,i,r,o){r=r||{};var a={label:"Circle Body",circleRadius:i};o=o||25;var l=Math.ceil(Math.max(10,Math.min(o,i)));return l%2===1&&(l+=1),n.polygon(t,e,l,i,s.extend({},a,r))},n.polygon=function(t,e,i,a,l){if(l=l||{},i<3)return n.circle(t,e,a,l);for(var c=2*Math.PI/i,h="",u=.5*c,d=0;d<i;d+=1){var p=u+d*c,f=Math.cos(p)*a,v=Math.sin(p)*a;h+="L "+f.toFixed(3)+" "+v.toFixed(3)+" "}var m={label:"Polygon Body",position:{x:t,y:e},vertices:r.fromPath(h)};if(l.chamfer){var g=l.chamfer;m.vertices=r.chamfer(m.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete l.chamfer}return o.create(s.extend({},m,l))},n.fromVertices=function(t,e,i,n,h,u,d){var p,f,v,m,g,y,_,x,b;for(n=n||{},f=[],h="undefined"!=typeof h&&h,u="undefined"!=typeof u?u:.01,d="undefined"!=typeof d?d:10,c||s.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),s.isArray(i[0])||(i=[i]),x=0;x<i.length;x+=1)if(m=i[x],v=r.isConvex(m),v||!c)m=v?r.clockwiseSort(m):r.hull(m),f.push({position:{x:t,y:e},vertices:m});else{var w=m.map(function(t){return[t.x,t.y]});c.makeCCW(w),u!==!1&&c.removeCollinearPoints(w,u);var S=c.quickDecomp(w);for(g=0;g<S.length;g++){var T=S[g],C=T.map(function(t){return{x:t[0],y:t[1]}});d>0&&r.area(C)<d||f.push({position:r.centre(C),vertices:C})}}for(g=0;g<f.length;g++)f[g]=o.create(s.extend(f[g],n));if(h){var P=5;for(g=0;g<f.length;g++){var M=f[g];for(y=g+1;y<f.length;y++){var E=f[y];if(a.overlaps(M.bounds,E.bounds)){var k=M.vertices,A=E.vertices;for(_=0;_<M.vertices.length;_++)for(b=0;b<E.vertices.length;b++){var I=l.magnitudeSquared(l.sub(k[(_+1)%k.length],A[b])),j=l.magnitudeSquared(l.sub(k[_],A[(b+1)%A.length]));I<P&&j<P&&(k[_].isInternal=!0,A[b].isInternal=!0)}}}}}return f.length>1?(p=o.create(s.extend({parts:f.slice(0)},n)),o.setPosition(p,{x:t,y:e}),p):f[0]}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../body/Body":1,"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],24:[function(t,e,i){var n={};e.exports=n;var r=t("../body/Composite"),s=t("../constraint/Constraint"),o=t("../core/Common"),a=t("../body/Body"),l=t("./Bodies");!function(){n.stack=function(t,e,i,n,s,o,l){for(var c,h=r.create({label:"Stack"}),u=t,d=e,p=0,f=0;f<n;f++){for(var v=0,m=0;m<i;m++){var g=l(u,d,m,f,c,p);if(g){var y=g.bounds.max.y-g.bounds.min.y,_=g.bounds.max.x-g.bounds.min.x;y>v&&(v=y),a.translate(g,{x:.5*_,y:.5*y}),u=g.bounds.max.x+s,r.addBody(h,g),c=g,p+=1}else u+=s}d+=v+o,u=t}return h},n.chain=function(t,e,i,n,a,l){for(var c=t.bodies,h=1;h<c.length;h++){var u=c[h-1],d=c[h],p=u.bounds.max.y-u.bounds.min.y,f=u.bounds.max.x-u.bounds.min.x,v=d.bounds.max.y-d.bounds.min.y,m=d.bounds.max.x-d.bounds.min.x,g={bodyA:u,pointA:{x:f*e,y:p*i},bodyB:d,pointB:{x:m*n,y:v*a}},y=o.extend(g,l);r.addConstraint(t,s.create(y))}return t.label+=" Chain",t},n.mesh=function(t,e,i,n,a){var l,c,h,u,d,p=t.bodies;for(l=0;l<i;l++){for(c=1;c<e;c++)h=p[c-1+l*e],u=p[c+l*e],r.addConstraint(t,s.create(o.extend({bodyA:h,bodyB:u},a)));if(l>0)for(c=0;c<e;c++)h=p[c+(l-1)*e],u=p[c+l*e],r.addConstraint(t,s.create(o.extend({bodyA:h,bodyB:u},a))),n&&c>0&&(d=p[c-1+(l-1)*e],r.addConstraint(t,s.create(o.extend({bodyA:d,bodyB:u},a)))),n&&c<e-1&&(d=p[c+1+(l-1)*e],r.addConstraint(t,s.create(o.extend({bodyA:d,bodyB:u},a))))}return t.label+=" Mesh",t},n.pyramid=function(t,e,i,r,s,o,l){return n.stack(t,e,i,r,s,o,function(e,n,o,c,h,u){var d=Math.min(r,Math.ceil(i/2)),p=h?h.bounds.max.x-h.bounds.min.x:0;if(!(c>d)){c=d-c;var f=c,v=i-1-c;if(!(o<f||o>v)){1===u&&a.translate(h,{x:(o+(i%2===1?1:-1))*p,y:0});var m=h?o*p:0;return l(t+m+o*s,n,o,c,h,u)}}})},n.newtonsCradle=function(t,e,i,n,o){for(var a=r.create({label:"Newtons Cradle"}),c=0;c<i;c++){var h=1.9,u=l.circle(t+c*(n*h),e+o,n,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),d=s.create({pointA:{x:t+c*(n*h),y:e},bodyB:u});r.addBody(a,u),r.addConstraint(a,d)}return a},n.car=function(t,e,i,n,o){var c=a.nextGroup(!0),h=-20,u=.5*-i+h,d=.5*i-h,p=0,f=r.create({label:"Car"}),v=l.trapezoid(t,e,i,n,.3,{collisionFilter:{group:c},friction:.01,chamfer:{radius:10}}),m=l.circle(t+u,e+p,o,{collisionFilter:{group:c},friction:.8,density:.01}),g=l.circle(t+d,e+p,o,{collisionFilter:{group:c},friction:.8,density:.01}),y=s.create({bodyA:v,pointA:{x:u,y:p},bodyB:m,stiffness:.2,render:{lineWidth:0}}),_=s.create({bodyA:v,pointA:{x:d,y:p},bodyB:g,stiffness:.2,render:{lineWidth:0}});return r.addBody(f,v),r.addBody(f,m),r.addBody(f,g),r.addConstraint(f,y),r.addConstraint(f,_),f},n.softBody=function(t,e,i,r,s,a,c,h,u,d){u=o.extend({inertia:1/0},u),d=o.extend({stiffness:.4},d);var p=n.stack(t,e,i,r,s,a,function(t,e){return l.circle(t,e,h,u)});return n.mesh(p,i,r,c,d),p.label="Soft Body",p}}()},{"../body/Body":1,"../body/Composite":2,"../constraint/Constraint":12,"../core/Common":14,"./Bodies":23}],25:[function(t,e,i){var n={};e.exports=n;var r=t("../geometry/Vector"),s=t("../core/Common");!function(){n.fromVertices=function(t){for(var e={},i=0;i<t.length;i++){var n=(i+1)%t.length,o=r.normalise({x:t[n].y-t[i].y,y:t[i].x-t[n].x}),a=0===o.y?1/0:o.x/o.y;a=a.toFixed(3).toString(),e[a]=o}return s.values(e)},n.rotate=function(t,e){if(0!==e)for(var i=Math.cos(e),n=Math.sin(e),r=0;r<t.length;r++){var s,o=t[r];s=o.x*i-o.y*n,o.y=o.x*n+o.y*i,o.x=s}}}()},{"../core/Common":14,"../geometry/Vector":28}],26:[function(t,e,i){var n={};e.exports=n,function(){n.create=function(t){var e={min:{x:0,y:0},max:{x:0,y:0}};return t&&n.update(e,t),e},n.update=function(t,e,i){t.min.x=1/0,t.max.x=-(1/0),t.min.y=1/0,t.max.y=-(1/0);for(var n=0;n<e.length;n++){var r=e[n];r.x>t.max.x&&(t.max.x=r.x),r.x<t.min.x&&(t.min.x=r.x),r.y>t.max.y&&(t.max.y=r.y),r.y<t.min.y&&(t.min.y=r.y)}i&&(i.x>0?t.max.x+=i.x:t.min.x+=i.x,i.y>0?t.max.y+=i.y:t.min.y+=i.y)},n.contains=function(t,e){return e.x>=t.min.x&&e.x<=t.max.x&&e.y>=t.min.y&&e.y<=t.max.y},n.overlaps=function(t,e){return t.min.x<=e.max.x&&t.max.x>=e.min.x&&t.max.y>=e.min.y&&t.min.y<=e.max.y},n.translate=function(t,e){t.min.x+=e.x,t.max.x+=e.x,t.min.y+=e.y,t.max.y+=e.y},n.shift=function(t,e){var i=t.max.x-t.min.x,n=t.max.y-t.min.y;t.min.x=e.x,t.max.x=e.x+i,t.min.y=e.y,t.max.y=e.y+n}}()},{}],27:[function(t,e,i){var n={};e.exports=n;t("../geometry/Bounds");!function(){n.pathToVertices=function(e,i){var n,r,s,o,a,l,c,h,u,d,p,f,v=[],m=0,g=0,y=0;i=i||15;var _=function(t,e,i){var n=i%2===1&&i>1;if(!u||t!=u.x||e!=u.y){u&&n?(p=u.x,f=u.y):(p=0,f=0);var r={x:p+t,y:f+e};!n&&u||(u=r),v.push(r),g=p+t,y=f+e}},x=function(t){var e=t.pathSegTypeAsLetter.toUpperCase();if("Z"!==e){switch(e){case"M":case"L":case"T":case"C":case"S":case"Q":g=t.x,y=t.y;break;case"H":g=t.x;break;case"V":y=t.y}_(g,y,t.pathSegType)}};for(t(e),s=e.getTotalLength(),l=[],n=0;n<e.pathSegList.numberOfItems;n+=1)l.push(e.pathSegList.getItem(n));for(c=l.concat();m<s;){if(d=e.getPathSegAtLength(m),a=l[d],a!=h){for(;c.length&&c[0]!=a;)x(c.shift());h=a}switch(a.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":o=e.getPointAtLength(m),_(o.x,o.y,0)}m+=i}for(n=0,r=c.length;n<r;++n)x(c[n]);return v};var t=function(t){for(var e,i,n,r,s,o,a=t.pathSegList,l=0,c=0,h=a.numberOfItems,u=0;u<h;++u){var d=a.getItem(u),p=d.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(p))"x"in d&&(l=d.x),"y"in d&&(c=d.y);else switch("x1"in d&&(n=l+d.x1),"x2"in d&&(s=l+d.x2),"y1"in d&&(r=c+d.y1),"y2"in d&&(o=c+d.y2),"x"in d&&(l+=d.x),"y"in d&&(c+=d.y),p){case"m":a.replaceItem(t.createSVGPathSegMovetoAbs(l,c),u);break;case"l":a.replaceItem(t.createSVGPathSegLinetoAbs(l,c),u);break;case"h":a.replaceItem(t.createSVGPathSegLinetoHorizontalAbs(l),u);break;case"v":a.replaceItem(t.createSVGPathSegLinetoVerticalAbs(c),u);break;case"c":a.replaceItem(t.createSVGPathSegCurvetoCubicAbs(l,c,n,r,s,o),u);break;case"s":a.replaceItem(t.createSVGPathSegCurvetoCubicSmoothAbs(l,c,s,o),u);break;case"q":a.replaceItem(t.createSVGPathSegCurvetoQuadraticAbs(l,c,n,r),u);break;case"t":a.replaceItem(t.createSVGPathSegCurvetoQuadraticSmoothAbs(l,c),u);break;case"a":a.replaceItem(t.createSVGPathSegArcAbs(l,c,d.r1,d.r2,d.angle,d.largeArcFlag,d.sweepFlag),u);break;case"z":case"Z":l=e,c=i}"M"!=p&&"m"!=p||(e=l,i=c)}}}()},{"../geometry/Bounds":26}],28:[function(t,e,i){var n={};e.exports=n,function(){n.create=function(t,e){return{x:t||0,y:e||0}},n.clone=function(t){return{x:t.x,y:t.y}},n.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},n.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},n.rotate=function(t,e){var i=Math.cos(e),n=Math.sin(e);return{x:t.x*i-t.y*n,y:t.x*n+t.y*i}},n.rotateAbout=function(t,e,i,n){var r=Math.cos(e),s=Math.sin(e);n||(n={});var o=i.x+((t.x-i.x)*r-(t.y-i.y)*s);return n.y=i.y+((t.x-i.x)*s+(t.y-i.y)*r),n.x=o,n},n.normalise=function(t){var e=n.magnitude(t);return 0===e?{x:0,y:0}:{x:t.x/e,y:t.y/e}},n.dot=function(t,e){return t.x*e.x+t.y*e.y},n.cross=function(t,e){return t.x*e.y-t.y*e.x},n.cross3=function(t,e,i){return(e.x-t.x)*(i.y-t.y)-(e.y-t.y)*(i.x-t.x)},n.add=function(t,e,i){return i||(i={}),i.x=t.x+e.x,i.y=t.y+e.y,i},n.sub=function(t,e,i){return i||(i={}),i.x=t.x-e.x,i.y=t.y-e.y,i},n.mult=function(t,e){return{x:t.x*e,y:t.y*e}},n.div=function(t,e){return{x:t.x/e,y:t.y/e}},n.perp=function(t,e){return e=e===!0?-1:1,{x:e*-t.y,y:e*t.x}},n.neg=function(t){return{x:-t.x,y:-t.y}},n.angle=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]}()},{}],29:[function(t,e,i){var n={};e.exports=n;var r=t("../geometry/Vector"),s=t("../core/Common");!function(){n.create=function(t,e){for(var i=[],n=0;n<t.length;n++){var r=t[n],s={x:r.x,y:r.y,index:n,body:e,isInternal:!1};i.push(s)}return i},n.fromPath=function(t,e){var i=/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,r=[];return t.replace(i,function(t,e,i){r.push({x:parseFloat(e),y:parseFloat(i)})}),n.create(r,e)},n.centre=function(t){for(var e,i,s,o=n.area(t,!0),a={x:0,y:0},l=0;l<t.length;l++)s=(l+1)%t.length,e=r.cross(t[l],t[s]),i=r.mult(r.add(t[l],t[s]),e),a=r.add(a,i);return r.div(a,6*o)},n.mean=function(t){for(var e={x:0,y:0},i=0;i<t.length;i++)e.x+=t[i].x,e.y+=t[i].y;return r.div(e,t.length)},n.area=function(t,e){for(var i=0,n=t.length-1,r=0;r<t.length;r++)i+=(t[n].x-t[r].x)*(t[n].y+t[r].y),n=r;return e?i/2:Math.abs(i)/2},n.inertia=function(t,e){for(var i,n,s=0,o=0,a=t,l=0;l<a.length;l++)n=(l+1)%a.length,i=Math.abs(r.cross(a[n],a[l])),s+=i*(r.dot(a[n],a[n])+r.dot(a[n],a[l])+r.dot(a[l],a[l])),o+=i;return e/6*(s/o)},n.translate=function(t,e,i){var n;if(i)for(n=0;n<t.length;n++)t[n].x+=e.x*i,t[n].y+=e.y*i;else for(n=0;n<t.length;n++)t[n].x+=e.x,t[n].y+=e.y;return t},n.rotate=function(t,e,i){if(0!==e){for(var n=Math.cos(e),r=Math.sin(e),s=0;s<t.length;s++){var o=t[s],a=o.x-i.x,l=o.y-i.y;o.x=i.x+(a*n-l*r),o.y=i.y+(a*r+l*n)}return t}},n.contains=function(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=t[(i+1)%t.length];if((e.x-n.x)*(r.y-n.y)+(e.y-n.y)*(n.x-r.x)>0)return!1}return!0},n.scale=function(t,e,i,s){if(1===e&&1===i)return t;s=s||n.centre(t);for(var o,a,l=0;l<t.length;l++)o=t[l],a=r.sub(o,s),t[l].x=s.x+a.x*e,t[l].y=s.y+a.y*i;return t},n.chamfer=function(t,e,i,n,o){e=e||[8],e.length||(e=[e]),i="undefined"!=typeof i?i:-1,n=n||2,o=o||14;for(var a=[],l=0;l<t.length;l++){var c=t[l-1>=0?l-1:t.length-1],h=t[l],u=t[(l+1)%t.length],d=e[l<e.length?l:e.length-1];if(0!==d){var p=r.normalise({x:h.y-c.y,y:c.x-h.x}),f=r.normalise({x:u.y-h.y,y:h.x-u.x}),v=Math.sqrt(2*Math.pow(d,2)),m=r.mult(s.clone(p),d),g=r.normalise(r.mult(r.add(p,f),.5)),y=r.sub(h,r.mult(g,v)),_=i;i===-1&&(_=1.75*Math.pow(d,.32)),_=s.clamp(_,n,o),_%2===1&&(_+=1);for(var x=Math.acos(r.dot(p,f)),b=x/_,w=0;w<_;w++)a.push(r.add(r.rotate(m,b*w),y))}else a.push(h)}return a},n.clockwiseSort=function(t){var e=n.mean(t);return t.sort(function(t,i){return r.angle(e,t)-r.angle(e,i)}),t},n.isConvex=function(t){var e,i,n,r,s=0,o=t.length;if(o<3)return null;for(e=0;e<o;e++)if(i=(e+1)%o,n=(e+2)%o,r=(t[i].x-t[e].x)*(t[n].y-t[i].y),r-=(t[i].y-t[e].y)*(t[n].x-t[i].x),r<0?s|=1:r>0&&(s|=2),3===s)return!1;return 0!==s||null},n.hull=function(t){var e,i,n=[],s=[];for(t=t.slice(0),t.sort(function(t,e){var i=t.x-e.x;return 0!==i?i:t.y-e.y}),i=0;i<t.length;i++){for(e=t[i];s.length>=2&&r.cross3(s[s.length-2],s[s.length-1],e)<=0;)s.pop();s.push(e)}for(i=t.length-1;i>=0;i--){for(e=t[i];n.length>=2&&r.cross3(n[n.length-2],n[n.length-1],e)<=0;)n.pop();n.push(e)}return n.pop(),s.pop(),n.concat(s)}}()},{"../core/Common":14,"../geometry/Vector":28}],30:[function(t,e,i){var n=e.exports=t("../core/_b");n.Body=t("../body/Body"),n.Composite=t("../body/Composite"),n.World=t("../body/World"),n.Contact=t("../collision/Contact"),n.Detector=t("../collision/Detector"),n.Grid=t("../collision/Grid"),n.Pairs=t("../collision/Pairs"),n.Pair=t("../collision/Pair"),n.Query=t("../collision/Query"),n.Resolver=t("../collision/Resolver"),n.SAT=t("../collision/SAT"),n.Constraint=t("../constraint/Constraint"),n.MouseConstraint=t("../constraint/MouseConstraint"),n.Common=t("../core/Common"),n.Engine=t("../core/Engine"),n.Events=t("../core/Events"),n.Mouse=t("../core/Mouse"),n.Runner=t("../core/Runner"),n.Sleeping=t("../core/Sleeping"),n.Plugin=t("../core/Plugin"),n.Bodies=t("../factory/Bodies"),n.Composites=t("../factory/Composites"),n.Axes=t("../geometry/Axes"),n.Bounds=t("../geometry/Bounds"),n.Svg=t("../geometry/Svg"),n.Vector=t("../geometry/Vector"),n.Vertices=t("../geometry/Vertices"),n.Render=t("../render/Render"),n.RenderPixi=t("../render/RenderPixi"),n.World.add=n.Composite.add,n.World.remove=n.Composite.remove,n.World.addComposite=n.Composite.addComposite,n.World.addBody=n.Composite.addBody,n.World.addConstraint=n.Composite.addConstraint,n.World.clear=n.Composite.clear,n.Engine.run=n.Runner.run},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Contact":4,"../collision/Detector":5,"../collision/Grid":6,"../collision/Pair":7,"../collision/Pairs":8,"../collision/Query":9,"../collision/Resolver":10,"../collision/SAT":11,"../constraint/Constraint":12,"../constraint/MouseConstraint":13,"../core/Common":14,"../core/Engine":15,"../core/Events":16,"../core/_b":17,"../core/Metrics":18,"../core/Mouse":19,"../core/Plugin":20,"../core/Runner":21,"../core/Sleeping":22,"../factory/Bodies":23,"../factory/Composites":24,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Svg":27,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31,"../render/RenderPixi":32}],31:[function(t,e,i){var n={};e.exports=n;var r=t("../core/Common"),s=t("../body/Composite"),o=t("../geometry/Bounds"),a=t("../core/Events"),l=t("../collision/Grid"),c=t("../geometry/Vector"),h=t("../core/Mouse");!function(){var t,e;"undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(function(){t(r.now())},1e3/60)},e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),n.create=function(t){var e={controller:n,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#18181d",wireframeBackground:"#0f0f13",hasBounds:!!t.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},s=r.extend(e,t);return s.canvas&&(s.canvas.width=s.options.width||s.canvas.width,s.canvas.height=s.options.height||s.canvas.height),s.mouse=t.mouse,s.engine=t.engine,s.canvas=s.canvas||i(s.options.width,s.options.height),s.context=s.canvas.getContext("2d"),s.textures={},s.bounds=s.bounds||{min:{x:0,y:0},max:{x:s.canvas.width,y:s.canvas.height}},1!==s.options.pixelRatio&&n.setPixelRatio(s,s.options.pixelRatio),r.isElement(s.element)?s.element.appendChild(s.canvas):r.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),s},n.run=function(e){!function i(r){e.frameRequestId=t(i),n.world(e)}()},n.stop=function(t){e(t.frameRequestId)},n.setPixelRatio=function(t,e){var i=t.options,n=t.canvas;"auto"===e&&(e=u(n)),i.pixelRatio=e,n.setAttribute("data-pixel-ratio",e),n.width=i.width*e,n.height=i.height*e,n.style.width=i.width+"px",n.style.height=i.height+"px",t.context.scale(e,e)},n.lookAt=function(t,e,i,n){n="undefined"==typeof n||n,e=r.isArray(e)?e:[e],i=i||{x:0,y:0};for(var s={min:{x:1/0,y:1/0},max:{x:-(1/0),y:-(1/0)}},o=0;o<e.length;o+=1){var a=e[o],l=a.bounds?a.bounds.min:a.min||a.position||a,c=a.bounds?a.bounds.max:a.max||a.position||a;l&&c&&(l.x<s.min.x&&(s.min.x=l.x),c.x>s.max.x&&(s.max.x=c.x),l.y<s.min.y&&(s.min.y=l.y),c.y>s.max.y&&(s.max.y=c.y))}var u=s.max.x-s.min.x+2*i.x,d=s.max.y-s.min.y+2*i.y,p=t.canvas.height,f=t.canvas.width,v=f/p,m=u/d,g=1,y=1;m>v?y=m/v:g=v/m,t.options.hasBounds=!0,t.bounds.min.x=s.min.x,t.bounds.max.x=s.min.x+u*g,t.bounds.min.y=s.min.y,t.bounds.max.y=s.min.y+d*y,n&&(t.bounds.min.x+=.5*u-u*g*.5,t.bounds.max.x+=.5*u-u*g*.5,t.bounds.min.y+=.5*d-d*y*.5,t.bounds.max.y+=.5*d-d*y*.5),t.bounds.min.x-=i.x,t.bounds.max.x-=i.x,t.bounds.min.y-=i.y,t.bounds.max.y-=i.y,t.mouse&&(h.setScale(t.mouse,{x:(t.bounds.max.x-t.bounds.min.x)/t.canvas.width,y:(t.bounds.max.y-t.bounds.min.y)/t.canvas.height}),h.setOffset(t.mouse,t.bounds.min))},n.startViewTransform=function(t){var e=t.bounds.max.x-t.bounds.min.x,i=t.bounds.max.y-t.bounds.min.y,n=e/t.options.width,r=i/t.options.height;t.context.scale(1/n,1/r),t.context.translate(-t.bounds.min.x,-t.bounds.min.y)},n.endViewTransform=function(t){t.context.setTransform(t.options.pixelRatio,0,0,t.options.pixelRatio,0,0)},n.world=function(t){var e,i=t.engine,r=i.world,u=t.canvas,d=t.context,f=t.options,v=s.allBodies(r),m=s.allConstraints(r),g=f.wireframes?f.wireframeBackground:f.background,y=[],_=[],x={timestamp:i.timing.timestamp};if(a.trigger(t,"beforeRender",x),t.currentBackground!==g&&p(t,g),d.globalCompositeOperation="source-in",d.fillStyle="transparent",d.fillRect(0,0,u.width,u.height),d.globalCompositeOperation="source-over",f.hasBounds){for(e=0;e<v.length;e++){var b=v[e];o.overlaps(b.bounds,t.bounds)&&y.push(b)}for(e=0;e<m.length;e++){var w=m[e],S=w.bodyA,T=w.bodyB,C=w.pointA,P=w.pointB;S&&(C=c.add(S.position,w.pointA)),T&&(P=c.add(T.position,w.pointB)),C&&P&&(o.contains(t.bounds,C)||o.contains(t.bounds,P))&&_.push(w)}n.startViewTransform(t),t.mouse&&(h.setScale(t.mouse,{x:(t.bounds.max.x-t.bounds.min.x)/t.canvas.width,y:(t.bounds.max.y-t.bounds.min.y)/t.canvas.height}),h.setOffset(t.mouse,t.bounds.min))}else _=m,y=v;!f.wireframes||i.enableSleeping&&f.showSleeping?n.bodies(t,y,d):(f.showConvexHulls&&n.bodyConvexHulls(t,y,d),n.bodyWireframes(t,y,d)),f.showBounds&&n.bodyBounds(t,y,d),(f.showAxes||f.showAngleIndicator)&&n.bodyAxes(t,y,d),f.showPositions&&n.bodyPositions(t,y,d),f.showVelocity&&n.bodyVelocity(t,y,d),f.showIds&&n.bodyIds(t,y,d),f.showSeparations&&n.separations(t,i.pairs.list,d),f.showCollisions&&n.collisions(t,i.pairs.list,d),f.showVertexNumbers&&n.vertexNumbers(t,y,d),f.showMousePosition&&n.mousePosition(t,t.mouse,d),n.constraints(_,d),f.showBroadphase&&i.broadphase.controller===l&&n.grid(t,i.broadphase,d),f.showDebug&&n.debug(t,d),f.hasBounds&&n.endViewTransform(t),a.trigger(t,"afterRender",x)},n.debug=function(t,e){var i=e,n=t.engine,r=n.world,o=n.metrics,a=t.options,l=(s.allBodies(r),"    ");if(n.timing.timestamp-(t.debugTimestamp||0)>=500){var c="";o.timing&&(c+="fps: "+Math.round(o.timing.fps)+l),t.debugString=c,t.debugTimestamp=n.timing.timestamp}if(t.debugString){i.font="12px Arial",a.wireframes?i.fillStyle="rgba(255,255,255,0.5)":i.fillStyle="rgba(0,0,0,0.5)";for(var h=t.debugString.split("\n"),u=0;u<h.length;u++)i.fillText(h[u],50,50+18*u)}},n.constraints=function(t,e){for(var i=e,n=0;n<t.length;n++){var r=t[n];if(r.render.visible&&r.pointA&&r.pointB){var s=r.bodyA,o=r.bodyB;s?(i.beginPath(),i.moveTo(s.position.x+r.pointA.x,s.position.y+r.pointA.y)):(i.beginPath(),i.moveTo(r.pointA.x,r.pointA.y)),o?i.lineTo(o.position.x+r.pointB.x,o.position.y+r.pointB.y):i.lineTo(r.pointB.x,r.pointB.y),r.render.lineWidth&&(i.lineWidth=r.render.lineWidth,i.strokeStyle=r.render.strokeStyle,i.stroke())}}},n.bodyShadows=function(t,e,i){for(var n=i,r=(t.engine,0);r<e.length;r++){var s=e[r];if(s.render.visible){if(s.circleRadius)n.beginPath(),n.arc(s.position.x,s.position.y,s.circleRadius,0,2*Math.PI),n.closePath();else{n.beginPath(),n.moveTo(s.vertices[0].x,s.vertices[0].y);for(var o=1;o<s.vertices.length;o++)n.lineTo(s.vertices[o].x,s.vertices[o].y);n.closePath()}var a=s.position.x-.5*t.options.width,l=s.position.y-.2*t.options.height,c=Math.abs(a)+Math.abs(l);n.shadowColor="rgba(0,0,0,0.15)",n.shadowOffsetX=.05*a,n.shadowOffsetY=.05*l,n.shadowBlur=1+12*Math.min(1,c/1e3),n.fill(),n.shadowColor=null,n.shadowOffsetX=null,n.shadowOffsetY=null,n.shadowBlur=null}}},n.bodies=function(t,e,i){var n,r,s,o,a=i,l=(t.engine,t.options),c=l.showInternalEdges||!l.wireframes;for(s=0;s<e.length;s++)if(n=e[s],n.render.visible)for(o=n.parts.length>1?1:0;o<n.parts.length;o++)if(r=n.parts[o],r.render.visible){if(l.showSleeping&&n.isSleeping?a.globalAlpha=.5*r.render.opacity:1!==r.render.opacity&&(a.globalAlpha=r.render.opacity),r.render.sprite&&r.render.sprite.texture&&!l.wireframes){var h=r.render.sprite,u=d(t,h.texture);a.translate(r.position.x,r.position.y),a.rotate(r.angle),a.drawImage(u,u.width*-h.xOffset*h.xScale,u.height*-h.yOffset*h.yScale,u.width*h.xScale,u.height*h.yScale),a.rotate(-r.angle),a.translate(-r.position.x,-r.position.y)}else{if(r.circleRadius)a.beginPath(),a.arc(r.position.x,r.position.y,r.circleRadius,0,2*Math.PI);else{a.beginPath(),a.moveTo(r.vertices[0].x,r.vertices[0].y);for(var p=1;p<r.vertices.length;p++)!r.vertices[p-1].isInternal||c?a.lineTo(r.vertices[p].x,r.vertices[p].y):a.moveTo(r.vertices[p].x,r.vertices[p].y),r.vertices[p].isInternal&&!c&&a.moveTo(r.vertices[(p+1)%r.vertices.length].x,r.vertices[(p+1)%r.vertices.length].y);a.lineTo(r.vertices[0].x,r.vertices[0].y),a.closePath()}l.wireframes?(a.lineWidth=1,a.strokeStyle="#bbb",a.stroke()):(a.fillStyle=r.render.fillStyle,r.render.lineWidth&&(a.lineWidth=r.render.lineWidth,a.strokeStyle=r.render.strokeStyle,a.stroke()),a.fill())}a.globalAlpha=1}},n.bodyWireframes=function(t,e,i){var n,r,s,o,a,l=i,c=t.options.showInternalEdges;for(l.beginPath(),s=0;s<e.length;s++)if(n=e[s],n.render.visible)for(a=n.parts.length>1?1:0;a<n.parts.length;a++){for(r=n.parts[a],l.moveTo(r.vertices[0].x,r.vertices[0].y),o=1;o<r.vertices.length;o++)!r.vertices[o-1].isInternal||c?l.lineTo(r.vertices[o].x,r.vertices[o].y):l.moveTo(r.vertices[o].x,r.vertices[o].y),r.vertices[o].isInternal&&!c&&l.moveTo(r.vertices[(o+1)%r.vertices.length].x,r.vertices[(o+1)%r.vertices.length].y);l.lineTo(r.vertices[0].x,r.vertices[0].y)}l.lineWidth=1,l.strokeStyle="#bbb",l.stroke()},n.bodyConvexHulls=function(t,e,i){var n,r,s,o=i;for(o.beginPath(),r=0;r<e.length;r++)if(n=e[r],n.render.visible&&1!==n.parts.length){for(o.moveTo(n.vertices[0].x,n.vertices[0].y),s=1;s<n.vertices.length;s++)o.lineTo(n.vertices[s].x,n.vertices[s].y);o.lineTo(n.vertices[0].x,n.vertices[0].y)}o.lineWidth=1,o.strokeStyle="rgba(255,255,255,0.2)",o.stroke()},n.vertexNumbers=function(t,e,i){var n,r,s,o=i;for(n=0;n<e.length;n++){var a=e[n].parts;for(s=a.length>1?1:0;s<a.length;s++){var l=a[s];for(r=0;r<l.vertices.length;r++)o.fillStyle="rgba(255,255,255,0.2)",o.fillText(n+"_"+r,l.position.x+.8*(l.vertices[r].x-l.position.x),l.position.y+.8*(l.vertices[r].y-l.position.y))}}},n.mousePosition=function(t,e,i){var n=i;n.fillStyle="rgba(255,255,255,0.8)",n.fillText(e.position.x+"  "+e.position.y,e.position.x+5,e.position.y-5)},n.bodyBounds=function(t,e,i){var n=i,r=(t.engine,t.options);n.beginPath();for(var s=0;s<e.length;s++){var o=e[s];if(o.render.visible)for(var a=e[s].parts,l=a.length>1?1:0;l<a.length;l++){var c=a[l];n.rect(c.bounds.min.x,c.bounds.min.y,c.bounds.max.x-c.bounds.min.x,c.bounds.max.y-c.bounds.min.y)}}r.wireframes?n.strokeStyle="rgba(255,255,255,0.08)":n.strokeStyle="rgba(0,0,0,0.1)",n.lineWidth=1,n.stroke()},n.bodyAxes=function(t,e,i){var n,r,s,o,a=i,l=(t.engine,t.options);for(a.beginPath(),r=0;r<e.length;r++){var c=e[r],h=c.parts;if(c.render.visible)if(l.showAxes)for(s=h.length>1?1:0;s<h.length;s++)for(n=h[s],o=0;o<n.axes.length;o++){var u=n.axes[o];a.moveTo(n.position.x,n.position.y),a.lineTo(n.position.x+20*u.x,n.position.y+20*u.y)}else for(s=h.length>1?1:0;s<h.length;s++)for(n=h[s],o=0;o<n.axes.length;o++)a.moveTo(n.position.x,n.position.y),a.lineTo((n.vertices[0].x+n.vertices[n.vertices.length-1].x)/2,(n.vertices[0].y+n.vertices[n.vertices.length-1].y)/2)}l.wireframes?(a.strokeStyle="indianred",a.lineWidth=1):(a.strokeStyle="rgba(255, 255, 255, 0.4)",a.globalCompositeOperation="overlay",a.lineWidth=2),a.stroke(),a.globalCompositeOperation="source-over"},n.bodyPositions=function(t,e,i){var n,r,s,o,a=i,l=(t.engine,t.options);for(a.beginPath(),s=0;s<e.length;s++)if(n=e[s],n.render.visible)for(o=0;o<n.parts.length;o++)r=n.parts[o],a.arc(r.position.x,r.position.y,3,0,2*Math.PI,!1),a.closePath();for(l.wireframes?a.fillStyle="indianred":a.fillStyle="rgba(0,0,0,0.5)",a.fill(),a.beginPath(),s=0;s<e.length;s++)n=e[s],n.render.visible&&(a.arc(n.positionPrev.x,n.positionPrev.y,2,0,2*Math.PI,!1),a.closePath());a.fillStyle="rgba(255,165,0,0.8)",a.fill()},n.bodyVelocity=function(t,e,i){var n=i;n.beginPath();for(var r=0;r<e.length;r++){var s=e[r];s.render.visible&&(n.moveTo(s.position.x,s.position.y),n.lineTo(s.position.x+2*(s.position.x-s.positionPrev.x),s.position.y+2*(s.position.y-s.positionPrev.y)))}n.lineWidth=3,n.strokeStyle="cornflowerblue",n.stroke()},n.bodyIds=function(t,e,i){var n,r,s=i;for(n=0;n<e.length;n++)if(e[n].render.visible){var o=e[n].parts;for(r=o.length>1?1:0;r<o.length;r++){var a=o[r];s.font="12px Arial",s.fillStyle="rgba(255,255,255,0.5)",s.fillText(a.id,a.position.x+10,a.position.y-10)}}},n.collisions=function(t,e,i){var n,r,s,o,a=i,l=t.options;for(a.beginPath(),s=0;s<e.length;s++)if(n=e[s],n.isActive)for(r=n.collision,o=0;o<n.activeContacts.length;o++){var c=n.activeContacts[o],h=c.vertex;a.rect(h.x-1.5,h.y-1.5,3.5,3.5)}for(l.wireframes?a.fillStyle="rgba(255,255,255,0.7)":a.fillStyle="orange",a.fill(),a.beginPath(),s=0;s<e.length;s++)if(n=e[s],n.isActive&&(r=n.collision,n.activeContacts.length>0)){var u=n.activeContacts[0].vertex.x,d=n.activeContacts[0].vertex.y;2===n.activeContacts.length&&(u=(n.activeContacts[0].vertex.x+n.activeContacts[1].vertex.x)/2,d=(n.activeContacts[0].vertex.y+n.activeContacts[1].vertex.y)/2),r.bodyB===r.supports[0].body||r.bodyA.isStatic===!0?a.moveTo(u-8*r.normal.x,d-8*r.normal.y):a.moveTo(u+8*r.normal.x,d+8*r.normal.y),a.lineTo(u,d)}l.wireframes?a.strokeStyle="rgba(255,165,0,0.7)":a.strokeStyle="orange",a.lineWidth=1,a.stroke()},n.separations=function(t,e,i){var n,r,s,o,a,l=i,c=t.options;for(l.beginPath(),a=0;a<e.length;a++)if(n=e[a],n.isActive){r=n.collision,s=r.bodyA,o=r.bodyB;var h=1;o.isStatic||s.isStatic||(h=.5),o.isStatic&&(h=0),l.moveTo(o.position.x,o.position.y),l.lineTo(o.position.x-r.penetration.x*h,o.position.y-r.penetration.y*h),h=1,o.isStatic||s.isStatic||(h=.5),s.isStatic&&(h=0),l.moveTo(s.position.x,s.position.y),l.lineTo(s.position.x+r.penetration.x*h,s.position.y+r.penetration.y*h)}c.wireframes?l.strokeStyle="rgba(255,165,0,0.5)":l.strokeStyle="orange",l.stroke()},n.grid=function(t,e,i){var n=i,s=t.options;s.wireframes?n.strokeStyle="rgba(255,180,0,0.1)":n.strokeStyle="rgba(255,180,0,0.5)",n.beginPath();for(var o=r.keys(e.buckets),a=0;a<o.length;a++){var l=o[a];if(!(e.buckets[l].length<2)){var c=l.split(/C|R/);n.rect(.5+parseInt(c[1],10)*e.bucketWidth,.5+parseInt(c[2],10)*e.bucketHeight,e.bucketWidth,e.bucketHeight)}}n.lineWidth=1,n.stroke()},n.inspector=function(t,e){var i,n=(t.engine,t.selected),r=t.render,s=r.options;if(s.hasBounds){var o=r.bounds.max.x-r.bounds.min.x,a=r.bounds.max.y-r.bounds.min.y,l=o/r.options.width,c=a/r.options.height;e.scale(1/l,1/c),e.translate(-r.bounds.min.x,-r.bounds.min.y)}for(var h=0;h<n.length;h++){var u=n[h].data;switch(e.translate(.5,.5),e.lineWidth=1,e.strokeStyle="rgba(255,165,0,0.9)",e.setLineDash([1,2]),u.type){case"body":i=u.bounds,e.beginPath(),e.rect(Math.floor(i.min.x-3),Math.floor(i.min.y-3),Math.floor(i.max.x-i.min.x+6),Math.floor(i.max.y-i.min.y+6)),e.closePath(),e.stroke();break;case"constraint":var d=u.pointA;u.bodyA&&(d=u.pointB),e.beginPath(),e.arc(d.x,d.y,10,0,2*Math.PI),e.closePath(),e.stroke()}e.setLineDash([]),e.translate(-.5,-.5)}null!==t.selectStart&&(e.translate(.5,.5),e.lineWidth=1,e.strokeStyle="rgba(255,165,0,0.6)",e.fillStyle="rgba(255,165,0,0.1)",i=t.selectBounds,e.beginPath(),e.rect(Math.floor(i.min.x),Math.floor(i.min.y),Math.floor(i.max.x-i.min.x),Math.floor(i.max.y-i.min.y)),e.closePath(),e.stroke(),e.fill(),e.translate(-.5,-.5)),s.hasBounds&&e.setTransform(1,0,0,1,0,0)};var i=function(t,e){var i=document.createElement("canvas");return i.width=t,i.height=e,i.oncontextmenu=function(){return!1},i.onselectstart=function(){return!1},i},u=function(t){var e=t.getContext("2d"),i=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return i/n},d=function(t,e){var i=t.textures[e];return i?i:(i=t.textures[e]=new Image,i.src=e,i)},p=function(t,e){var i=e;/(jpg|gif|png)$/.test(e)&&(i="url("+e+")"),t.canvas.style.background=i,t.canvas.style.backgroundSize="contain",t.currentBackground=e}}()},{"../body/Composite":2,"../collision/Grid":6,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../geometry/Bounds":26,"../geometry/Vector":28}],32:[function(t,e,i){var n={};e.exports=n;var r=t("../geometry/Bounds"),s=t("../body/Composite"),o=t("../core/Common"),a=t("../core/Events"),l=t("../geometry/Vector");!function(){var t,e;"undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(function(){t(o.now())},1e3/60)},e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),n.create=function(t){o.warn("RenderPixi.create: _b.RenderPixi is deprecated (see docs)");var e={controller:n,engine:null,element:null,frameRequestId:null,canvas:null,renderer:null,container:null,spriteContainer:null,pixiOptions:null,options:{width:800,height:600,background:"#fafafa",wireframeBackground:"#222",hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}},i=o.extend(e,t),r=!i.options.wireframes&&"transparent"===i.options.background;return i.pixiOptions=i.pixiOptions||{view:i.canvas,transparent:r,antialias:!0,backgroundColor:t.background},i.mouse=t.mouse,i.engine=t.engine,i.renderer=i.renderer||new PIXI.WebGLRenderer(i.options.width,i.options.height,i.pixiOptions),i.container=i.container||new PIXI.Container,i.spriteContainer=i.spriteContainer||new PIXI.Container,i.canvas=i.canvas||i.renderer.view,i.bounds=i.bounds||{
min:{x:0,y:0},max:{x:i.options.width,y:i.options.height}},a.on(i.engine,"beforeUpdate",function(){n.clear(i)}),i.textures={},i.sprites={},i.primitives={},i.container.addChild(i.spriteContainer),o.isElement(i.element)?i.element.appendChild(i.canvas):o.warn('No "render.element" passed, "render.canvas" was not inserted into document.'),i.canvas.oncontextmenu=function(){return!1},i.canvas.onselectstart=function(){return!1},i},n.run=function(e){!function i(r){e.frameRequestId=t(i),n.world(e)}()},n.stop=function(t){e(t.frameRequestId)},n.clear=function(t){for(var e=t.container,i=t.spriteContainer;e.children[0];)e.removeChild(e.children[0]);for(;i.children[0];)i.removeChild(i.children[0]);var n=t.sprites["bg-0"];t.textures={},t.sprites={},t.primitives={},t.sprites["bg-0"]=n,n&&e.addChildAt(n,0),t.container.addChild(t.spriteContainer),t.currentBackground=null,e.scale.set(1,1),e.position.set(0,0)},n.setBackground=function(t,e){if(t.currentBackground!==e){var i=e.indexOf&&e.indexOf("#")!==-1,n=t.sprites["bg-0"];if(i){var r=o.colorToNumber(e);t.renderer.backgroundColor=r,n&&t.container.removeChild(n)}else if(!n){var s=h(t,e);n=t.sprites["bg-0"]=new PIXI.Sprite(s),n.position.x=0,n.position.y=0,t.container.addChildAt(n,0)}t.currentBackground=e}},n.world=function(t){var e,i=t.engine,o=i.world,a=t.renderer,c=t.container,h=t.options,u=s.allBodies(o),d=s.allConstraints(o),p=[];h.wireframes?n.setBackground(t,h.wireframeBackground):n.setBackground(t,h.background);var f=t.bounds.max.x-t.bounds.min.x,v=t.bounds.max.y-t.bounds.min.y,m=f/t.options.width,g=v/t.options.height;if(h.hasBounds){for(e=0;e<u.length;e++){var y=u[e];y.render.sprite.visible=r.overlaps(y.bounds,t.bounds)}for(e=0;e<d.length;e++){var _=d[e],x=_.bodyA,b=_.bodyB,w=_.pointA,S=_.pointB;x&&(w=l.add(x.position,_.pointA)),b&&(S=l.add(b.position,_.pointB)),w&&S&&(r.contains(t.bounds,w)||r.contains(t.bounds,S))&&p.push(_)}c.scale.set(1/m,1/g),c.position.set(-t.bounds.min.x*(1/m),-t.bounds.min.y*(1/g))}else p=d;for(e=0;e<u.length;e++)n.body(t,u[e]);for(e=0;e<p.length;e++)n.constraint(t,p[e]);a.render(c)},n.constraint=function(t,e){var i=(t.engine,e.bodyA),n=e.bodyB,r=e.pointA,s=e.pointB,a=t.container,l=e.render,c="c-"+e.id,h=t.primitives[c];return h||(h=t.primitives[c]=new PIXI.Graphics),l.visible&&e.pointA&&e.pointB?(o.indexOf(a.children,h)===-1&&a.addChild(h),h.clear(),h.beginFill(0,0),h.lineStyle(l.lineWidth,o.colorToNumber(l.strokeStyle),1),i?h.moveTo(i.position.x+r.x,i.position.y+r.y):h.moveTo(r.x,r.y),n?h.lineTo(n.position.x+s.x,n.position.y+s.y):h.lineTo(s.x,s.y),void h.endFill()):void h.clear()},n.body=function(t,e){var n=(t.engine,e.render);if(n.visible)if(n.sprite&&n.sprite.texture){var r="b-"+e.id,s=t.sprites[r],a=t.spriteContainer;s||(s=t.sprites[r]=i(t,e)),o.indexOf(a.children,s)===-1&&a.addChild(s),s.position.x=e.position.x,s.position.y=e.position.y,s.rotation=e.angle,s.scale.x=n.sprite.xScale||1,s.scale.y=n.sprite.yScale||1}else{var l="b-"+e.id,h=t.primitives[l],u=t.container;h||(h=t.primitives[l]=c(t,e),h.initialAngle=e.angle),o.indexOf(u.children,h)===-1&&u.addChild(h),h.position.x=e.position.x,h.position.y=e.position.y,h.rotation=e.angle-h.initialAngle}};var i=function(t,e){var i=e.render,n=i.sprite.texture,r=h(t,n),s=new PIXI.Sprite(r);return s.anchor.x=e.render.sprite.xOffset,s.anchor.y=e.render.sprite.yOffset,s},c=function(t,e){var i,n=e.render,r=t.options,s=new PIXI.Graphics,a=o.colorToNumber(n.fillStyle),l=o.colorToNumber(n.strokeStyle),c=o.colorToNumber(n.strokeStyle),h=o.colorToNumber("#bbb"),u=o.colorToNumber("#CD5C5C");s.clear();for(var d=e.parts.length>1?1:0;d<e.parts.length;d++){i=e.parts[d],r.wireframes?(s.beginFill(0,0),s.lineStyle(1,h,1)):(s.beginFill(a,1),s.lineStyle(n.lineWidth,l,1)),s.moveTo(i.vertices[0].x-e.position.x,i.vertices[0].y-e.position.y);for(var p=1;p<i.vertices.length;p++)s.lineTo(i.vertices[p].x-e.position.x,i.vertices[p].y-e.position.y);s.lineTo(i.vertices[0].x-e.position.x,i.vertices[0].y-e.position.y),s.endFill(),(r.showAngleIndicator||r.showAxes)&&(s.beginFill(0,0),r.wireframes?s.lineStyle(1,u,1):s.lineStyle(1,c),s.moveTo(i.position.x-e.position.x,i.position.y-e.position.y),s.lineTo((i.vertices[0].x+i.vertices[i.vertices.length-1].x)/2-e.position.x,(i.vertices[0].y+i.vertices[i.vertices.length-1].y)/2-e.position.y),s.endFill())}return s},h=function(t,e){var i=t.textures[e];return i||(i=t.textures[e]=PIXI.Texture.fromImage(e)),i}}()},{"../body/Composite":2,"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"../geometry/Vector":28}]},{},[30])(30)});var _c={};!function(){function t(t,e,i){function n(t){return t.addColorStop(0,h),t.addColorStop(1,u),t}function o(t){return t.addColorStop(0,d),t.addColorStop(1,p),t}t=l("string"==typeof t?document.getElementById(t):t);var a=t.getContext("2d");t.paintCodePixelRatio;a.save();var c=r(i,s(0,0,256,416),e);a.translate(c.x,c.y),a.scale(c.w/256,c.h/416);var h="rgba(181, 0, 4, 1)",u="rgba(251, 0, 7, 1)",d="rgba(62, 62, 62, 1)",p="rgba(0, 0, 0, 1)";a.beginPath(),a.moveTo(0,256),a.lineTo(0,288),a.bezierCurveTo(0,293.39,116.38,302.43,192.2,320),a.lineTo(192.2,320),a.bezierCurveTo(228.83,311.51,256,301.03,256,288),a.lineTo(256,288),a.lineTo(256,256),a.bezierCurveTo(256,242.98,228.83,232.49,192.2,224),a.lineTo(192.2,224),a.bezierCurveTo(116.38,241.58,0,250.61,0,256),a.closePath(),a.fillStyle=o(a.createLinearGradient(0,272,256,272)),a.fill(),a.beginPath(),a.moveTo(0,128),a.lineTo(0,160),a.bezierCurveTo(0,165.39,116.38,174.43,192.2,192),a.lineTo(192.2,192),a.bezierCurveTo(228.83,183.51,256,173.03,256,160),a.lineTo(256,160),a.lineTo(256,128),a.bezierCurveTo(256,114.98,228.83,104.49,192.2,96),a.lineTo(192.2,96),a.bezierCurveTo(116.38,113.58,0,122.61,0,128),a.closePath(),a.fillStyle=o(a.createLinearGradient(0,144,256,144)),a.fill(),a.beginPath(),a.moveTo(0,192),a.lineTo(0,288),a.bezierCurveTo(0,280,256,264,256,224),a.lineTo(256,224),a.lineTo(256,128),a.bezierCurveTo(256,168,0,184,0,192),a.closePath(),a.fillStyle=n(a.createLinearGradient(0,208,256,208)),a.fill(),a.beginPath(),a.moveTo(0,64),a.lineTo(0,160),a.bezierCurveTo(0,152,256,136,256,96),a.lineTo(256,96),a.lineTo(256,0),a.bezierCurveTo(256,40,0,56,0,64),a.closePath(),a.fillStyle=n(a.createLinearGradient(0,80,256,80)),a.fill(),a.beginPath(),a.moveTo(0,320),a.lineTo(0,416),a.bezierCurveTo(0,408,256,392,256,352),a.lineTo(256,352),a.lineTo(256,256),a.bezierCurveTo(256,296,0,312,0,320),a.closePath(),a.fillStyle=n(a.createLinearGradient(0,336,256,336)),a.fill(),a.restore()}function e(t,e,i){function n(t){return t.addColorStop(0,h),t.addColorStop(1,u),t}function o(t){return t.addColorStop(0,d),t.addColorStop(1,p),t}t=l("string"==typeof t?document.getElementById(t):t);var a=t.getContext("2d");t.paintCodePixelRatio;a.save();var c=r(i,s(0,0,256,256),e);a.translate(c.x,c.y),a.scale(c.w/256,c.h/256);var h="rgba(247, 159, 52, 1)",u="rgba(232, 38, 38, 1)",d="rgba(219, 142, 45, 1)",p="rgba(198, 36, 32, 1)",f="rgba(255, 255, 255, 1)";a.beginPath(),a.moveTo(56.9,0),a.bezierCurveTo(58.4,0,196.2,0,198.7,0),a.bezierCurveTo(205.6,0,212.3,1.1,218.8,3.4),a.bezierCurveTo(228.2,6.8,236.7,12.8,243.1,20.6),a.bezierCurveTo(249.6,28.4,253.9,38,255.4,48),a.bezierCurveTo(256,51.7,256.1,55.4,256.1,59.1),a.bezierCurveTo(256.1,62.5,256.1,182.3,256.1,187.7),a.bezierCurveTo(256.1,190.9,256.1,194.2,256.1,197.4),a.bezierCurveTo(256.1,201.8,255.9,206.3,255,210.6),a.bezierCurveTo(253,220.5,248.3,229.8,241.5,237.3),a.bezierCurveTo(234.8,244.8,226,250.4,216.5,253.4),a.bezierCurveTo(210.7,255.2,204.7,256,198.6,256),a.bezierCurveTo(195.9,256,56.5,256,54.4,255.9),a.bezierCurveTo(44.2,255.4,34.1,252.1,25.6,246.4),a.bezierCurveTo(17.3,240.8,10.5,233,6.1,224),a.bezierCurveTo(2.3,216.3,.4,207.7,.4,199.1),a.bezierCurveTo(.4,197.1,.4,58.9,.4,56.9),a.bezierCurveTo(.2,48.4,2,40,5.7,32.4),a.bezierCurveTo(10,23.4,16.7,15.5,25,9.9),a.bezierCurveTo(33.5,4.1,43.5,.7,53.7,.2),a.bezierCurveTo(54.7,0,55.8,0,56.9,0),a.closePath(),a.fillStyle=n(a.createLinearGradient(152.29,-9.13,103.92,265.17)),a.fill(),a.beginPath(),a.moveTo(216,209.4),a.bezierCurveTo(215.1,208,214.1,206.6,213,205.3),a.bezierCurveTo(210.5,202.3,207.6,199.7,204.4,197.5),a.bezierCurveTo(200.4,194.8,195.7,193.1,190.9,192.9),a.bezierCurveTo(187.5,192.7,184.1,193.3,180.9,194.5),a.bezierCurveTo(177.7,195.6,174.6,197.2,171.6,198.8),a.bezierCurveTo(168.1,200.6,164.6,202.4,160.9,203.9),a.bezierCurveTo(156.5,205.7,151.9,207.1,147.2,208.1),a.bezierCurveTo(141.3,209.2,135.3,209.6,129.4,209.5),a.bezierCurveTo(118.7,209.3,108,207.7,97.8,204.7),a.bezierCurveTo(88.8,202,80.2,198.3,72.1,193.6),a.bezierCurveTo(65,189.5,58.4,184.8,52.2,179.5),a.bezierCurveTo(47.1,175.1,42.4,170.4,38,165.4),a.bezierCurveTo(35,161.9,32.1,158.2,29.4,154.4),a.bezierCurveTo(28.3,152.9,27.3,151.3,26.4,149.7),a.lineTo(26.4,149.7),a.lineTo(26.4,149.7),a.lineTo(0,121.2),a.lineTo(0,56.7),a.bezierCurveTo(0,25.4,25.3,-0,56.6,-0),a.lineTo(107.1,-0),a.lineTo(144.5,38),a.lineTo(144.5,38),a.bezierCurveTo(228.9,95.4,201.6,158.7,201.6,158.7),a.bezierCurveTo(201.6,158.7,225.6,185.7,216,209.4),a.closePath(),a.fillStyle=o(a.createLinearGradient(130.61,4.14,95.21,204.89)),a.fill(),a.beginPath(),a.moveTo(144.7,38),a.bezierCurveTo(229.1,95.4,201.8,158.7,201.8,158.7),a.bezierCurveTo(201.8,158.7,225.8,185.8,216.1,209.5),a.bezierCurveTo(216.1,209.5,206.2,192.9,189.6,192.9),a.bezierCurveTo(173.6,192.9,164.2,209.5,132,209.5),a.bezierCurveTo(60.3,209.5,26.4,149.6,26.4,149.6),a.bezierCurveTo(91,192.1,135.1,162,135.1,162),a.bezierCurveTo(106,145.1,44.1,64.3,44.1,64.3),a.bezierCurveTo(98,110.2,121.3,122.3,121.3,122.3),a.bezierCurveTo(107.4,110.8,68.4,54.6,68.4,54.6),a.bezierCurveTo(99.6,86.2,161.6,130.3,161.6,130.3),a.bezierCurveTo(179.2,81.5,144.7,38,144.7,38),a.closePath(),a.fillStyle=f,a.fill(),a.restore()}function i(t,e,i,n){function o(t){return t.addColorStop(0,"rgb(0, 0, 0)"),t.addColorStop(.27,c("rgb(0, 0, 0)","rgb(255, 255, 255)",.5)),t.addColorStop(.38,"rgb(255, 255, 255)"),t.addColorStop(.62,c("rgb(255, 255, 255)","rgb(0, 0, 0)",.5)),t.addColorStop(1,"rgb(0, 0, 0)"),t}t=l("string"==typeof t?document.getElementById(t):t);var a=t.getContext("2d");t.paintCodePixelRatio;a.save();var h=r(n,s(0,0,375,293),i);a.translate(h.x,h.y),a.scale(h.w/375,h.h/293),a.beginPath(),a.moveTo(201,7),a.bezierCurveTo(201,7,201,10.72,201,14.02),a.bezierCurveTo(201.35,14.07,201.78,14.14,202.29,14.21),a.bezierCurveTo(207.28,14.55,212.15,15.28,216.84,16.37),a.bezierCurveTo(252.08,21.61,332.54,33.57,363,38.1),a.bezierCurveTo(363,33.64,363,31,363,31),a.bezierCurveTo(363,30.43,363.08,29.88,363.23,29.35),a.bezierCurveTo(363.94,26.84,366.26,25,369,25),a.bezierCurveTo(372.31,25,375,27.69,375,31),a.bezierCurveTo(375,31.05,375,39.9,375,39.9),a.lineTo(375,141.95),a.bezierCurveTo(375,145.31,372.31,148,369,148),a.bezierCurveTo(365.69,148,363,145.31,363,142),a.bezierCurveTo(363,142,363,139.55,363,135.38),a.bezierCurveTo(334.77,137.68,247.56,144.77,211.46,147.71),a.bezierCurveTo(206.46,148.56,201.29,149,196,149),a.lineTo(195.58,149),a.bezierCurveTo(152.13,148.8,117,118.66,117,81.5),a.bezierCurveTo(117,68.22,121.49,55.84,129.24,45.4),a.bezierCurveTo(140.16,30.69,157.55,19.83,178,15.76),a.bezierCurveTo(178,12.21,178,7,178,7),a.bezierCurveTo(178,3.69,180.69,1,184,1),a.lineTo(195,1),a.bezierCurveTo(198.31,1,201,3.69,201,7),a.closePath(),a.fillStyle=o(a.createLinearGradient(246,1,246,149)),a.fill(),a.beginPath(),a.moveTo(174.69,148.79),a.bezierCurveTo(174.69,148.78,174.71,148.86,174.76,149),a.lineTo(332,149),a.lineTo(332,182),a.lineTo(179,182),a.bezierCurveTo(149.97,190.71,9,233,9,233),a.lineTo(-.5,201.34),a.bezierCurveTo(-.5,201.34,155,154.69,173,149.29),a.bezierCurveTo(173,149.1,173,149,173,149),a.lineTo(173.97,149),a.bezierCurveTo(174.45,148.86,174.69,148.78,174.69,148.78),a.lineTo(174.69,148.79),a.closePath(),a.fillStyle="rgb(85, 85, 85)",a.fill(),a.save(),a.translate(157.89,172.08),a.rotate(-e*Math.PI/180),a.beginPath(),a.moveTo(114.66,-35.49),a.bezierCurveTo(115.14,-35.6,115.38,-35.66,115.38,-35.66),a.bezierCurveTo(115.38,-35.66,115.15,-35.56,114.7,-35.38),a.bezierCurveTo(118.14,-24.2,120,-12.32,120,0),a.bezierCurveTo(120,12.32,118.14,24.2,114.7,35.38),a.bezierCurveTo(115.15,35.56,115.38,35.66,115.38,35.66),a.bezierCurveTo(115.38,35.66,115.14,35.6,114.66,35.49),a.bezierCurveTo(99.53,84.44,53.92,120,-0,120),a.bezierCurveTo(-53.92,120,-99.53,84.44,-114.66,35.49),a.bezierCurveTo(-115.14,35.6,-115.38,35.66,-115.38,35.66),a.bezierCurveTo(-115.38,35.66,-115.15,35.56,-114.7,35.38),a.bezierCurveTo(-118.14,24.2,-120,12.32,-120,0),a.bezierCurveTo(-120,-12.32,-118.14,-24.2,-114.7,-35.38),a.bezierCurveTo(-115.15,-35.56,-115.38,-35.66,-115.38,-35.66),a.bezierCurveTo(-115.38,-35.66,-115.14,-35.6,-114.66,-35.49),a.bezierCurveTo(-112.86,-41.34,-110.61,-47,-107.97,-52.42),a.bezierCurveTo(-94.97,-79.15,-72.35,-100.32,-44.6,-111.44),a.bezierCurveTo(-30.81,-116.96,-15.76,-120,-0,-120),a.bezierCurveTo(53.92,-120,99.53,-84.44,114.66,-35.49),a.closePath(),a.moveTo(1.63,-95.99),a.bezierCurveTo(3.91,-68.84,7.79,-22.79,7.79,-22.79),a.bezierCurveTo(7.79,-22.79,38.15,-56.51,56.89,-77.33),a.bezierCurveTo(41.38,-88.77,22.3,-95.64,1.63,-95.99),a.closePath(),a.moveTo(-1.63,-95.99),a.bezierCurveTo(-22.3,-95.64,-41.38,-88.77,-56.89,-77.33),a.bezierCurveTo(-38.15,-56.51,-7.79,-22.79,-7.79,-22.79),a.bezierCurveTo(-7.79,-22.79,-3.91,-68.84,-1.63,-95.99),a.closePath(),a.moveTo(59.66,-75.22),a.bezierCurveTo(44.63,-51.82,20.38,-14.08,20.38,-14.08),a.bezierCurveTo(20.38,-14.08,63.02,-23.77,91.17,-30.16),a.bezierCurveTo(85.23,-48.11,74.15,-63.71,59.66,-75.22),a.closePath(),a.moveTo(-59.66,-75.22),a.bezierCurveTo(-70.54,-66.58,-79.5,-55.63,-85.8,-43.12),a.bezierCurveTo(-87.89,-38.96,-89.69,-34.63,-91.17,-30.16),a.bezierCurveTo(-63.02,-23.77,-20.38,-14.08,-20.38,-14.08),a.bezierCurveTo(-20.38,-14.08,-44.63,-51.82,-59.66,-75.22),a.closePath(),a.moveTo(-0,-13.85),a.bezierCurveTo(-8.04,-13.85,-14.56,-7.65,-14.56,0),a.bezierCurveTo(-14.56,7.65,-8.04,13.85,-0,13.85),a.bezierCurveTo(8.04,13.85,14.56,7.65,14.56,0),a.bezierCurveTo(14.56,-7.41,8.44,-13.46,.74,-13.83),a.bezierCurveTo(.5,-13.84,.25,-13.85,-0,-13.85),a.closePath(),a.moveTo(92.29,-26.53),a.bezierCurveTo(65.57,-15.96,25.19,0,25.19,0),a.bezierCurveTo(25.19,0,65.57,15.96,92.29,26.52),a.bezierCurveTo(94.71,18.1,96,9.2,96,0),a.bezierCurveTo(96,-9.2,94.71,-18.1,92.29,-26.53),a.closePath(),a.moveTo(-92.29,-26.53),a.bezierCurveTo(-94.71,-18.1,-96,-9.2,-96,0),a.bezierCurveTo(-96,9.2,-94.71,18.1,-92.29,26.53),a.bezierCurveTo(-65.57,15.96,-25.19,0,-25.19,0),a.bezierCurveTo(-25.19,0,-65.57,-15.96,-92.29,-26.53),a.closePath(),a.moveTo(-20.38,14.08),a.bezierCurveTo(-20.38,14.08,-63.02,23.77,-91.17,30.16),a.bezierCurveTo(-85.23,48.11,-74.15,63.71,-59.66,75.22),a.bezierCurveTo(-44.63,51.82,-20.38,14.08,-20.38,14.08),a.closePath(),a.moveTo(20.38,14.08),a.bezierCurveTo(20.38,14.08,44.63,51.82,59.66,75.21),a.bezierCurveTo(74.15,63.71,85.23,48.11,91.17,30.16),a.bezierCurveTo(63.02,23.77,20.38,14.08,20.38,14.08),a.closePath(),a.moveTo(-7.79,22.79),a.bezierCurveTo(-7.79,22.79,-38.15,56.51,-56.89,77.33),a.bezierCurveTo(-41.38,88.77,-22.3,95.64,-1.63,95.99),a.bezierCurveTo(-3.91,68.84,-7.79,22.79,-7.79,22.79),a.closePath(),a.moveTo(7.79,22.79),a.bezierCurveTo(7.79,22.79,3.91,68.84,1.63,95.99),a.bezierCurveTo(22.3,95.64,41.38,88.77,56.89,77.33),a.bezierCurveTo(38.15,56.51,7.79,22.79,7.79,22.79),a.closePath(),a.fillStyle="rgb(0, 0, 0)",a.fill(),a.restore(),a.beginPath(),a.moveTo(158,72),a.bezierCurveTo(144.15,72,130.96,74.82,118.96,79.91),a.bezierCurveTo(83.13,95.11,58,130.62,58,172),a.bezierCurveTo(58,227.23,102.77,272,158,272),a.bezierCurveTo(213.23,272,258,227.23,258,172),a.bezierCurveTo(258,116.77,213.23,72,158,72),a.closePath(),a.moveTo(278,172),a.bezierCurveTo(278,238.27,224.27,292,158,292),a.bezierCurveTo(91.73,292,38,238.27,38,172),a.bezierCurveTo(38,125.19,64.8,84.64,103.89,64.86),a.bezierCurveTo(120.15,56.63,138.53,52,158,52),a.bezierCurveTo(224.27,52,278,105.73,278,172),a.closePath(),a.fillStyle=o(a.createLinearGradient(158,52,158,292)),a.fill(),a.restore()}function n(t){t=l("string"==typeof t?document.getElementById(t):t),t.getContext("2d").clearRect(0,0,t.width,t.height)}function r(t,e,i){if(void 0===i||o(e,i)||o(i,s(0,0,0,0)))return e;var n=a(0,0);switch(n.w=Math.abs(i.w/e.w),n.h=Math.abs(i.h/e.h),t){case"aspectfit":n.w=Math.min(n.w,n.h),n.h=n.w;break;case"aspectfill":n.w=Math.max(n.w,n.h),n.h=n.w;break;case"stretch":case void 0:break;case"center":n.w=1,n.h=1;break;default:throw'Unknown resizing behavior "'+t+'". Use "aspectfit", "aspectfill", "stretch" or "center" as resizing behavior.'}var r=s(Math.min(e.x,e.x+e.w),Math.min(e.y,e.y+e.h),Math.abs(e.w),Math.abs(e.h));return r.w*=n.w,r.h*=n.h,r.x=i.x+(i.w-r.w)/2,r.y=i.y+(i.h-r.h)/2,r}function s(t,e,i,n){return{x:t,y:e,w:i,h:n}}function o(t,e){return t.x===e.x&&t.y===e.y&&t.w==e.w&&t.h===e.h}function a(t,e){return{w:t,h:e}}function l(t){if("paintCodePixelRatio"in t)return t;var e=t.getContext("2d"),i=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,r=i/n;return t.style.width=t.width+"px",t.style.height=t.height+"px",t.width*=r,t.height*=r,t.paintCodePixelRatio=r,e.scale(r,r),t}function c(t,e,i){var n=u(t),r=u(e);return h(n[0]*(1-i)+r[0]*i,n[1]*(1-i)+r[1]*i,n[2]*(1-i)+r[2]*i,n[3]*(1-i)+r[3]*i)}function h(t,e,i,n){return"rgba("+Math.round(255*t)+", "+Math.round(255*e)+", "+Math.round(255*i)+", "+n+")"}function u(t){if("hsl"===t.substring(0,3))return f.apply(this,d(t));if("#"===t.substring(0,1)){var e=t.substring(1).split("");3===e.length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2]]);var i="0x"+e.join("");return[i>>16&1,i>>8&1,1&i,1]}var n=t.replace(/[^0-9,\.]/g,"").split(",");return 3===n.length&&n.push(1),t.indexOf("%")>-1?[n[0]/100,n[1]/100,n[2]/100,n[3]]:[n[0]/255,n[1]/255,n[2]/255,n[3]]}function d(t){if("#"===t.substring(0,1)||"rgb"===t.substring(0,3))return p.apply(this,u(t));var e=t.replace(/[^0-9,\.]/g,"").split(",");return e.length<4&&e.push(1),[e[0]/360,e[1]/100,e[2]/100,e[3]]}function p(t,e,i,n){var r=Math.max(t,e,i),s=Math.min(t,e,i),o=r-s,a=0,l=0,c=r;return r>0&&o>1e-5&&(l=o/r,t==r?a=(e-i)/o:e==r?a=2+(i-t)/o:i==r&&(a=4+(t-e)/o),a/=6,a<0&&(a+=1)),[a,l,c,n]}function f(t,e,i,n){var r,s,o,a,l,c,h,u;switch(a=Math.floor(6*t),l=6*t-a,c=i*(1-e),h=i*(1-l*e),u=i*(1-(1-l)*e),a%6){case 0:r=i,s=u,o=c;break;case 1:r=h,s=i,o=c;break;case 2:r=c,s=i,o=u;break;case 3:r=c,s=h,o=i;break;case 4:r=u,s=c,o=i;break;case 5:r=i,s=c,o=h}return[r,s,o,n]}_c.drawScalaLangLogo=t,_c.drawSwiftLangLogo=e,_c.drawCannon=i,_c.clearCanvas=n,_c.makeRect=s}(),function(){function t(t,e,i,n){this.DisplayObject_constructor(),this.name=t,this.drawFunction=e,this.targetFrame=i,this.resizing=n}function e(t,e,i,n){var r=_b.Engine.create(),s=_b.Render.create({element:document.body,engine:r,options:{width:t,height:e,pixelRatio:i,showAxes:!0,showAngleIndicator:!0,showDebug:!0,showPositions:!0}});return n&&_b.Render.run(s),r}function i(){function t(){var t=null,e=null,i=null,n=Math.floor(10*Math.random())+1;n%2==0?(t=d,e=v,i=_c.drawScalaLangLogo):(t=p,e=m,i=_c.drawSwiftLangLogo);var r=new _a.PaintCodeDisplayObject(t.name,i,_c.makeRect(0,0,e.w,e.h),"aspectfit");r.regX=e.regX,r.regY=e.regY;var s=_b.Bodies.rectangle(e.cX,e.cY,e.w,e.h,{isStatic:!1,mass:5});_b.World.add(u.world,[s]),T.addChild(r);var o=12+Math.floor(15*Math.random())+1,a=10+Math.floor(15*Math.random())+1;_b.Body.setVelocity(_,{x:-o*h,y:0*h}),_b.Body.setPosition(s,{x:210*h,y:165*h}),_b.Body.setAngle(s,0),_b.Body.setVelocity(s,{x:o*h,y:-a*h}),_b.Body.setAngularVelocity(s,.2),c.push({ui:r,body:s})}function i(t,e,i,n,r){null!=i&&null==n?n=i/r.ratio:null==i&&null!=n&&(i=n*r.ratio);var s=(t+i/2)*h,o=(e+n/2)*h,i=i*h,n=n*h,a=i/2,l=n/2;return{cX:s,cY:o,w:i,h:n,regX:a,regY:l}}function n(){for(var t=0;t<c.length;t++){var e=c[t];e.ui.x=e.body.position.x,e.ui.y=e.body.position.y,e.ui.rotation=e.body.angle*(180/Math.PI)}S.x=_.position.x,S.y=_.position.y,S.rotation=-20,S.arg1=g.cX-_.position.x}function r(e){_b.Engine.update(u,e.delta),n(),T.update();var i=Math.floor(Date.now()/1e3);i-w>3&&(w=i,t())}var s=window.innerWidth,o=document.getElementById("skillsApp");o.width=s;var a=o.height,l=!!o.getAttribute("isDebugEnabled")&&"true"==o.getAttribute("isDebugEnabled"),c=[];_c.clearCanvas(o);var h=o.paintCodePixelRatio,u=e(s,a,h,l),d={name:"ScalaLogo",w:256,h:416,ratio:256/416,regX:128,regY:208},p={name:"SwiftLogo",w:256,h:256,ratio:1,regX:128,regY:128},f={name:"Cannon",w:375,h:293,ratio:375/293,regX:160,regY:170},v=i(0,0,null,50,d),m=i(30,0,50,null,p),g=i(100,180,null,120,f),y=i(0,300,s,100,null),_=_b.Bodies.rectangle(g.cX,g.cY,g.w,g.h,{isStatic:!1,mass:20,friction:.5,frictionStatic:.5}),x={x:g.cX,y:g.cY+20},b=_b.Constraint.create({pointA:x,bodyB:_,stiffness:.03});_b.World.add(u.world,b);var y=_b.Bodies.rectangle(y.cX,y.cY,y.w,y.h,{isStatic:!0});_b.World.add(u.world,[_,y]);var w=Math.floor(Date.now()/1e3)-2;_a.Ticker.addEventListener("tick",r),_a.Ticker.setFPS(30);var S=new _a.PaintCodeDisplayObject(f.name,_c.drawCannon,_c.makeRect(0,0,g.w,g.h),"aspectfit");S.regX=g.regX,S.regY=g.regY,S.arg1=0,n();var T=new _a.Stage(o);T.addChild(S),T.update()}var n=_a.extend(t,_a.DisplayObject);n.draw=function(t,e){"undefined"!=typeof this.arg1?this.drawFunction(t.canvas,this.arg1,this.targetFrame,this.resizing):this.drawFunction(t.canvas,this.targetFrame,this.resizing)},_a.PaintCodeDisplayObject=_a.promote(t,"DisplayObject"),window.onload=i}();
